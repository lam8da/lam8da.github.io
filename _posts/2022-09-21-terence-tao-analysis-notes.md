---
layout: post
title: 《陶哲轩实分析》笔记（第一部分）
categories:
    - 数学&物理
tags:
    - Work in Progress
    - 读书笔记
    - 数学  
    - 微积分  
---

{::comment} Not show line_numbers {:/comment}
{::options syntax_highlighter_opts="{default_lang: c++ \}" /}

* TOC
{:toc}

本文内容主要来自[crasysky的cnblogs](https://www.cnblogs.com/crasysky/p/16367673.html)，在该基础上做了一些修正和补充。非常感谢原博主的辛勤劳动。

# 附录A 数理逻辑基础

## 命题

- 命题通过关系、性质描述，可以利用表达式和词汇。
- 利用逻辑连接词构造复合命题：合取，析取，否定，当且仅当

## 蕴含关系

若$$ X $$则$$ Y $$。 称为$$ X $$到$$ Y $$的蕴含关系。一个蕴含关系是空虚的，即前提不为真，空虚的蕴含关系表示的命题也是真命题。

## 变量与量词

- **自由变量**：命题中含有的规定类型但不设定为具体对象的变量，此时命题的是否为真与自由变量的取值有关。设定为具体对象的变量称为约束变量。
- 全称量词和存在量词
- **嵌套量词**：如$$ \forall x,\exists y... $$，$$ x $$不可依赖于y。外部变量不依赖与嵌套在该变量内部的变量。

## 相等

对一类对象定义相等关系，要遵守下面的相等公理

- **自反公理**：$$ x=x $$
- **对称公理**：若$$ x=y $$，则$$ y=x $$
- **传递公理**：若$$ x=y $$且$$ y=z $$，则$$ x=z $$
- **替换公理**：若$$ x=y $$，则对任何一个函数或运算$$ f $$都有$$ f(x)=f(y) $$，类似地，对任何一个性质$$ P $$，$$ P(x) $$和$$ P(y) $$是等价命题。

例如：证明$$ a=b $$且$$ c=d $$时，有$$ a+d=b+c $$。

证：由替换公理：$$ a+d=b+d $$，$$ b+d=b+c $$，再用传递公理。

# 第2章 自然数

## 皮亚诺公理

皮亚诺公理通过公理1~5描述了唯一的自然数系，intuition大概是：自然数源于我们最熟悉的“数数”，“数数”的本质大概就是$$ n++ $$这一运算。

- **公理1**：0是自然数
- **公理2**：如果$$ n $$是自然数，那么$$ n++ $$也是自然数

此时可以定义$$ 1:=0++ $$ $$ 2:=1++ $$ 并可以证明$$ 2 $$是自然数

- **公理3**：对任意一个自然数$$ n $$，$$ n++\neq 0 $$

此时可以证明$$ 4 \neq 0 $$

- **公理4**：如果$$ n $$和$$ m $$是自然数，$$ n \neq m $$，有$$ n++ \neq m++ $$

可使用其逆否命题证明$$ 6 \neq 2 $$。 可以看出来公理3和公理4就是在保证$$ n++ $$的作为$$ n $$父亲的树形成了链

- **公理5**：令$$ P(n) $$为n的一个某一个性质，若$$ P(0) $$为真，且$$ P(n) $$为真时$$ P(n++) $$一定为真，则对于任意自然数$$ n $$，$$ P(n) $$均为真。

这个公理是为了保证刚才所说的树不会形成多条链，如$$ 0,0.5,1,1.5,2... $$构成的就是两条链，因为这样一个数系无法得出$$ P(0.5) $$为真。公理5也是数学归纳法原理。

至此，我们可以认为存在唯一数系满足皮亚诺公理，也就是自然数系。

## 加法

### 加法运算

仍然是受“数数”的影响，我们知道$$ 3+5 $$是$$ 5 $$再往后数$$ 3 $$个数，以此定义加法。

- **定义**：$$ 0+m:=m $$ 递归定义$$ (n++)+m:=(n+m)++ $$

通过数学归纳法对n归纳证明自然数的和仍然是自然数。

- $$ n+0=n $$；
- $$ n+(m++)=(n+m)++ $$；
- **加法交换律**：$$ n+m=m+n $$
- **加法结合律**：$$ (a+b)+c=a+(b+c) $$
- **消去律**：若$$ c+a=c+b $$，有$$ a=b $$

前三条均可对$$ n $$归纳证明，后两条可对$$ c $$归纳。

以第二条为例: $$ 0+(m++)=m++=(0+m)++ $$ 利用归纳假设，$$ (n++)+(m++)=(n+(m++))++=((n+m)++)++=((n++)+m)++ $$

### 序

- **正自然数的定义**：自然数$$ n $$是正的，当且仅当$$ n \neq 0 $$

可以归纳证明若$$ a $$为正自然数，存在唯一自然数$$ b $$，满足$$ b++=a $$

- 如果$$ a $$是正的，$$ b $$是自然数，则$$ a+b $$和$$ b+a $$是正的

关于$$ n \neq 0 $$这件事，我们只有公理3提到了，因此还是需要用数学归纳法。

- **序的概念**：称$$ n \ge m $$或$$ m \le n $$，当且仅当存在自然数a使得$$ n=m+a $$。$$ n\gt m $$或$$ m\lt n $$当且仅当$$ n \ge m $$且$$ n \neq m $$

$$ n++\gt n $$，无最大自然数

- **自反性**：$$ a \ge a $$
- **传递性**：若$$ a \ge b $$且$$ b \ge c $$，则$$ a \ge c $$
- **加法保序性**：$$ a \ge b $$当且仅当$$ a+c \ge b+c $$
- $$ a\lt b $$当且仅当$$ a++ \le b $$
- $$ a\lt b $$当且仅当存在正自然数$$ d $$，$$ b=a+d $$
- **序的三歧性**：任意两个自然数$$ a $$和$$ b $$，$$ a\lt b $$，$$ a=b $$，$$ a\gt b $$中恰一个为真

都可以通过定义设差值证明，序的三歧性先证明至多一个满足，证明至少有一个满足时归纳即可。

- **强归纳原理**：令$$ m_0 $$为自然数，若此命题成立：“若$$ \forall m \ge m_0,\forall m_0\le m'\lt m $$均有$$ P(m') $$成立，则$$ P(m) $$也为真”，那么对于任何$$ m\ge m_0 $$均有$$ P(m) $$为真。

令$$ Q(n) $$为$$ \forall m_0\le m'\lt n $$均有$$ P(m') $$成立，然后用数学归纳法原理即可证明。

- **逆向归纳原理**：令$$ n $$为自然数，若$$ P(n) $$为真，且若“若$$ P(m++) $$为真，则$$ P(m) $$为真”是真命题，那么对于任何$$ m\le n $$均有$$ P(m) $$为真。

对n归纳即可。

## 乘法

乘法很自然地用加法来定义，并且部分定理的证明和加法很类似。

- **定义**：$$ 0\times m:=0 $$ $$ (n++)\times m:=(n\times m)+m $$

- **乘法交换律**：$$ n\times m=m\times n $$
- $$ nm=0 $$当且仅当$$ n $$和$$ m $$中至少有一个为$$ 0 $$
- **乘法分配律**：$$ a(b+c)=ab+ac $$
- **乘法结合律**：$$ (ab)c=a(bc) $$
- **乘法保序性**：若$$ c $$是正自然数且$$ a\gt b $$则$$ ac\gt bc $$
- **消去律**：若$$ ac=bc $$且$$ c $$是正的，则$$ a=b $$

乘法交换律类似加法交换律，先证明$$ n\times 0=0 $$和$$ n\times (m++)=n\times m+n $$

分配律对任一个变量归纳证明，结合律利用分配律归纳

消去律证明不用归纳，利用乘法的保序性和序的三歧性证明

现在加法和乘法的代数法则非常完备了，我们熟悉的定理（如平方和公式）也很容易证明了。

- $$ q $$是正自然数，存在自然数$$ m $$和$$ r $$，$$ 0\le r\lt q $$，且$$ n=mq+r $$

对n归纳证明。以此定义了带余除法，这是数论定理的基础。

- **指数运算的定义**：设$$ m $$是自然数，$$ m^0:=1 $$ $$ m^{n++}:=m^n\times m $$

# 第3章 集合论

## 基础知识

这部分的主要内容是定义集合和运算。这部分仍然要摒弃有关集合的常识，例如暂时不知道什么东西可以是集合，不知道$$ \{1,2,3\} $$是什么含义，我们也不能一下子取出集合中所有元素，在单个选取引理介绍后，才能取出集合中的一个元素。

- **集合的（非正式）定义**：集合$$ A $$定义为任意一堆没有次序的东西。设$$x$$是一个对象，如果$$x$$在这堆东西中，我们说$$x$$是$$A$$的一个元素，或$$x\in A$$，否则就是$$x\notin A$$。

> 问：不为这个非正式定义单独设立一条公理的原因是，它并不是一个命题吗？
  {: .lambda_question}

- **公理1（集合是对象）**：如果$$ A $$是集合，$$ A $$也是一个对象
- **集合相等的定义**：两个集合$$ A $$和$$ B $$，称$$ A=B $$当且仅当任取一个对象$$ x\in A,x\in B $$并且任取一个对象$$ y\in B,y\in A $$

数理逻辑基础中给出了定义相等这个概念的要求，自反公理，对称公理，传递公理都容易验证。而对于替换公理，我们现在需要考虑的$$ P(x) $$只有$$ x\in S $$（属于）这一种运算，因为我们还没有关于集合的任何其他运算，那么替换公理也可以证明。但是由于我们已经定义了相等，因此之后定义的任何运算，都需要考虑添加这个运算后，替换公理是否还能成立，否则集合相等的概念就无效了。

- **公理2（空集公理）**：存在一个集合$$ \emptyset $$，被称为空集，对任一个对象$$ x $$，有$$ x\notin S $$

容易知道，空集是唯一的，因为如果有多个空集，他们都相等。

我们现在虽然只定义了空集是集合，但不代表我们只能研究空集，因为我们没有定义哪些不是集合。

- **单个选取引理**：若$$ A\ne \emptyset $$，存在一个对象$$ x $$满足$$ x\in S $$

用反证法，得到$$ A $$符合空集的定义，$$ A=\emptyset $$，矛盾。

- **公理3（单元素集和双元素集公理）**：如果$$ a $$是一个对象，存在集合$$ \{a\} $$。$$ \forall y $$，$$ y\in \{a\} $$当且仅当$$ y=a $$。如果$$ a $$和$$ b $$是对象，存在集合$$ \{a,b\} $$，$$ \forall y $$，$$ y\in \{a,b\} $$当且仅当$$ y=a $$或$$ y=b $$。

现在我们明确了$$ \{1\} $$是集合，并且明确了它的含义。

- **公理4（双并公理）**：对任意两个集合$$ A $$和$$ B $$，$$ A\cup B $$是集合，称为$$ A $$和$$ B $$的并集，并且任取对象$$ x $$，$$ x\in A\cup B $$当且仅当$$ x\in A $$或$$ x\in B $$

定义并集仅仅使用了$$ \in $$这一运算，因此容易证明替换公理仍然满足。

这里定义了并集，也提供了一个得到大集合的方式。我认为此时就可以定义有限集了，比如二元集由两个不相等的单元集的并得到，并且可以记作$$ \{a,b\} $$，三元集由单元集和二元集合并得到，并且利用单个选取引理得到单元素集中的元素，并保证其不属于二元集，记做$$ \{a,b,c\} $$。进而定义四元集、五元集等等。那么现在唯一不可以确定$$ \{1,2,3\} $$是集合的原因是$$ 1 $$，$$ 2 $$，$$ 3 $$并没有被规定为对象，在无穷大公理中会被确定。

证明并集的结合律用相等的定义，使用并集的定义分类讨论。

公理4和单元素集公理可以得到双元素集公理，但未来会选择用双元素集公理和公理10代替公理4。

- **子集的定义**：$$ A $$和$$ B $$是集合，称$$ A $$是$$ B $$的子集，当且仅当对任意对象$$ x\in A $$，有$$ x\in B $$。若$$ A\in B $$并且$$ A\ne B $$，称$$ A $$是$$ B $$的真子集。

我们还只能判断一个集合是不是另一个集合的子集，而不能确定一个集合的子集有哪些，比如这时不能说一个大小为$$ n $$的集合的子集个数是$$ 2^{n} $$。

- 如果$$ A\subseteq B $$，$$ B\subseteq C $$，则$$ A\subseteq C $$
- 如果$$ A\subseteq B $$，$$ B\subseteq A $$，则$$ A=B $$
- 如果$$ A\subsetneq B $$，$$ B\subsetneq C $$，则$$ A\subsetneq C $$

虽然我们根据双并公理可知道$$ \{1,2,3\} $$有子集$$ \{1,2\} $$，但对于已知集合$$ S $$，$$ 3\in S $$，我们还不知道是否存在$$ S $$的一个子集$$ S' $$是$$ S $$去除$$ 3 $$得到的

- **公理5（分类公理）**：$$ A $$是一个集合，对任意$$ x\in A $$，令$$ P(x) $$是x的一个性质，那么存在一个集合$$ \{x\in A:P(x)\} $$，满足$$ y\in \{x\in A:P(x)\} $$当且仅当$$ y\in A $$且$$ P(y) $$为真。

我认为分类公理保证了一个集合“子集”的确是集合，例如$$ \{x\in S:x\ne 3\} $$，只要准确地描述出一个子集（利用$$ P(x) $$），就可以确定这个子集的存在。但我们还无法找出一个集合所有存在的子集，这也就是幂集公理所得到引理的作用。

- **交集的定义**：$$ S_1\cap S_2 $$定义为$$ \{x\in S_1:x\in S_2\} $$
- **差集的定义**：$$ A\setminus B $$定义为$$ \{x\in A:x\notin B\} $$

这里定义交集和差集不像定义并集一样作为一个公理，因为分类公理已经保证了$$ \{x\in S_1:x\in S_2\} $$和$$ \{x\in A:x\notin B\} $$是一个集合。

如果$$ A\cap B=\emptyset $$，则$$ A $$和$$ B $$不相交

设$$ A $$，$$ B $$，$$ C $$是集合，$$ X $$是包含$$ A $$，$$ B $$，$$ C $$作为子集的集合，以下定律被称为布尔代数定律，被确定为集合论基本定律

- $$ A\cup \emptyset=A $$，$$ A\cap \emptyset=\emptyset $$
- $$ A\cup X=X $$，$$ A\cap X=A $$
- $$ A\cup A=A $$，$$ A\cap A=A $$
- $$ A\cup B=B\cup A $$，$$ A\cap B=B\cap A $$
- $$ (A\cup B)\cup C=A\cup(B\cup C) $$，$$ (A\cap B)\cap C=A\cap(B\cap C) $$
- $$ A\cap(B\cup C)=(A\cap B)\cup(A\cap C) $$，$$ A\cup(B\cap C)=(A\cup B)\cap(A\cup C) $$
- $$ A\cup(X\setminus A)=X $$，$$ A\cap(X\setminus A)=\emptyset $$
- **德·摩根律**：$$ X\setminus (A\cup B)=(X\setminus A)\cap(X\setminus B) $$，$$ X\setminus (A\cap B)=(X\setminus A)\cup(X\setminus B) $$

如果把$$ A $$，$$ B $$，$$ C $$当成布尔表达式的真假，$$ X $$表示真，$$ \emptyset $$表示假，那么这些命题同样成立，因为集合这些运算的结果本质就是所有$$ x\in S $$这个布尔表达式的值。

- **公理6（替代公理）**：对集合$$ A $$，对对象$$ x\in A $$和对象$$ y $$，设存在关于$$ x $$，$$ y $$的命题$$ P(x,y) $$，使得$$ \forall x\in A $$，恰有一个$$ y $$使得$$ P(x,y) $$为真。那么存在集合$$ \{y:x\in A且P(x,y)为真\} $$，$$ z\in \{y:x\in A且P(x,y)为真\} $$当且仅当$$ \exists x\in A $$，$$ P(x,z) $$为真。也可记做$$ \{f(x):x\in A\} $$。

替换公理得到的集合可以比原始集合“小”，可以据此推导出分类公理：若$$ \nexists y $$满足$$ y\in A $$且$$ P(y) $$为真，由空集定理得证；设已知$$ z\in A $$且$$ P(z) $$为真，对于$$ y\in A $$且$$ P(y) $$为真，令$$ f(y)=y $$，对于$$ y\in A $$且$$ P(y) $$为假，令$$ f(y)=z $$，那么$$ y\in \{f(x):x\in A\} $$当且仅当$$ y\in A $$且$$ P(y) $$为真。

- **公理7（无穷公理）**：存在集合$$ \NN $$，对象$$ 0\in \NN $$，且对每个$$ n\in \NN $$，$$ n++ $$是对象，且$$ n++\in \NN $$

这里是自然数集合的正式描述，并且引入了无穷大集合的一个例子。

## 罗素悖论

- **公理（万有分类）**：对任一个对象$$ x $$，存在关于$$ x $$的性质$$ P(x) $$，那么存在集合$$ \{x:P(x)为真\} $$，满足$$ y\in \{x:P(x)为真\} $$当且仅当$$ P(y) $$为真

这个公理直接建立了性质和集合的对应关系，并且可以直接通过构造$$ P(x) $$得到上一节的公理2~6。

万有集$$ \Omega $$定义为：对所有对象$$ x $$，有$$ x\in \Omega $$。万有分类公理和万有集的存在等价：根据万有分类公理，令$$ P(x) $$恒为真，则存在万有集；若存在万有集，令$$ A=\Omega $$使用分类公理可得到万有分类公理。

- **罗素悖论**：令$$ P(x):=x是一个集合，且x\notin x $$。根据万有分类公理，得到集合$$ \Omega $$，那么考虑$$ \Omega \in \Omega $$就会导出矛盾。

所以问题出在万有分类公理可以构造出一个包含自己的集合，而这种集合实际上是不存在的，为此我们引入之后的公理。

> 注意，人们常说的理发师悖论与罗素悖论并不是同一回事。理发师悖论说的是：一位理发师声称自己为所有不为自己理发的人理发，那么他是否为自己理发？用集合论的语言来描述理发师悖论是这样的（来自[wiki](https://zh.m.wikipedia.org/zh/%E7%90%86%E5%8F%91%E5%B8%88%E6%82%96%E8%AE%BA)）：小城里的人构成集合$$A=\{a \vert a \text{ lives in the town}\}$$，对于每个小城里的人$$a$$可以构造一个$$A$$的子集$$S_{a}=\{x\vert a \text{ shaves } x\}$$，即$$a$$给属于$$S_{a}$$的人理发。那么，如果$$a$$给自己理发，则$$a\in S_{a}$$，如果$$a$$不给自己理发，则$$a\notin S_{a}$$，如果$$a$$不给任何人理发，则$$S_{a}=\{\}$$。设理发师为$$s$$，则理发师的豪言就是：$$S_{s}=\{a\vert a\notin S_{a}\}$$。问题是：如果$$s\in S_{s}$$，这将与$$S_{s}$$的定义矛盾，但如果$$s\not \in S_{s}$$，根据$$S_{s}$$的定义，又应该有$$s\in S_{s}$$。理发师悖论中的“不给自己理发”即$$a\not \in S_{a}$$和罗素悖论里的$$X\notin X$$是不一样的，它们并不等价。

- **公理8（正则公理）**：如果$$ A\ne \emptyset $$，$$ \exists x\in A $$，满足$$ x $$不是集合或$$ x $$与$$ A $$不相交。

通过这个公理罗素悖论得到解决（巧妙！）：根据集合是对象公理和单元素集公理，如果$$ A $$是集合，那么$$ \{A\} $$也是集合；由正则性可知$$ A\cap \{A\}=\emptyset $$，因此$$ A\notin A $$。并且可以得到万有集不存在，万有分类公理矛盾。

进一步可证明$$ \forall A,B $$，有$$ A\notin B $$或$$ B\notin A $$：若$$ A\in B $$，根据双元素集公理，有$$ \{A,B\} $$是集合，而$$ A\in B\cap \{A,B\} $$，因此由正则性公理，有$$ A\cap \{A,B\}=\emptyset $$，因此$$ B\notin A $$。

## 函数与集合

### 函数

其实在替换公理处已经定义了函数。

- **函数的定义**：对集合$$ A $$和$$ B $$，对对象$$ x\in A $$和对象$$ y\in B $$，令关于$$ x $$，$$ y $$的命题$$ P(x,y) $$，满足$$ \forall x\in A $$，恰有一个$$ y\in B $$使得$$ P(x,y) $$为真，则定义$$ P $$在定义域$$ A $$和值域$$ B $$上确定的函数$$ f:A\to B $$，$$ f(x) $$是满足$$ P(x,f(x)) $$为真的唯一对象。

- **函数相等的定义**：具有相同定义域值域的函数$$ f:X\to Y $$和$$ g:X\to Y $$相等，当且仅当$$ \forall x\in X $$，有$$ f(x)=g(x) $$。

- **复合**：对函数$$ f:X\to Y $$和$$ g:Y\to Z $$，定义$$ f $$和$$ g $$的复合$$ g\circ f:X\to Z $$为函数，$$ (g\circ f)(x):=g(f(x)) $$

复合可以视作函数的最基本运算，注意需要满足替换公理。

复合满足结合律，不满足交换律。

- **单射**：$$ \forall x,x'\in X且x\ne x' $$有$$ f(x)\ne f(x') $$
- **满射**：$$ \forall y\in Y $$有$$ \exists x\in X且f(x)=Y $$
- **双射**：既是单射，又是满射的函数
- **逆**：对于**双射函数**$$ f $$，$$ \forall y\in Y $$，存在唯一一个$$ x $$满足$$ f(x)=y $$，令$$ f^{-1}(y)=x $$，$$ f^{-1} $$是$$ Y $$到$$ X $$的函数。

### 象和逆象

- **象的定义**：函数$$ f:X\to Y $$，$$ S\subseteq X $$，令$$ f(S):=\{f(x):x\in S\} $$，称为$$ S $$在$$ f $$下的象（或前象）。

$$ f(S) $$是集合可直接由替代公理得到，也可令$$ A=Y $$用分类公理得到。

- **逆象的定义**：$$ U\subseteq Y $$，令$$ f^{-1}(U):=\{x\in X:f(x)\in U\} $$，称为$$ U $$在$$ f $$下的逆象。

如果$$ f $$可逆，$$ f^{-1}(U) $$既可以表示$$ U $$在$$ f $$下的逆象，也可表示$$ U $$在$$ f^{-1} $$下的前象，但二者相同，不会引起歧义。

有一些结论：

- $$\forall S\subseteq Y$$，$$ f(f^{-1}(S))\subseteq S $$。$$ \forall S\subseteq Y $$都有$$ f(f^{-1}(S))=S $$的充要条件是$$ f $$是满射。证明必要条件可令$$ S=Y $$
- $$\forall S\subseteq X$$，$$ S\subseteq f^{-1}(f(S)) $$。$$ \forall S\subseteq X $$都有$$ f^{-1}(f(S))=S $$的充要条件是$$ f $$是单射。证明必要条件可对每个$$ x\in X $$令$$ S=\{x\} $$

### 集合公理系统

- **公理9（幂集公理）**：对集合$$ X $$和$$ Y $$，存在集合记做$$ Y^{X} $$，$$ f\in Y^{X} \iff f$$是定义域为$$X$$值域为$$Y$$的函数

- **引理**：对集合$$ X $$，存在集合$$ S $$，$$ Y\in S \iff Y$$是$$X$$的子集

证明思路是构造$$ 2^{\vert X\vert } $$个函数将$$ X $$映射到$$ X $$的所有子集。令$$Y=\{0,1\}$$，利用幂集公理，有$$ \{0,1\}^{X} $$集合。定义$$P(f,y)$$为$$y\subseteq X$$且$$y=f^{-1}(\{1\})$$，则利用替代公理有$$\{y:f\in A=\{0,1\}^{X}$$且$$P(f,y)$$为真$$\}$$

需要习惯利用公理来证明一些东西可构成集合。对于具体的集合，如写出$$ \{1,2,3\} $$的所有子集构成的集合可以直接用之前的公理，但用这个引理就可得到任何未知元素的集合（抽象的集合）的子集。

- **公理10（并集公理）**：设$$ A $$是集合，$$ A $$的所有元素也是集合，那么存在集合$$ \cup A $$，$$ x\in \cup A \iff \exists S\in A$$且$$x\in S $$

利用双元素集公理，对于集合$$ S_1 $$和$$ S_2 $$，存在集合$$ \{S_1,S_2\} $$。又根据并集公理有$$ \cup \{S_1,S_2\} $$，用这个集合定义并集从而代替双并公理。

- 定义$$ \bigcup_{\alpha\in I}A_\alpha:=\cup\{A_\alpha:\alpha\in I\} $$，通过替代公理和并集公理得到它是一个集合（重要结果）。把$$ I $$称为指标集，$$ \alpha $$称为标签，$$ A $$称为集族，其通过$$ \alpha $$索引。
- 定义$$ \bigcap_{\alpha\in I}A_\alpha $$，要求$$ I\ne \emptyset $$，则根据单个选取引理存在$$ \beta\in I $$，$$ \bigcap_{\alpha\in I}A_\alpha:=\{x\in A_\beta:\forall \alpha\in I有x\in A_\alpha\} $$，通过分类公理证明其为集合，并且这个集合与$$ \beta $$无关。

---

- 习题：$$ X $$和$$ Y $$是集合，证明所有定义域$$ X' $$，值域$$ Y' $$满足$$ X'\subseteq X $$和$$ Y'\subseteq Y $$的函数$$ f $$构成集合

证明：利用引理得到$$ X $$的子集构成的集合$$ A $$，$$ Y $$的子集构成的集合$$ B $$，使用上述并集公理的重要结果，应可直接简写成$$ \bigcup_{X'\in A}\bigcup_{Y'\in B}Y'^{X'} $$

---

公理1~10构成了集合论公理，其中公理10（并集公理）蕴含公理4（双并公理），公理6（替代公理）蕴含公理5（分类公理）。

ZF集合论公理与公理1~10大致相同，只缺少了公理3（单元素集和双元素集公理）和公理1（集合是对象）。内容如下：

- **外延公理**：集合相等的定义
- **空集公理**：同公理2
- **替代公理**：同公理6
- **无穷公理**：存在集合$$ A $$满足$$ \emptyset\in A $$和若$$ S\in A $$，则$$ S\cup\{S\}\in A $$。本质上也是在描述自然数集的存在性，即公理7
- **正则公理**：同公理8
- **幂集公理**：表述为公理9的引理，在下一节会证明两者等价。
- **并集公理**：同公理10

## 笛卡尔积

- **有序对的定义**：若$$ x $$和$$ y $$是对象，定义有序对$$ (x,y) $$为新对象，有序对$$ (x,y)=(x',y') $$当且仅当$$ x=x' $$且$$ y=y' $$。

如果只用集合论公理来定义有序对：首先有两个显然的定理：若$$ \{a,b\}=\{c,d\} $$，要么$$ a=c $$且$$ b=d $$，要么$$ a=d $$且$$ b=c $$；若$$ \{a,b\}=\{c,d\} $$且$$ a=c $$，那么$$ b=d $$。

具体来说，我们可定义$$ (x,y):=\{\{x\},\{x,y\}\} $$，根据单元素集和双元素集公理，可知有序对为集合，而集合为对象；再根据上述定理可以证明有序对相等的定义。

另外，也可以定义$$ (x,y):=\{x,\{x,y\}\} $$，那么若$$ (x,y)=(x',y') $$，要么$$ x=x' $$且$$ y=y' $$，要么$$ x=\{x',y'\} $$且$$ x'=\{x,y\} $$，对于第二种情形有$$ x\in x' $$和$$ x'\in x $$，根据正则公理的引理可得矛盾。

- **笛卡尔积的定义**：若$$ X $$和$$ Y $$是集合，那么定义笛卡尔积$$ X\times Y:=\{(x,y):x\in X,y\in Y\} $$。

此处证明笛卡尔积的结果为集合可以用并集公理，即$$ X\times Y:=\bigcup_{x\in X}\bigcup_{y\in Y}\{(x,y)\} $$

- **有序n元组和n重笛卡尔积**：有序n元组$$ (x_i)_{1\le i\le n} $$，$$ x_i $$称为该有序n元组的第i个分量。$$ (x_i)_{1\le i\le n}=(y_i)_{1\le i\le n} $$当且仅当$$ \forall 1\le i\le n $$有$$ x_i=y_i $$。若$$ (X_i)_{1\le i\le n} $$是集合的有序$$ n $$元组（即每个$$X_{i}$$都是一个集合），令它们的笛卡尔积$$ \prod_{1\le i\le n}X_i:=\{(x_i)_{1\le i\le n}:\forall 1\le i\le n有x_i\in X_i\} $$

> 有序n元组$$ (x_i)_{1\le i\le n} $$可递归定义为$$ ((x_i)_{1\le i\le n-1},x_n) $$吗？
  {: .lambda_question}

---

- 习题3.5.2：有序n元组可利用函数来定义：对任意集合$$ X $$，满射函数$$ x:\{i\in \NN:1\le i\le n\}\to X $$，令$$ x_i=x(i) $$并用函数相等的定义证明n元组相等的定义。利用这个定义可证明多重笛卡尔积的结果是集合：令$$ X=\bigcup X_i $$，利用幂集公理可知存在集合$$ A=X^{\{i\in \NN:1\le i\le n\}} $$，利用分类公理有$$ \{f\in A:\forall 1\le i\le n有f(i)\in X_i\} $$。

---

- 习题3.5.11：现在可以利用幂集公理的引理证明幂集公理：

首先有如下规定：

- 不严格区分$$ X_1\times X_2\times X_3 $$使用结合律得到的结果，例如$$ f:X_1\times X_2\times X_3\to Y $$可以看作关于三个变量$$ x_1 $$，$$ x_2 $$，$$ x_3 $$，也可以看作关于$$ (x_1,x_2) $$和$$ x_3 $$两个变量，两者并无实质区别。
- 使用$$ X^{n}:=\prod_{1\le i\le n}X $$。
- 规定$$ n=0 $$时得到单元素集0元组$$ \{()\} $$

证明思路是将函数对应到函数上的点对应的集合。利用引理，存在$$ S $$表示$$ X\times Y $$（定义不需要用到幂集公理）所有子集构成的集合，利用分类公理存在集合$$ S'=\{A\in S:\forall x\in X恰有一个y\in Y满足(x,y)\in A\} $$，此时$$ S' $$中的集合均可对应到函数，令$$ f_{A}:X\to Y $$，$$ \forall x\in X $$，有$$ (x,y)\in A $$，$$ f_{A}(x)=y $$。利用替代公理得到幂集公理：存在集合$$ \{f_{A}:A\in S'\} $$

---

- 习题3.5.7：直和的定义：令$$ \pi_{X\times Y}:X\times Y\to X $$和$$ \pi_{X\times Y}:X\times Y\to Y $$为$$ X\times Y $$上的坐标函数，满足$$ \pi_{X\times Y}:X\times Y\to X(x,y):=x $$和$$ \pi_{X\times Y}:X\times Y\to Y(x,y):=y $$。对任意函数$$ f:Z\to X $$和$$ g:Z\to Y $$，存在唯一函数$$ h:Z\to X\times Y $$，使得$$ \pi_{X\times Y\to X}\circ h=f $$和$$ \pi_{X\times Y\to Y}\circ h=g $$。$$ h $$称为$$ f $$和$$ g $$的直和，记做$$ h=f\oplus g $$。显然有$$ h(z)=(f(z),g(z)) $$

  > 问：上述函数$$h$$的唯一性怎么证明？
    {: .lambda_question}

---

- **有限选取引理**：设$$ n\ge 1 $$且$$ n $$为自然数，$$ X_i $$是非空集合，存在n元组$$ (x_i)_{1\le i\le n} $$满足对所有$$ 1\le i\le n $$有$$ x_i\in X_i $$。

即$$ \prod_{1\le i\le n}X_i $$是非空的，使用归纳法（对$$n$$归纳）和单个选取引理即可证明。进而可以证明$$ \prod_{1\le i\le n}X_i $$非空当且仅当$$ \forall X_i\ne \emptyset $$。

---

- 习题3.5.13：**命题**：自然数系唯一。如果存在另一个满足皮亚诺公理的自然数系$$ \NN' $$，存在双射$$ a:\NN\to \NN' $$满足$$ a(0)=0' $$且$$ \forall n\in \NN,n'\in \NN' $$，$$ a(n)=n' $$当且仅当$$ a(n++)=n'++ $$。

首先证明引理：对任意$$ f:\NN\times \NN\to \NN $$和自然数$$ c $$，存在函数$$ a:\NN\to \NN $$满足$$ a(0)=c $$且$$ \forall n\in \NN $$有$$ a(n++)=f(n,a(n)) $$。

使用类似有限选取引理的证明过程归纳：设已经存在唯一函数$$ a_N:\{n\in \NN:n\le N\}\to \NN $$，如果只使用皮亚诺公理和集合论可以归纳得到集合$$ \{n\in \NN:n\le N\} $$。

那么只需要令$$ f(n,a(n))=a(n)++ $$，$$ c=0' $$，则有$$ a(n++)=a(n)++ $$。若$$ a(n)=n' $$，则$$ a(n++)=n'++ $$；若$$ a(n++)=n'++ $$，$$ a(n)++=n'++ $$，由于$$ \NN' $$也满足皮亚诺公理，根据公理4可知$$ a(n)=n' $$。

## 集合的基数

- **基数相等的定义**：两个集合$$ X $$和$$ Y $$的基数（也称为集合的势）相等，当且仅当存在一个从$$ X $$到$$ Y $$的双射。

自反性可以由双射存在逆得到，传递性可以由双射的复合仍是双射得到。

通过$$ f(x)=2x $$可以得到自然数集和偶数集的基数相等。

- **基数的定义**：称集合$$ X $$的基数为自然数$$ n $$，当且仅当$$ X $$与集合$$ \{i\in \NN:1\le i\le n\} $$基数相等。

- **引理**：若$$ X $$的基数为$$ n\ge 1 $$，则$$ X\ne \emptyset $$，且存在$$ x\in X $$，$$ X\setminus \{x\} $$的基数为$$ n-1 $$。(暂且定义$$ n-1 $$为满足$$ m++=n $$的唯一自然数)

可直接构造证明：设$$ f:X\to \{i\in \NN:1\le i\le n\} $$，令$$ f(x')\lt f(x) $$时$$ g(x')=f(x') $$，$$ f(x')\gt f(x) $$时$$ g(x')=f(x')-1 $$即可，再证明是双射即可。

再证明基数的唯一性：对$$ n $$归纳使用引理即可。

- **集合有限的定义**：集合有限定义为基数是自然数，将有限集$$ X $$的基数记做$$ \#(X) $$。

证明自然数集不是有限集：反证，设$$ f:\{i\in \NN:1\le i\le N\}\to \NN $$，归纳得到存在$$ f(i)\le M $$对任意$$ i $$成立。

- **基数算数定理1**：$$ X $$和$$ Y $$是有限集，$$ \#(X\cup Y)\le \#(X)+\#(Y) $$，取等当且仅当$$ X\cap Y=\emptyset $$。
- **基数算数定理2**：$$ X $$是有限集且$$ Y\subseteq X $$，则$$ Y $$是有限集且$$ \#(Y)\le \#(X) $$，取等当且仅当$$ Y=X $$
- **基数算数定理3**：$$ X $$是有限集且$$ f:X\to Y $$是函数，则$$ f(X) $$是有限集且$$ \#(f(X))\le \#(X) $$，取等当且仅当$$ f $$是单射。
- **基数算数定理4**：$$ X $$和$$ Y $$是有限集，则$$ X\times Y $$是有限集且$$ \#(X\times Y)=\#(X)\times \#(Y) $$。
- **基数算数定理5**：$$ X $$和$$ Y $$是有限集，则$$ Y^X $$是有限集且$$ \#(Y^X)=\#(Y)^{\#(X)} $$。

都对其中一个集合的集合基数归纳即可，证明有限集也需归纳。定理1可再归纳扩展到$$ \#(\bigcup_{\alpha\in I}A_\alpha) $$的不等式，定理4的证明需要用到笛卡尔积的性质$$ A\times (B\cup C)=(A\times B)\cup (A\times C) $$，定理5的证明先构造双射证明$$ \#(Y^X)=\#(Y^\#(X)) $$再利用定理4即可。

利用定理1证明二元容斥原理：$$ \#(A\cup B)=\#(A)+\#(B\setminus A) $$，$$ \#(B)=\#(B\setminus A)+\#(A\cap B) $$。

由于基数算数定理的证明并没有用到自然数的算数定理，可以利用基数来证明自然数的算术定理：将$$ n $$写成集合$$ \{x\in \NN:1\le x\le n\} $$的基数，构造双射可知$$ \#(A\times B)=\#(B\times A) $$，那么$$ a\times b=\#(A)\times \#(B)=\#(A\times B)=\#(B\times A)=\#(B)\times \#(A)=b\times a $$，就证明了乘法交换律。

我有个想法就是直接通过集合论构建自然数理论，本质是利用基数算数定理来定义运算。利用无穷公理定义自然数，然后所有基数相等的集合表示同一自然数，把自然数的运算看作所有可表示该自然数的集合的运算。集合加法的定义先构造函数$$ f_1 $$把$$ A $$中对象$$ x $$全变为$$ (1,x) $$，$$ f_2 $$把$$ B $$中的变为$$ (2,y) $$，然后$$ A+B:=f_1(A)\cup f_2(B) $$，自然数加法即$$ a+b $$定义为表示$$ a $$和表示$$ b $$的集合做集合加法得到集合所表示的自然数，那么自然数加法的定理可直接利用集合加法的性质证明，自然数乘法即两集合的笛卡尔积所表示的自然数，自然数的序就可使用集合的包含关系来定义。

# 第4章 整数和有理数

## 整数

我们使用减法定义整数，但为了避免循环定义，我们暂时不关心减法的结果。

- **整数的定义**：整数是形如$$ a-b $$的表达式，其中$$ a $$和$$ b $$是自然数，整数$$ a-b=c-d $$当且仅当$$ a+d=b+c $$。

传递公理易证($$ a-b=c-d $$和$$ c-d=e-f $$，$$ a+d+c+f=b+c+d+e $$，$$ a+f=b+e $$)，之后定义整数运算时要注意相等定义的替换公理。

- **整数的和和积的定义**：$$ (a-b)+(c-d):=(a+c)-(b+d) $$，$$ (a-b)\times (c-d):=(ac+bd)-(ad+bc) $$

这是根据我们已有的知识进行的定义。如果我们整数的定义使用正、负、零来定义，那么这里的运算定义将会涉及大量分类讨论，因此采用减法定义整数。

- **整数的三歧性**：设$$ x $$是整数，$$ x=0-0 $$、$$ x=n-0 $$、$$ x=0-n $$中恰有一个成立（$$ n $$是正自然数）。

证明可设$$ x=a-b $$，根据序的三歧性讨论可得至少有一个成立（由于$$ a $$和$$ b $$不唯一，不能得到恰有一个成立）；设其中两个成立可得$$ n=0 $$。

于是我们可以定义$$ x=n-0 $$时$$ x $$是正整数，$$ x=0-n $$时$$ x $$是负整数。

此处对整数的定义已经完备了，为了方便使用再做以下规定：对整数$$ a-b $$，定义整数的负运算为$$ -(a-b)=b-a $$。将$$ n-0 $$记做$$ n $$，那么$$ 0-n=-(n-0)=-n $$。此时$$ + $$就有了多重含义，既可表示自然数的加法，也可表示整数的加法，而自然数系和整数系的非负部分“同构”，$$ n-0 $$和$$ n $$可一一对应，运算性质相同（$$ n $$的加法乘法等运算定理$$ n-0 $$也满足），因此不会引起混乱，$$ 3+3 $$看作自然数运算和整数运算均可，得到的都是$$ 6 $$($$ 6-0 $$也可记做$$ 6 $$)；$$ 3+(-3) $$只能看作整数之间的运算。

$$ a-b=(a-0)+(0-b)=a+(-b) $$，可知我们定义的$$ a-b $$结果就是熟知的减法定义。我们定义整数的减法$$ a-b:=a+(-b) $$后就可以放心的使用$$ - $$这一符号了。

可以证明整数加法乘法的运算定理、整数没有零因子、整数的消去律，定义出整数的序并证明其性质。

## 有理数

使用除法定义有理数。

- **有理数的定义**：有理数是形如$$ a/b $$的表达式，其中$$ a $$和$$ b $$是整数且$$ b\ne 0 $$，$$ a/b=c/d $$当且仅当$$ ad=bd $$。

- **有理数的和/积**：$$ (a/b)+(c/d)=(ad+bc)/(bd) $$，$$ (a/b)\times (c/d)=(ac)/(bd) $$，$$ -(a/b)=(-a)/b $$


进而可以定义有理数减法：$$ x-y:=x+(-y) $$。

- **有理数的三歧性**：称有理数$$ x $$是正的当且仅当存在两个正整数$$ a $$和$$ b $$，满足$$ x=a/b $$；$$ x $$是负的当且仅当存在正有理数$$ y=-x $$，有理数$$ x $$满足$$ x=0 $$，$$ x $$是正的、$$ x $$是负的恰有一个成立。

类似上一节，我们可以将$$ x/1 $$记做$$ x $$，对$$ x=a/b $$定义$$ x^{-1}=b/a $$，有$$ x/y=(x/1)\times (1/y)=x\times y^{-1} $$，再定义除法为$$ x/y:=x\times y^{-1} $$。

可以证明有理数加法乘法的运算定理，定义出有理数的序并证明其性质。

- **指数运算**：设$$ x $$是有理数，$$ x^{0}:=1 $$，$$ 0^{0}:=1 $$，归纳性假设对自然数$$ n $$，$$ x^{n} $$已经定义了，定义$$ x^{n+1}=x^{n}\times x $$。设$$ x $$是不为$$ 0 $$的有理数，对任意负整数$$ -n $$，定义$$ x^{-n}:=1/x^{n} $$

证明$$ x^{n}x^{m}=x^{n+m} $$，可以先用归纳法证明$$ n\ge 0 $$且$$ m\ge 0 $$的情况，再将$$ n+m\lt 0 $$的情况转为$$ n+m\gt 0 $$的情况，最后处理$$ n\ge 0 $$且$$ m\lt 0 $$的情况，两边同乘$$ x^{-m} $$即可。

证明$$ (x^{n})^{m}=x^{nm} $$和$$ (xy)^{n}=x^{n}y^{n} $$，先归纳证明$$ n\ge 0 $$且$$ m\ge 0 $$的情况再讨论。

还有性质：$$ x\ge y\gt 0 $$时，若$$ n $$为正数，$$ x^{n}\ge y^{n}\gt 0 $$，若$$ n $$为负数，$$ 0\lt x^{n}\le y^{n} $$。如果$$ x\gt 0 $$，$$ y\gt 0 $$，$$ n\ne 0 $$，$$ x^{n}=y^{n} $$，则$$ x=y $$。

## 有理数的间隙

回顾高中知识：定义$$ x $$的绝对值$$ \vert x\vert $$，有三角不等式，$$ -y\le x\le y $$当且仅当$$ y\ge \vert x\vert $$，$$ \vert xy\vert =\vert x\vert \vert y\vert $$；距离$$ d(x,y):=\vert x-y\vert $$，距离的三角不等式。

- **$$ \varepsilon $$-接近的定义**：有理数$$ x $$和$$ y $$是$$ \varepsilon $$-接近当且仅当$$ d(x,y)\lt =\varepsilon $$。

有结论（其他结论比较显然，此后直接使用）：若$$ x $$和$$ y $$是$$ \varepsilon $$-接近的，$$ z $$和$$ w $$是$$ \delta $$-接近的，则$$ xz $$和$$ yw $$是$$ \varepsilon \vert z\vert +\delta \vert x\vert +\varepsilon \delta $$接近的。

- **定理**：设有理数$$ x $$，存在唯一整数$$ n $$满足$$ n\le x\lt n+1 $$，且存在自然数$$ N $$满足$$ N\gt x $$。

若$$ x\ge 0 $$，$$ x=p/q $$($$ p\gt 0 $$且$$ q\gt 0 $$)，根据自然数乘法一节中定义的带余除法，有唯一的自然数$$ n $$和$$ r $$满足$$ p=nq+r $$，则$$ p/q-n=r/q\ge 0 $$，$$ p/q-(n+1)=-(q-r)/q\lt 0 $$，令$$ N=n+1 $$可得$$ N\gt x $$。若$$ x\lt 0 $$，$$ x=-p/q $$($$ p\gt 0 $$且$$ q\gt 0 $$)，有唯一的自然数$$ n $$和$$ r\lt q $$满足$$ p=nq-r $$，则$$ -(p/q)-(-n)=r/q\ge 0 $$，$$ -(p/q)-(-n+1)=(r-q)/q\lt 0 $$，令$$ N=0 $$即可。

- **定理**：若有理数$$ x $$和$$ y $$满足$$ x\lt y $$，存在有理数$$ z $$满足$$ x\lt z\lt y $$。

设$$ z:=(x+y)/2 $$即可，大概证明了不存在两有理数“相邻”。

- 不存在有理数$$ x $$满足$$ x^{2}=2 $$。

先证明无穷递降原理（不存在无穷递降的自然数数列）：$$ a_n\gt a_{n+1} $$，$$ a_n\ge a_{n+1}+1 $$，可归纳得出$$ a_n\ge a_{n+k}+k $$，由于$$ a_{n+k}\ge 0 $$，$$ \forall k $$，有$$ a_{1}\ge a_{k+1}+k=k $$，而$$ a_1\lt a_1++ $$，矛盾。

证明（巧妙！）：若存在自然数$$ k $$满足自然数$$ p=2k $$，则$$ p $$是偶数；若存在自然数$$ k $$满足$$ p=2k+1 $$，则$$ p $$是奇数；根据带余除法可知恰有一个成立。

设正有理数$$ x=p/q $$，$$ p^{2}=2q^{2} $$。若$$ p $$是奇数，则$$ p^{2} $$也是奇数，矛盾；$$ p=2k $$，则$$ q^{2}=2k^{2} $$，问题从$$ (p,q) $$转化为$$ (q,k) $$，根据指数运算的性质有$$ p\gt q $$，利用无穷递降原理得证。（网上还有几何法：正方形内放两个正方形，重叠正方形区域面积是未覆盖的两个面积相等的正方形的面积之和，$$ (p,q) $$转化为$$ (q,k) $$）。

- 对任意有理数$$ \varepsilon\gt 0 $$，存在有理数$$ x $$使得$$ x^{2}\lt 2\lt (x+\varepsilon)^{2} $$。

反证+归纳，得到$$ (n\varepsilon)^{2}\lt 2 $$对任意自然数$$ n $$成立，令$$ n $$为大于$$ 2/\varepsilon $$的任一个自然数即可。

# 第5章 实数

## 柯西序列

- **序列的定义**：设$$ m $$是整数，序列$$ (a_n)_{n=m}^{\infty} $$是从集合$$ \{n\in Z:n\ge m\} $$到$$ \QQ $$的函数，对每个大于等于$$ m $$的整数$$ n $$指定有理数$$ a_n $$。

- **$$ \varepsilon $$-稳定的定义**：序列中每一对$$ a_j $$和$$ a_k $$都是$$ \varepsilon $$-接近的。
- **最终$$ \varepsilon $$-稳定的定义**：存在某个自然数$$ N\ge 0 $$使得$$ (a_n)_{n=N}^{\infty} $$是$$ \varepsilon $$-稳定的。
- **柯西序列**：对任意有理数$$ \varepsilon\gt 0 $$，序列$$ (a_n)_{n=m}^{\infty} $$都是最终$$ \varepsilon $$-稳定的。

例如，对序列$$ a_n=1/n $$，任取$$ \varepsilon $$，根据有理数间隙的定理，令$$ N $$为大于$$ 1/\varepsilon $$的自然数即可。

- **有界序列的定义**：有限序列$$ a_1,a_2,...,a_n $$以$$ M $$为界当且仅当$$ \vert a_i\vert \le M $$对任意$$ 1\le i\le n $$成立，无限序列$$ (a_n)_{n=m}^{\infty} $$以$$ M $$为界当且仅当$$ \vert a_i\vert \le M $$对任意$$ i\ge m $$成立。一个序列是有界的，当且仅当存在有理数$$ M\ge 0 $$，该序列以$$ M $$为界。

有如下引理：

- **有限序列有界**：归纳证明，每次$$ M $$增加$$ \vert a_n\vert $$即可。
- **柯西序列有界**：任取$$ \varepsilon\gt 0 $$，可知该序列是最终$$ \varepsilon $$-稳定的，即存在某个自然数$$ N\ge 0 $$使得$$ (a_n)_{n=N}^{\infty} $$是$$ \varepsilon $$-稳定的，那么由于有限序列有界，设$$ a_1,a_2,...,a_N $$以$$ M $$为界，则任取$$ i\ge N $$，有$$ \vert a_i\vert -\vert a_N\vert \le \vert a_i-a_N\vert \le \varepsilon $$，$$ \vert a_i\vert \le M+\varepsilon $$，该序列以$$ M+\varepsilon $$为界。

- **$$ \varepsilon $$-接近的定义**：$$ (a_n)_{n=0}^{\infty} $$和$$ (b_n)_{n=0}^{\infty} $$满足对$$ n=0,1,2,... $$均有$$ \vert a_n-b_n\vert \le \varepsilon $$
- **最终$$ \varepsilon $$-接近的定义**：存在$$ N\ge 0 $$使得$$ (a_n)_{n=N}^{\infty} $$和$$ (b_n)_{n=N}^{\infty} $$是$$ \varepsilon $$-接近的
- **等价序列**：对任意有理数$$ \varepsilon\gt 0 $$，两序列都是最终$$ \varepsilon $$-接近的。

例如，序列$$ a_n=1+10^{-n} $$和$$ b_n=1+10^{n} $$，$$ \varepsilon\gt 0 $$，要找到$$ N $$满足$$ 2\times 10^{-N}\le \varepsilon $$，注意到$$ 10^{N}\gt N $$（归纳证明），因此$$ 10^{-N}\lt 1/N $$，只需找到$$ 2\times 10^{-N}\le 2/N\le \varepsilon $$即可，即$$ N\ge 2/\varepsilon $$。

有如下引理：

- 若两序列$$ a $$和$$ b $$等价，则$$ a $$是柯西序列当且仅当$$ b $$是柯西序列
- 若两序列$$ a $$和$$ b $$是最终$$ \varepsilon $$-接近的，那么$$ a $$有界当且仅当$$ b $$有界

## 实数的构造

有理数的间隙一节的最后一个命题中，可以看出用有理数逼近无理数是可能的，那么我们用有理数的柯西序列来定义实数。

- **实数的定义**：实数被定义为形如$$ \text{LIM}_{n\to \infty}a_{n} $$的对象，其中$$ (a_n)_{n=1}^{\infty} $$是有理数的柯西序列，两实数相等当且仅当两柯西序列是等价序列。

实数相等满足传递公理，可以任取$$ \varepsilon $$，然后利用两序列都是最终$$ \varepsilon/2 $$-稳定的序列证明。

- **实数的和/积的定义**：设实数$$ x=\text{LIM}_{n\to \infty}a_{n} $$，$$ y=\text{LIM}_{n\to \infty}b_{n} $$，定义$$ x+y=\text{LIM}_{n\to \infty}(a_n+b_n) $$，$$ xy:=\text{LIM}_{n\to \infty}(a_nb_n) $$

实数的和是实数，可利用两序列都是最终$$ \varepsilon/2 $$-稳定的序列；实数的积是实数，也是利用$$ \varepsilon $$-接近的结论，结合柯西序列有界性，使$$ a_i $$和$$ a_j $$是$$ \delta’ $$-接近的，$$ b_i $$和$$ b_j $$是$$ \varepsilon’ $$-接近的，$$ a_ib_i $$与$$ a_jb_j $$是$$ \delta'M_b+\varepsilon'M_a+\delta\varepsilon $$-接近的，令$$ \delta'=\varepsilon/(2M_b) $$，$$ \varepsilon'=\varepsilon/2(M_a+\delta') $$。

像之前一样，定义$$ -\text{LIM}_{n\to \infty}a_n=\text{LIM}_{n\to \infty}-a_n $$，实数减法$$ x-y:=x+(-y) $$。

如果$$ a $$是有理数，存在实数$$ \text{LIM}_{n\to \infty}a $$，可记做$$ a $$。类似将自然数系嵌入整数系的定义方式，因为有理数满足的运算法则实数均满足，因此$$ 1+1=2 $$这时也可以表示实数的加法而不会引起混乱。

如果想要定义除法还需定义$$ x^{-1} $$，注意到柯西序列$$ 1,0.1,0.01,... $$的逆并不是柯西序列，原因是原来的柯西序列对应的实数是$$ 0 $$。

- **远离0的序列**：有理数序列远离0当且仅当存在有理数$$ c\gt 0 $$满足$$ \vert a_n\vert \ge c $$对任何$$ n\ge 1 $$成立。

- **引理**：设实数$$ x\ne 0 $$，存在远离0的柯西序列$$ (a_n)_{n=1}^{\infty} $$，满足$$ x=\text{LIM}_{n\to \infty}a_n $$

设$$ x $$的柯西序列是$$ b $$，存在$$ \varepsilon $$使得$$ x $$和$$ 0 $$不是最终$$ \varepsilon $$-接近的，再利用它是最终$$ \varepsilon/2 $$稳定的（存在$$ N $$），可得它是“最终远离0的”。那么令$$ i\ge N $$时$$ a_i=b_i $$，$$ i\lt N $$时$$ a_i=\varepsilon/2 $$，可令$$ c=\varepsilon /2 $$。

- **引理**：$$ (a_n)_{n=1}^{\infty} $$是远离0的，则$$ (a_n^{-1})_{n=1}^{\infty} $$是柯西序列

利用$$ \vert a_i\vert \ge c $$，$$ \vert a_n^{-1}-a_m^{-1}\vert =\vert \frac{a_m-a_n}{a_ma_n}\vert \le \frac{\vert a_m-a_n\vert }{c^2} $$。此时可定义实数的倒数。

倒数的定义：$$ (a_n)_{n=1}^{\infty} $$是远离0的，实数$$ x=\text{LIM}_{n\to \infty}a_{n} $$，则$$ x^{-1}:=\text{LIM}_{n\to \infty}a_{n}^{-1} $$。

倒数运算是明确的（倒数运算满足替换公理）（巧妙！）：利用$$ x^{-1}\times x\times y^{-1}=x^{-1}\times y\times y^{-1} $$（$$ x=y $$两边同乘$$ x^{-1}*y^{-1} $$）。

进而对于$$ y\ne 0 $$，$$ x/y:=x*y^{-1} $$

## 实数的序

- **实数正负的定义**：$$ x $$是正的当且仅当存在远离0的柯西序列$$ a $$，$$ x=\text{LIM}_{n\to \infty}a_n $$，满足存在正有理数$$ c $$，$$ a_n\ge c $$对任意$$ n\ge 1 $$都成立；$$ x $$是负的同理，要求$$ a_n\le -c $$都成立。

- **引理（实数的三歧性）**：对任意实数$$ x $$，$$ x=0 $$，$$ x $$是正的,$$ x $$是负的恰有一个为真；$$ x $$是负的当且仅当$$ -x $$是正的。

- **实数大小的定义**：对实数$$ x $$，$$ y $$，若$$ x-y $$是正实数，则$$ x\gt y $$；若$$ x-y $$是负实数，则$$ x\lt y $$。

若$$ x $$是正的，$$ x^{-1} $$也是正的。 用三歧性证。

- **命题1**：若所有$$ a_i\ge 0 $$，$$ \text{LIM}_{n\to \infty}a_n $$非负。

该命题简单有用，可将实数的大小关系转化为有理数的大小关系。进而可以推出若$$ a_n\ge b_n $$，$$ \text{LIM}_{n\to \infty}a_n\ge \text{LIM}_{n\to \infty}b_n $$。

- **命题2**：$$ x $$是实数，存在有理数$$ q $$和$$ r $$满足$$ q\le x\le r $$，存在正整数$$ N $$满足$$ x\le N $$。

利用柯西数列有界性，把$$ q $$和$$ r $$写成实数结合命题1。

- **命题3**：对任意两个实数$$ x\lt y $$，存在有理数$$ q $$满足$$ x\lt q\lt y $$。

首先反证+归纳可知引理：对任意实数$$ x $$，存在唯一$$ N $$，满足$$ N\le x\le N+1 $$，或$$ x-1\le N\le x $$。

由命题2知存在整数$$ N\gt 1/(y-x) $$（使得$$ Ny-Nx\gt 1 $$），即$$ 1/N\lt y-x $$，令$$ q=a/N $$，则$$ Nx\lt a\lt Nx+1\lt Ny $$，由引理知存在整数a。

如果要证明必然存在无理数$$ z $$满足$$ x\lt z\lt y $$，可以两次使用命题3，找到两个有理数$$ q_1 $$和$$ q_2 $$满足$$ x\lt q_1\lt q_2\lt y $$，$$ q1+(q2-q1)/\sqrt{2} $$是无理数可通过有理数的运算结果是有理数反证得到。

- 习题：实数$$ x $$，若$$ a_n\le x $$，则$$ \text{LIM}_{n\to \infty}a_n\le x $$。

证明：如果$$ x $$是有理数可直接用命题2，思路就是利用命题3找中间有理数。反证，设$$ \text{LIM}_{n\to \infty}a_n=y $$，$$ y\gt x $$，由命题3可知存在$$ q $$满足$$ y\gt q\gt x\ge a_n $$，进而$$ q\gt a_n $$，由命题1知$$ y\le q $$。

## 最小上界性质

- **上界的定义**：设$$ E $$是$$ \RR $$的一个子集，实数$$ M $$是$$ E $$的上界当且仅当$$ \forall x\in E $$都有$$ x\le M $$。

注意并不能说$$ E $$中最大元素是上界，$$ E $$是无限集，且很可能不存在最大值如$$ {x\in \RR:1\lt x\lt 2} $$

- **最小上界的定义**：$$ M $$是最小上界当且仅当$$ M $$是上界且对所有上界$$ M' $$满足$$ M'\ge M $$。

- **定理（最小上界存在性）**：如果$$ E $$是$$ \RR $$的非空子集且$$ E $$存在上界，则恰有一个最小上界。

唯一性显然。证明存在性（巧妙！体现了$$ \text{LIM} $$的实际意义）：思路是构造最小上界的有理数序列。

对每个$$ n $$，找$$ m_n $$满足$$ m_n/n $$是$$ E $$的上界但$$ (m_n-1)/n $$不是。设该有界序列上界为$$ M $$，根据命题2可知存在整数$$ R $$满足$$ R\times 1/n\ge M $$，利用单个选取引理任取$$ x_0\in E $$，再利用命题2知存在整数$$ L $$满足$$ L/n\lt x_0 $$，反证+归纳可知存在$$ L\lt m_n\le R $$满足条件。

要证明$$ (m_n/n)_{n=1}^{\infty} $$是柯西序列，设$$ n $$和$$ n' $$，设最小上界为$$ S $$，由于$$ m_n/n\ge S\gt (m_{n'}-1)/n' $$，可知$$ m_n/n-m_{n'}/n'\ge -1/n' $$，同理可得$$ \vert m_n/n-m_{n'}/n'\vert \le 1/n $$，$$ \forall \varepsilon\gt 0 $$，根据命题2$$ \exists N\gt 1/\varepsilon $$，$$ n,n'\ge N $$时由上述推导知满足条件。

$$ X=\text{LIM}_{n\to \infty}(m_n/n) $$，利用上节习题可知$$ X $$是上界；而$$ X'=\text{LIM}_{n\to \infty}{(m_n-1)/n} $$，任取上界$$ Y $$，由上节习题可知$$ Y\ge (m_n-1)/n $$，因此$$ Y\ge X' $$，又因为$$ X-X'=\text{LIM}_{n\to \infty}(1/n) $$=0，因此$$ Y\ge X $$，$$ X $$是最小上界。

- **上确界的定义**：设$$ E $$是$$ \RR $$的非空子集且存在上界，定义$$\sup(E) $$为$$ E $$的最小上界，如果$$ E $$非空且没有上界，令$$\sup(E):=+\infty $$；如果$$ E $$为空，令$$\sup(E):=-\infty $$。$$\sup(E) $$称为上确界。

同理我们也可以定义下确界$$ \inf(E) $$。

- **命题**：存在一个实数$$ x $$满足$$ x^2=2 $$。

证明（巧妙！）：思路是利用上确界。令$$ E={y\in \RR:y\ge 0且y^2\lt 2} $$，显然$$ 2 $$是$$ E $$的上界，因此存在$$ x=\sup(E) $$，利用实数的三歧性。

若$$ x^2\lt 2 $$，设$$ 0\lt \varepsilon\lt 1 $$，$$ (x+\varepsilon)^2\le x^2+5\varepsilon $$，令$$ \varepsilon=(2-x^2)/5 $$，$$ x+\varepsilon\in E $$。

若$$ x^2\gt 2 $$，设$$ 0\lt \varepsilon\lt 1 $$，$$ (x-\varepsilon)^2\ge x^2-2\varepsilon x\ge x^2-4\varepsilon $$，令$$ \varepsilon=(x^2-2)/4 $$，$$ (x-\varepsilon)^2\gt 2\gt y^2 $$。

通过这个例子我们发现有理数不满足存在最小上界的定理。

### 实数的指数运算1

- **n次根的定义**：对非负实数$$ x $$和正整数$$ n $$，$$ x^{1/n}:=\sup\{y\in \RR:y\ge 0且y^n\le x\} $$。

实数的整数次幂指数运算满足有理数的性质。

n次根的存在性证明：$$ 0\in E $$。若$$ x\le 1 $$，则反证$$ y\le 1 $$($$ y^n\gt 1^n\gt x $$)；若$$ x\gt 1 $$，则反证得到$$ y\lt x $$($$ y^n\ge x\times x^{n-1}\gt x\times 1^{n-1}\gt x $$)。

- **引理**：$$ y=x^{1/n} $$当且仅当$$ y^n=x $$。

证明（巧妙的放缩）：左蕴含右类似存在$$ x^2=2 $$的证明。若$$ y^n\lt x $$，$$ (y+\varepsilon)^n\lt y^n+\varepsilon((y+1)^n-y^n) $$(把二项式定理展开后的所有$$ \varepsilon^n $$放缩为$$ \varepsilon $$)；若$$ y^n\gt x $$，$$ (y-\varepsilon)^n\gt y^{n-1}\times (y-n\varepsilon) $$（均值不等式）。右蕴含左证明可利用三歧性和整数次幂的性质（若$$ y\gt x^{1/n} $$，$$ y^n\gt x $$）。

- **有理数次幂的定义**：设有理数$$ q=a/b $$，其中$$ b $$是正整数，$$ a $$是整数，$$ x $$是正实数，$$ x^q:=(x^{1/b})^a $$。

要证明同一个$$ q $$对应的不同的$$ (a,b) $$结果相同：若$$ a=0 $$，$$ x^q=1 $$；若$$ a\gt 0 $$，$$ ab'=a'b $$，利用$$ (x^{1/n})^{1/m}=x^{1/nm} $$，令$$ y=x^{1/ab'}=x^{1/ba'}=(x^{1/b'})^{1/a}=(x^{1/b})^{1/a'} $$，$$ (x^{1/b'})^{a'}=(y^{a})^{a'}=(y^{a'})^{a}=(x^{1/b})^{a} $$；$$ a\lt 0 $$利用$$ -a $$时相等即可。

# 第6章 序列极限

## 收敛和极限定律

可以把之前定义的有理数序列最终接近、有理数柯西序列等的定义扩展到实数，根据实数的性质中的命题2可知，有理数序列是有理数柯西数列当且仅当它是实数柯西数列。

- **数列收敛和极限的定义**：数列收敛于$$ L $$当且仅当对任意实数$$ \varepsilon\gt 0 $$，该序列是最终$$ \varepsilon $$-接近于$$ L $$的，称序列的极限为$$ L $$，记做$$ L=\lim_{n\to \infty}a_n $$。

极限唯一反证即可。

那么我们可以证明之前所用的$$ \text{LIM} $$本质就是$$ \lim $$($$ L=\text{LIM}_{n\to \infty}a_n $$，则$$ (a_n)_{n=m}^{\infty} $$收敛于$$ L $$)：反证，利用实数的序的习题即可。

之后我们可以证明实数序列是柯西序列当且仅当其收敛，因此我们接下来对极限的研究也是对$$ \text{LIM} $$这一运算的研究，例如极限定理就是实数（有理数序列）运算的性质扩展到实数序列，实数的指数运算本质其实是在用“实数柯西序列的$$ \text{LIM} $$”定义。

设$$ a $$和$$ b $$是收敛的实数序列，有如下极限定理：

- **极限定理1**：$$ \lim_{n\to \infty}(a_n+b_n)=\lim_{n\to \infty}a_n+\lim_{n\to \infty}b_n $$
- **极限定理2**：$$ \lim_{n\to \infty}(a_nb_n)=(\lim_{n\to \infty}a_n)(\lim_{n\to \infty}b_n) $$
- **极限定理3**：$$ \lim_{n\to \infty}(ca_n)=c\lim_{n\to \infty}a_n $$
- **极限定理4**：$$ \lim_{n\to \infty}(a_n-b_n)=\lim_{n\to \infty}a_n-\lim_{n\to \infty}b_n $$
- **极限定理5**：若对所有$$ n $$有$$ b_n\ne 0 $$，$$ \lim_{n\to \infty}b_n^{-1}=(\lim_{n\to \infty}b_n)^{-1} $$
- **极限定理6**：若对所有$$ n $$有$$ b_n\ne 0 $$，$$ \lim_{n\to \infty}\frac{a_n}{b_n}=\frac{\lim_{n\to \infty}a_n}{\lim_{n\to \infty}b_n} $$
- **极限定理7**：$$ \lim_{n\to \infty}max(a_n,b_n)=max(\lim_{n\to \infty}a_n,\lim_{n\to \infty}b_n) $$

## 广义实数系

- **广义实数系$$ \RR^{\ast} $$的定义**：实数$$ \RR $$附加上$$ +\infty $$和$$ -\infty $$两个元素，广义实数有限当且仅当它是实数，无限当且仅当它是$$ +\infty $$或$$ -\infty $$。

定义$$ -(+\infty)=-\infty $$和$$ -(-\infty)=+\infty $$即可定义广义实数系上的负运算。

定义$$ x\lt y $$当且仅当$$ x $$和$$ y $$是实数且$$ x\lt y $$或$$ y=+\infty $$或$$ x=-\infty $$，$$ x\lt y $$当且仅当$$ x\lt y $$且$$ x\ne y $$。那么有小于等于的自反性和传递性，序的三歧性，负运算改变序。

- **广义实数集的上确界的定义**：设$$ E $$是$$ \RR^{\ast} $$的子集，定义$$\sup(E) $$:(a)若$$ E $$是$$ \RR $$的子集，按照之前的定义；(b)如果$$ E $$包含$$ +\infty $$，则$$\sup(E):=+\infty $$；(c)如果$$ E $$包含$$ -\infty $$，则$$\sup(E):=\sup(E\setminus \{-\infty\}) $$。

可定义$$ \inf(E)=-\sup(-E) $$。

定理：如果$$ x\le M $$对任意$$ x\in E $$成立，则$$\sup(E)\le M $$。对$$ \inf $$同理。

## 序列的上确界和下确界

- **序列的上下确界的定义**：定义$$\sup(a_n)_{n=m}^{\infty}:=\sup\{a_n:n\ge m\} $$，$$ \inf(a_n)_{n=m}^{\infty}:=\inf\{a_n:n\ge m\} $$

- **命题1**：设单调递增数列$$ (a_n)_{n=m}^{\infty} $$存在上界$$ M $$，则$$ (a_n)_{n=m}^{\infty} $$收敛，且$$ \lim_{n\to \infty}a_n=\sup(a_n)_{n=m}^{\infty} $$

利用三歧性，如果$$ \lim\gt\sup $$，则存在$$ a_n\gt\sup $$；若$$ \lim\lt\sup $$，则存在$$ \lim\lt a_n\le\sup $$，则对任一$$ m\ge n $$，$$ a_m-\lim\gt a_n-\lim $$。

收敛序列是柯西序列，柯西序列有界，因此单增序列收敛当且仅当序列有界。

- **命题2**：若$$ 0\lt x\lt 1 $$，$$ \lim_{n\to \infty}x^n=0 $$

证明（巧妙！）:根据上一命题，序列有下界$$ 0 $$且递减，因此收敛。设$$ (x^n)_{n=1}^{\infty} $$收敛于$$ L $$，则$$ (x^n)_{n=2}^{\infty}=(x^{n+1})_{n=1}^{\infty} $$收敛于$$ xL $$，因此$$ xL=L $$，$$ L=0 $$。

可以用反证法证明$$ x\gt 1 $$时不收敛：$$ (1/x)^nx^n=1 $$，利用极限定理2。

## 序列的上下极限和极限点

- **极限点的定义**：$$ x $$是实数序列$$ (a_n)_{n=m}^{\infty} $$的附着点当且仅当$$ \forall \varepsilon\gt 0 $$，$$ \forall N\ge m $$，$$ \exists n\ge N $$，$$ a_n $$与$$ x $$是$$ \varepsilon $$-接近的。

极限的定义是$$ \exists N $$，$$ \forall n\ge N $$。可以证明收敛的数列的唯一极限点的是极限。

- **上下极限的定义**：对$$ (a_n)_{n=m}^{\infty} $$，定义$$ (a_N^{+})_{N=m}^{\infty} $$，$$ a_N^{+}:=\sup(a_n)_{n=N}^{\infty} $$，上极限记做$$ \lim{\sup_{n\to \infty}a_n}:=\inf(a_N^{+})_{N=m}^{\infty} $$；同理定义$$ a_N^{-}:=\inf(a_n)_{n=N}^{\infty} $$，下极限记做$$ \lim{\inf_{n\to \infty}a_n}:=\sup(a_N^{+})_{N=m}^{\infty} $$

对于$$ (a_n)_{n=m}^{\infty} $$，广义实数$$ L^{+} $$和$$ L^{-} $$分别是上下极限，则有如下定理：

- **定理1**：$$ \forall x\gt L^{+} $$，$$ \exists N\ge m $$，$$ \forall n\ge N $$，$$ a_n\lt x $$。

$$ x\gt L^{+} $$可知存在$$ a_n^{+}\lt x $$。这个定理说明了数列最终小于$$ x $$。

- **定理2**：$$ \forall x\lt L^{+} $$，$$ \forall N\ge m $$，$$ \exists n\ge N $$，$$ a_n\gt x $$。

$$ x\lt L^{+} $$可知所有$$ a_n^{+}\gt x $$。这个定理说明了数列有无限多处大于$$ x $$。

- **定理3**：$$ \inf(a_n)_{n=m}^{\infty}\le L^{-}\le L^{+}\le\sup(a_n)_{n=m}^{\infty} $$

两边由定义可得，$$ L^{-}\le L^{+} $$可反证得到存在$$ a_{p'}=a_p^{+}\lt a_q^{-}=a_{q'} $$，若$$ p\ge q $$则$$ a_{p'}\lt \inf(a_n)_{n=q}^{\infty} $$，若$$ p\lt q $$则$$ a_{q'}\gt\sup(a_n)_{n=m}^{\infty} $$。

- **定理4**：如果$$ c $$是极限点，则$$ L^{-}\le c\le L^{+} $$。

若$$ c\lt L^{-} $$，由定理1可令$$ x=(c+L^{-})/2 $$，存在$$ N' $$，则$$ 0\lt \varepsilon\lt (c-L^{-})/2 $$时$$ N=N' $$不满足；$$ c\gt L^{+} $$，同理可令$$ x=(c+L^{+})/2 $$。

- **定理5**：如果$$ L^{+} $$有限，那么$$ L^{+} $$是极限点；如果$$ L^{-} $$有限，那么$$ L^{-} $$是极限点

设$$ \varepsilon\gt 0 $$，由定理1知$$ \exists N'\ge m $$，$$ \forall n\ge N' $$由$$ a_n\le L^{+}+\varepsilon $$；$$ \forall N\ge m $$，由定理2知$$ \exists n\ge max(N,N') $$，$$ a_n\gt L^{+}-\varepsilon $$，$$ a_n $$和$$ L^{+} $$是$$ \varepsilon $$-接近的。

- **定理6**：$$ (a_n)_{n=m}^{\infty} $$收敛于$$ c $$当且仅当$$ L^{+}=L^{-}=c $$

左蕴含右可以反证：由定理3，因此$$ L^{+} $$和$$ L^{-} $$有限，且$$ L^{-}\lt L^{+} $$，则存在两个极限点；右蕴含左利用定理4。

- **引理（比较原理）**：如果$$ a_n\le b_n $$对所有$$ n\ge m $$成立，有$$\sup(a_n)_{n=m}^{\infty}\le\sup(b_n)_{n=m}^{\infty} $$，$$ \limsup_{n\to \infty}a_n \le \limsup_{n\to \infty}b_n $$。

- **推论（夹逼定理）**：对$$ (a_n)_{n=m}^{\infty} $$，$$ (b_n)_{n=m}^{\infty} $$，$$ (c_n)_{n=m}^{\infty} $$，若满足$$ \forall n\ge m $$有$$ a_n\le b_n\le c_n $$，且$$ a $$和$$ c $$都收敛于$$ L $$，则$$ b $$也收敛于$$ L $$。

根据比较原理可知$$ L_a^{-}\le L_b^{-}\le L_c^{-} $$，$$ L_a^{+}\le L_b^{+}\le L_c^{+} $$，由命题6可知$$ L_a^{-}=L_a^{+} $$，$$ L_c^{-}=L_c^{+} $$。

有一些求极限的例子：

1. $$ L=\lim_{n\to \infty}1/n^{1/k} $$，证明$$ L=0 $$：递减且下界为$$ 0 $$，由上下确界的命题1可知收敛于$$ L\ge 0 $$，归纳+极限定理2可知$$ L^k=\lim_{n\to \infty}1/n=0 $$。
2. 讨论极限$$ \lim_{n\to \infty}x^n $$的存在性和值：由上下确界的命题2可知$$ 0\le x\lt 1 $$的情形；$$ -1\lt x\lt 0 $$的情形利用$$ -(-x)^n\le x^n\le (-x)^n $$和夹逼定理；$$ x=-1 $$的情形可以反证($$ L^2=1 $$，而$$ L=-L $$)；其他情形类似命题2利用反证+极限定理2可知。
3. 对任意$$ x\gt 0 $$，证明$$ \lim_{n\to \infty}x^{1/n}=1 $$：因为$$ n $$较小时情况不一，只讨论$$ x\gt 1 $$的情况。设$$ \varepsilon\gt 0 $$，要证存在$$ n $$满足$$ 1-\varepsilon\le x^{1/n}\le 1+\varepsilon $$，$$ x^{1/n}\gt 1^{1/n} $$成立，而$$ x\le (1+\varepsilon)^n $$利用例2，转化为$$ (1/(1+\varepsilon))^n\le 1/x $$，根据例2$$ 0\lt x\lt 1 $$的情况得证。

- **定理（实数的完备性）**：实数序列是柯西序列当且仅当它是收敛的。

右蕴含左显然，左蕴含右证明可用$$ L^{+} $$和$$ L^{-} $$，显然$$ \forall \varepsilon $$，$$ a_N^{+}-a_N^{-}\lt 2\varepsilon $$，因此$$ L^{+}=L^{-} $$，由定理6得证。

有理数柯西序列一定收敛于一个实数（不一定是有理数），而实数柯西序列也一定收敛于一个实数（类似地，有理数集的$$\sup $$和$$ \inf $$可能是实数，实数集则满足最小上界存在性定理），这些是实数集相比有理数集的优越性。

### 实数的指数运算2

- **实数次幂的定义**：设$$ x\gt 0 $$且$$ \alpha $$是实数，$$ (q_n)_{n=0}^{\infty} $$是任一个收敛于$$ \alpha $$的实数，$$ x^{\alpha}:=\lim_{n\to \infty} x^{q_n} $$。

根据实数的定义和之前对极限本质的证明，存在$$ q $$；以下还需要证明$$ \lim_{n\to \infty}x^{q_n} $$存在，以及不同的序列$$ q $$会得到相同的极限。

证明存在：根据实数的完备性定理，极限存在等价于其为柯西序列。不妨设$$ q_n\ge q_m $$且$$ x\gt 1 $$，$$ \vert x^{q_n}-x^{q_m}\vert =x^{q_m}(x^{q_n-q_m}-1) $$，而$$ q $$有上界$$ M $$（收敛等价于是柯西序列），且对任一$$ \delta $$存在$$ N $$满足$$ n,m\ge N $$时$$ q_n-q_m\le \delta $$，利用求极限的例3，存在$$ K $$满足$$ x^{1/K}-1\le \delta' $$，令$$ \delta=1/K $$，则$$ \vert x^{q_n}-x^{q_m}\vert \le x^M\delta' $$。可令$$ \delta'=x^{-M}\varepsilon $$得到序列是最终$$ \varepsilon $$-稳定的。

证明极限相同：利用极限定理只需证明$$ \lim_{n\to \infty}x^{q_n-{q_n}'}=1 $$。由于$$ q_n-{q_n}' $$是最终接近0的，那么再次利用求极限的例3，存在$$ K $$使得$$ \vert x^{-1/K}-1\vert ,\vert x^{1/K}-1\vert \le \varepsilon $$，也存在$$ N $$满足$$ n\ge N $$时$$ \vert q_n-{q_n}'\vert \le 1/K $$。

## 子序列

- **子序列的定义**：设$$ (a_n)_{n=0}^{\infty} $$和$$ (b_n)_{n=0}^{\infty} $$，称$$ (b_n)_{n=0}^{\infty} $$是$$ (a_n)_{n=0}^{\infty} $$的子序列当且仅当存在严格递增的函数$$ f:\NN\to \NN $$满足$$ b_n=a_{f(n)} $$对所有$$ n\in \NN $$成立。

- **定理1**：序列收敛于$$ L $$当且仅当所有子序列均收敛于$$ L $$
- **定理2**：序列存在极限点$$ L $$当且仅当存在子序列收敛于$$ L $$

定理2的左蕴含右证明用类似实数的上界存在性的证法（因为是先构造序列，再证明对所有$$ \varepsilon $$成立，所以利用$$ \lim_{n\to \infty}1/n=0 $$）。根据$$ L $$为极限点，令$$ \varepsilon=1/n $$可得集合$$ \{m\in \NN:m\gt f(n-1)且d(a_m,L)\le 1/n\} $$不为空，令$$ f(n) $$为集合中任一元素即可。

- 习题：证明无界序列存在子序列$$ (b_n)_{n=0}^{\infty} $$满足$$ \lim_{n\to \infty}1/b_n=0 $$。

使用类似的证法，一定存在$$ m\gt f(n-1) $$且$$ 1/a_m\lt 1/m $$，否则有界。

- **定理(波尔查诺-维尔斯特拉斯定理)**：有界序列存在至少一个收敛的子序列

证明：由于$$ -M\le a_n\le M $$，根据比较原理$$ L^{+} $$是实数，由定理5可知$$ L^{+} $$是极限点。

# 第7章 级数

## 有限级数

对于广为人知的结论就不加证明地列出，以便后面的引用。

- **有限级数的定义**：（递归定义）若$$ n\lt m $$，$$ \sum_{i=m}^{n}a_i:=0 $$；若$$ n\ge m-1 $$，$$ \sum_{i=m}^{n+1}a_i:=(\sum_{i=m}^{n}a_i)+a_{n+1} $$。

有如下求和的基本性质（用归纳法证）：

- **有限级数定理1**：对整数$$ m\le n\le p $$，有$$ \sum_{i=m}^{n}a_i+\sum_{i=n+1}^{p}a_i=\sum_{i=m}^{p}a_i $$
- **有限级数定理2**：对整数$$ m\le n $$和整数$$ k $$，有$$ \sum_{i=m}^{n}a_i=\sum_{i=m+k}^{n+k}a_{j-k} $$
- **有限级数定理3**：对整数$$ m\le n $$，有$$ \sum_{i=m}^{n}(a_i+b_i)=(\sum_{i=m}^{n}a_i)+(\sum_{i=m}^{n}b_i) $$
- **有限级数定理4**：对整数$$ m\le n $$，有$$ \sum_{i=m}^{n}(ca_i)=c(\sum_{i=m}^{n}a_i) $$
- **有限级数定理5**：对整数$$ m\le n $$，有$$ \vert \sum_{i=m}^{n}a_i\vert \le \sum_{i=m}^{n}\vert a_i\vert $$
- **有限级数定理6**：对整数$$ m\le n $$，$$ \forall m\le i\le n $$，有$$ a_i\le b_i $$，则$$ \sum_{i=m}^{n}a_i\le \sum_{i=m}^{n}b_i $$

- **有限集求和运算的定义**：设$$ X $$是基数为$$ n $$的有限集，则存在双射$$ g:\{i\in \NN:1\le i\le n\}\to X $$，设$$ f:X\to \RR $$，则$$ \sum_{x\in X}f(x):=\sum_{i=1}^{n}f(g(i)) $$

需要证明对于不同的$$ g $$得到和相同：对$$ n $$归纳，再取出$$ g(n+1) $$，构造新的双射$$ \tilde{g} $$和$$ \tilde{g'} $$用于归纳。

有限集求和的基本性质与有限级数定理类似，只需要记住这两个：

- **有限集求和定理1**：如果$$ g:Y\to X $$是双射，则$$ \sum_{x\in X}f(x)=\sum_{y\in Y}f(g(y)) $$
- **有限集求和定理2**：设集合$$ X=\{i\in Z:n\le i\le m\} $$，则$$ \sum_{i=n}^{m}a_i=\sum_{i\in X}a_i $$
- **有限集求和定理3**：$$ X $$与$$ Y $$无交时，$$ \sum_{z\in X\cap Y}f(z)=(\sum_{x\in X}f(x))+(\sum_{y\in Y}f(y)) $$

定理1使用函数复合以及有限集求和的定义证明；定理2先使用定义、再使用有限级数定理2证明；定理3利用定义和有限级数定理1证明。

- **引理**：若$$ X $$和$$ Y $$是有限集，设函数$$ f:X\times Y\to \RR $$，则$$ \sum_{x\in X}(\sum_{y\in Y}f(x,y))=\sum_{(x,y)\in X\times Y}f(x,y) $$

对$$ X $$的基数归纳，再使用有限集求和定理3即可。

推论 $$ \sum_{x\in X}(\sum_{y\in Y}f(x,y))=\sum_{y\in Y}(\sum_{x\in X}f(x,y)) $$。

等式两边都使用引理，再用有限集求和定理1证明$$ \sum_{(x,y)\in X\times Y}f(x,y)=\sum_{(y,x)\in Y\times X}f(x,y) $$即可。

习题：对任意$$ x\in X $$，设$$ (a_n(x))_{n=m}^{\infty} $$是收敛的实数序列，则$$ \lim_{n\to \infty}\sum_{x\in X}a_n(x)=\sum_{x\in X}\lim_{n\to \infty}a_n(x) $$

对$$ X $$的基数归纳即可。推论证明了有限集求和可交换求和符号的次序，习题证明了可交换有限集求和和极限的次序。

## 无限级数

- **无限级数和无限极数收敛的定义**：无限极数是形如$$ \sum_{n=m}^{\infty}a_n $$的表达式。对任意$$ N\ge m $$，令$$ S_N:=\sum_{n=m}^{N}a_n $$，称无限极数是收敛且收敛于$$ L $$，记做$$ L=\sum_{n=m}^{\infty}a_n $$，当且仅当序列$$ (S_N)_{N=m}^{\infty} $$收敛于极限$$ L $$。

根据这个定义可以得到一个最直接的判定定理：$$ \sum_{n=m}^{\infty}a_n $$收敛当且仅当对任意$$ \varepsilon\gt 0 $$，都存在$$ N\ge m $$，使得对任意$$ p,q\ge N $$满足$$ \vert \sum_{n=p}^{q}a_n\vert \le \varepsilon $$。

以下的级数定律可直接转化为$$ S_n $$由极限定理或有限级数定律得到：

- **级数定律1**：$$ \sum_{n=m}^{\infty}(a_n+b_n)=\sum_{n=m}^{\infty}a_n+\sum_{n=m}^{\infty}b_n $$
- **级数定律2**：$$ \sum_{n=m}^{\infty}(ca_n)=c\sum_{n=m}^{\infty}a_n $$
- **级数定律3**：$$ \sum_{n=m}^{\infty}a_n=\sum_{n=m}^{m+k-1}a_n+\sum_{n=m+k}^{\infty}a_n $$

- **嵌套级数**：设$$ (a_n)_{n=0}^{\infty} $$是收敛于$$ L $$的实数序列，$$ \sum_{n=0}^{\infty}(a_n-a_{n+1})=a_0-L $$。利用有限级数定律1，$$ S_n=a_0-a_{n+1} $$，再根据极限定律1可知。

- **零判别法**：根据上述判定定理，令$$ p=q $$可以得到，若$$ \sum_{n=m}^{\infty}a_n $$收敛则$$ \lim_{n\to \infty}a_n=0 $$

- **绝对收敛的定义**：称级数$$ \sum_{n=m}^{\infty}a_n $$是绝对收敛的，当且仅当级数$$ \sum_{n=m}^{\infty}\vert a_n\vert $$是收敛的。

- **绝对收敛判别法**：绝对收敛的级数收敛，且满足$$ \vert \sum_{n=m}^{\infty}a_n\vert \le \sum_{n=m}^{\infty}\vert a_n\vert $$

证明：设左侧级数对应数列$$ S_N $$，右侧级数对应数列$$ {S_N}' $$，根据有限级数定理5可知$$ S_N\le {S_N}' $$，再根据比较原理可知极限的大小关系。

- **交错级数判别法**：$$ (a_n)_{n=m}^{\infty} $$是非负递减的实数序列，则级数$$ \sum_{n=m}^{\infty}(-1)^na_n $$收敛当且仅当$$ a_n $$收敛于$$ 0 $$

证明：根据零判别法可知$$ (-1)^na_n $$收敛于$$ 0 $$，因此$$ a_n $$收敛于0；而$$ S_{N+2}=S_N+(-1)^{N+1}(a_{N+1}-a_{N+2}) $$，归纳可知$$ N $$为偶数时有$$ S_{N+2k}\le S_N $$，$$ S_{N+2k+1}\le S_{N+1}=S_{N}-a_{N+1} $$，因此有$$ S_N-a_{N+1}\le S_{N+2k+1}\le S_{N+2k}\le S_N $$，$$ S_n $$时最终$$ a_{N+1} $$稳定的，如果$$ a_n $$收敛于$$ 0 $$，$$ S_n $$也收敛。

## 非负数的和

对于非负实数的形式级数，$$ S_n $$是递增的，根据序列上下确界的命题1可知，级数收敛当且仅当$$ (S_N)_{N=m}^{\infty} $$有上界。利用有限级数定理5和比较原理可以证明以下推论：

- **比较判别法**：对于任意$$ n\ge m $$都有$$ \vert a_n\vert \le b_n $$，那么如果$$ \sum_{n=m}^{\infty}b_n $$收敛，则$$ \sum_{n=m}^{\infty}a_n $$收敛，且$$ \vert \sum_{n=m}^{\infty}a_n\vert \le \sum_{n=m}^{\infty}\vert a_n\vert \le \sum_{n=m}^{\infty}b_n $$。

比较判别法常利用几何级数：$$ \sum_{n=0}^{\infty}x^n $$。如果$$ \vert x\vert \ge 1 $$，则几何级数发散；$$ \vert x\vert \lt 1 $$时，几何级数收敛于$$ 1/(1-x) $$。

当$$ \vert x\vert \ge 1 $$时，利用零判别法的逆否命题可得其发散；$$ \vert x\vert \lt 1 $$时可先归纳证明有限几何级数和公式$$ (1-x^{N+1})/(1-x) $$，再利用极限定理和上下确界的命题2可得。

- **柯西准则**：如果$$ (a_n)_{n=1}^{\infty} $$是递减非负实数序列，级数$$ \sum_{n=1}^{\infty}a_n $$收敛当且仅当级数$$ \sum_{k=0}^{\infty}2^ka_{2^k} $$收敛

证明：设$$ S_N=\sum_{n=1}^{N}a_n $$，$$ T_k:=\sum_{k=0}^{K}2^ka_{2^k} $$，归纳证明$$ S_{2^{K+1}-1}\le T_{K}\le 2S_{2^{K}} $$。

- **推论**：$$ q $$是正有理数，级数$$ \sum_{n=1}^{\infty}1/n^q $$在$$ q\le 1 $$时发散，$$ q\gt 1 $$时收敛。

证明：使用柯西准则，级数$$ \sum_{k=0}^{\infty}2^k/(2^k)^q=\sum_{k=0}^{\infty}(2^{1-q})^k $$，转化成几何级数，且$$ 2^{1-q}\lt 1 $$当且仅当$$ q\gt 1 $$。

## 重排列

- **命题1**：如果$$ \sum_{n=0}^{\infty}a_n $$是收敛的非负实数的级数，$$ f:\NN\to \NN $$是双射，则$$ \sum_{m=0}^{\infty}a_{f(m)} $$也收敛于相同的和。

证明：令两者的部分和分别是$$ S_N $$和$$ T_M $$，根据序列上下界命题1可转化为证明$$\sup(S_N)=\sup(T_M) $$。令$$ Y=\{m\in \NN:m\le M\} $$，分别根据有限集求和定理2和有限集求和定理1有$$ T_M=\sum_{m\in Y}a_{f(m)}=\sum_{n\in f(Y)}a_n $$，序列$$ (f(m))_{m=0}^{M} $$有限因此有界，存在$$ N\ge f(m) $$对所有$$ m\le M $$成立，再分别根据有限集求和定理3和有限集求和定理2可知$$ T_M\le \sum_{n\in \{n\in \NN:n\le N\}}a_n=S_N\le\sup(S_N)_{N=0}^{\infty} $$，因此$$\sup(T_M)_{M=0}^{\infty}\le\sup(S_N)_{N=0}^{\infty} $$。用$$ f^{-1} $$同理可得$$\sup(T_M)\ge\sup(S_N) $$。

- **命题2**：如果$$ \sum_{n=0}^{\infty}a_n $$是绝对收敛的实数级数，$$ f:\NN\to \NN $$是双射，则$$ \sum_{m=0}^{\infty}a_{f(m)} $$也绝对收敛，且收敛于相同的和。

根据命题1可知其绝对收敛。证明收敛于相同的和思路是利用级数收敛的判定定理。令两者的部分和分别是$$ S_N $$和$$ T_M $$，$$ S $$收敛于$$ L $$，对于$$ \varepsilon' $$，可以找到$$ N $$满足$$ p,q\ge N $$时有$$ \sum_{n=p}^{q}\vert a_n\vert \le \varepsilon' $$。$$ S_N $$是$$ \varepsilon' $$-接近$$ L $$的，类似命题1的办法，存在$$ M\ge f^{-1}(n) $$对所有$$ n\le N $$成立，利用有限集求和定理1,2和3有$$ \sum_{m=0}^{M}a_{f(m)}=\sum_{n\in \{f(m):m\in \NN,m\le M\}}a_n=S_N+\sum_{n\in X}a_n $$，其中$$ X=f(M)\setminus \{n\in \NN:n\le N\} $$。$$ X $$有限因此存在上界$$ q $$，$$ X\subseteq \{n\in \NN:N+1\le n\le q\} $$，根据有限级数定理5和有限集求和定理3可得$$ \vert \sum_{n\in X}a_n\vert \le \sum{n\in X}\vert a_n\vert \le \sum_{n=N+1}^{q}\vert a_n\vert \le \varepsilon' $$，因此当$$ M'\ge M $$时$$ T_{M'} $$是$$ \varepsilon' $$-接近于$$ S_N $$的，即$$ T $$是最终$$ 2\varepsilon' $$-接近于$$ L $$的。

## 根值判别法和比值判别法

- **定理（根值判别法）**：$$ \sum_{n=m}^{\infty}a_n $$是实数级数，设$$ \alpha=\limsup_{n\to \infty}\vert a_n\vert ^{1/n} $$。如果$$ \alpha\lt 1 $$，级数绝对收敛；如果$$ \alpha\gt 1 $$，级数不条件收敛。

证明：$$ \alpha\lt 1 $$时，存在$$ \varepsilon $$满足$$ \alpha+\varepsilon\lt 1 $$，利用上下极限定理1，存在$$ N\ge m $$满足对$$ n\ge N $$均有$$ \vert a_n\vert ^{1/n}\le \alpha+\varepsilon $$，$$ \vert a_n\vert \le (\alpha+\varepsilon)^n $$，转化为几何级数，再根据比较判别法可知其绝对收敛；$$ \alpha\gt 1 $$时，利用上下极限定理2，对每个$$ N\ge m $$都存在$$ n\ge N $$满足$$ \vert a_n\vert ^{1/n}\ge 1 $$，因此$$ (a_n)_{n=m}^{\infty} $$不是最终1-接近于0的，不收敛于0，由零判别法可知其不是条件收敛的。

如果$$ \vert a_n\vert ^{1/n} $$收敛，也可利用极限值代替上极限。

- **引理**：$$ c_n $$是正数序列，则$$ \liminf_{n\to \infty} c_{n+1}/c_n\le \liminf_{n\to \infty}c_n^{1/n}\le \limsup_{n\to \infty}c_n^{1/n}\le \limsup_{n\to \infty}c_{n+1}/c_n $$。

证明：中间的不等式可直接由上下极限定理3得到。对于最后一个不等式，仍然是利用上下极限定理，令$$ L=\limsup_{n\to \infty}c_{n+1}/c_n $$，如果$$ L=+\infty $$直接成立，否则$$ L $$为非负实数，由上下极限定理1可知，$$ \forall \varepsilon\ge 0 $$，存在$$ N\ge 0 $$满足$$ \forall n\ge N $$都有$$ c_{n+1}/c_n\le L+\varepsilon $$，归纳可知$$ \forall n\ge N $$都有$$ c_n\le c_N(L+\varepsilon)^{n-N} $$，令$$ A=c_N(L+\varepsilon)^{-N} $$，有$$ c_n^{1/n}\le A^{1/n}(L+\varepsilon) $$，由比较原理可知$$ \limsup_{n\to \infty}c_n^{1/n}\le \limsup_{n\to \infty}A^{1/n}(L+\varepsilon) $$，根据极限定律3和求极限例3可知$$ \lim_{n\to \infty}A^{1/n}(L+\varepsilon)=L+\varepsilon $$，再结合上下极限定理6可知$$ \lim_{n\to \infty}A^{1/n}(L+\varepsilon)\le L+\varepsilon $$，因此$$ \lim_{n\to \infty}A^{1/n}(L+\varepsilon)\le L $$；对于第一个不等式同理，令$$ L $$为左式，存在$$ N\ge 0 $$，$$ \forall n\ge N $$有$$ c_{n+1}/c_n\ge L-\varepsilon $$，$$ c_n^{1/n}\ge A^{1/n}(L-\varepsilon) $$，因此有$$ \liminf_{n\to \infty}c_n^{1/n}\ge L-\varepsilon $$，得证。

- 应用：求证$$ \lim_{n\to \infty}n^{1/n}=1 $$。

证明：$$ \limsup{n\to \infty}(n+1)/n=\liminf{n\to \infty}(n+1)/n=1 $$，根据引理和上下极限定理3（得到相等）和上下极限定理6可知。

- **推论（比值判别法）**：结合引理和根值判别法得到：对于所有项不为零的级数$$ \sum_{n=m}^{\infty}a_n $$，如果$$ \limsup_{n\to \infty}a_{n+1}/a_n\lt 1 $$，级数绝对收敛；如果$$ \lim \inf_{n\to \infty}c_{n+1}/c_n\gt 1 $$，级数不条件收敛。

注意到，所有几何级数都会导致根值判别法$$ \alpha=1 $$和比值判别法极限为$$ 1 $$，但是$$ \vert q\vert \ge 1 $$时发散，$$ \vert q\vert \lt 1 $$时收敛，可以说明存在两种判别法都无法判断收敛性的情况。

# 第8章 无限集

## 可数性

- **可数集的定义**：集合$$ X $$是可数的，当且仅当$$ X $$与自然数集$$ \NN $$有相等的基数（存在双射）；$$ X $$是至多可数的，当且仅当$$ X $$是可数的或$$ X $$是有限的；$$ X $$是不可数的，当且仅当$$ X $$不是可数的也不是有限的

- **定理（良序原理）**：设$$ X $$是$$ \NN $$的非空子集，恰存在一个元素$$ n\in X $$满足对所有$$ m\in X $$有$$ n\le m $$（自然数集的非空子集存在最小元素）

证明1：首先存在$$ a_0\in X $$，此后令$$ S_n=\{x\in X:x\lt a_{n-1}\} $$，$$ a_n $$为$$ S_n $$中的任意元素，有$$ a_{n+1}\lt a_n $$，根据有理数间隙一节中的无穷递降原理，$$ a $$有限，即存在$$ S_N=\emptyset $$，则$$ a_{N-1} $$即为所求。

证明2：根据实数的最小上界定理，由于$$ 0 $$一定是下界，因此存在最小下界$$ M $$，如果$$ M $$不在集合中，则$$ M\lt m $$均成立，因此$$ M+1\le m $$均成立，因此$$ M $$在集合中。

- **命题1**：如果$$ X $$是$$ \NN $$的无限子集，那么存在唯一递增的双射$$ f:\NN\to X $$

证明：利用良序原理，令$$ a_n=min(S_n) $$并构造$$ S_n $$即可。$$ S_n=\{x\in X:\forall m\lt n有x\ne a_m\} $$、$$ S_n=\{x\in X:x\gt a_{n-1}\} $$均可。

据此可以说明自然数的所有子集至多可数。

- **推论1**：如果$$ X $$至多可数，$$ Y\subseteq X $$，则$$ Y $$至多可数。

证明：$$ X $$有限可根据基数算术定理2得到结论；$$ X $$无限根据定义可知存在$$ f:X\to \NN $$，那么$$ f:Y\to f(Y) $$也是双射，$$ Y $$与$$ f(Y) $$基数相同，而$$ f(Y)\subseteq \NN $$，由上述命题1可知$$ f(Y) $$可数，$$ f(Y) $$与$$ \NN $$有相等的基数。

- **推论2**：$$ A $$是至多可数的当且仅当存在$$ A\to \NN $$的单射。

证明：如果$$ A $$可数，利用可数的定义，如果$$ A $$有限，利用集合基的定义；如果存在单射，则存在$$ A\to f(A) $$的双射，根据推论1可知$$ f(A) $$至多可数。

- **命题2**：$$ Y $$是集合，设$$ f:\NN\to Y $$，则$$ f(\NN) $$至多可数

证明：思路是找到集合$$ X\subseteq \NN $$且$$ f:X\to f(\NN) $$构成双射，再利用命题1得到$$ X $$至多可数。令$$ X=\{x\in \NN:\forall x'\lt x有f(x)\ne f(x')\} $$即可。

- **推论**：$$ X $$是可数集，$$ Y $$是集合，设$$ f:X\to Y $$，则$$ f(X) $$至多可数

证明：存在双射$$ g:\NN\to X $$，则$$ f(x)=f(g(g^{-1}(x))) $$，则$$ f(X)=f(g(f^{-1}(X)))=f(g(\NN)) $$，利用命题2可知$$ (f\circ g)(\NN) $$至多可数。

- **命题3**：$$ X $$和$$ Y $$是可数集，则$$ X\cup Y $$是可数集

证明：考虑如何构造$$ \NN\to Z $$的双射，应当$$ f(0)=0,f(1)=1,f(2)=-1,f(3)=2,f(4)=-2,...,f(2k)=-k,f(2k+1)=k+1,... $$。设存在双射$$ g:\NN\to X $$，$$ h:\NN\to Y $$，那么令$$ g(n)=f(2n),h(n)=f(2n+1) $$，则$$ f(\NN)=X\cup Y $$，由命题2可知$$ X\cup Y $$可数。

- **命题4**：集合$$ A=\{(n,m)\in \NN\times \NN:m\le n\} $$是可数集

证明：思路是按照一定顺序“分配”给自然数$$ (1,1),(2,1),(2,2),(3,1),(3,2),(3,3),... $$。令$$ a_0=0 $$，$$ a_{n+1}=a_n+n+1 $$，那么$$ a_N $$就表示$$ n\lt N $$的二元组个数，直接令$$ f(n,m):=a_n+m $$即可。只需说明$$ f $$是一对一的即可说明存在$$ A $$到$$ f(A) $$的双射，由命题1的推论1可知其至多可数，而如果$$ A $$有限，则任一个子集都有限，而$$ A'=\{(n,0)\in \NN\times \NN:n\in \NN\} $$与$$ \NN $$基数相同，矛盾，因此$$ A $$是可数的。（直接说明$$ f $$是满射似乎更方便）

- **推论1**：$$ \NN\times \NN $$是可数集

证明：令$$ B=\{(n,m)\in \NN\times \NN:m\ge n\} $$，则$$ A $$和$$ B $$基数相同，$$ B $$可数；而$$ \NN\times \NN=A\cup B $$，根据命题3可得结论。

- **推论2**：如果$$ X $$和$$ Y $$是可数集，则$$ X\times Y $$是可数集

证明：存在双射$$ g:X\to \NN $$和$$ h:Y\to \NN $$，则$$ f(x,y)=(g(x),h(y)) $$是$$ X\times Y\to \NN\times \NN $$的双射。

- **推论3**：有理数集$$ \QQ $$是可数集

证明：由命题3可知$$ Z $$是可数集，$$ Z\setminus \{0\} $$也是可数集，则令$$ f(a,b)=a/b $$，由命题2的推论可知$$ \QQ $$是可数集。

可数集意味着可以排成一排$$ f(0),f(1),... $$，而上述命题使用的都是构造性证明，因此对任何由这些命题证明出的可数集，我们都可以直接利用证明过程构造出一个无穷序列取遍所有元素。

构造有理数集合的无穷序列我的想法是只考虑互质的分子分母，并且对于$$ a/b(a\lt b) $$要同时加入$$ -a/b,b/a,-b/a $$（并集的构造就是交替选取元素）。按照$$ b $$为第一优先级，$$ a $$为第二优先级的顺序，如果要类似命题4来写的话可令$$ a_n=\sum_{i\lt n}\varphi(i) $$

- 习题1：$$ X $$是无限集当且仅当存在$$ X $$的真子集$$ Y $$与$$ X $$有相同的基数。

引理：无限集$$ X $$存在可数子集。

引理的证明（巧妙）：令$$ S_0=X $$，$$ a_n\in S_{n-1} $$，$$ S_n=S_{n-1}\setminus\{a_n\} $$。因为$$ X $$是无限集，因此不存在$$ S_n=\emptyset $$，因此根据选择公理，存在无穷数列$$ a_n $$，$$ a_n $$构成双射，$$ \{a_n:n\in \NN\} $$是可数子集。

证明：如果$$ X $$不是无限集，根据基数定义的引理（集合删除一个元素基数减一）和基数算数定理2（集合的基数大于等于子集基数）可知不存在$$ Y $$；如果$$ X $$是无限集，根据引理存在可数子集$$ A\in X $$，取$$ a\in A $$，则$$ A $$与$$ A\setminus \{a\} $$有相同的基数，进而存在双射$$ f:A\to A\setminus \{a\} $$，再令所有$$ x\in X\setminus A $$，$$ f(x)=x $$，则$$ f $$是$$ X\to X\setminus \{a\} $$的双射。

- 习题2：$$ I $$是至多可数的集，且对于每个$$ \alpha\in I $$有$$ A_{\alpha} $$是至多可数的，求证集合$$ \bigcup_{\alpha\in I}A_{\alpha} $$至多可数。

证明：如果$$ I $$是有限集，对$$ \#(I) $$归纳利用可数性命题3得证。对于可数集$$ I $$，证明的思路是转化为$$ \NN\times \NN $$。存在$$ f:\NN\to I $$，$$ \bigcup_{\alpha\in I}A_{\alpha}=\bigcup_{i=0}^{\infty}A_{f(i)}=\bigcup_{i=0}^{\infty}(A_{f(i)}\setminus \bigcup_{j=0}^{i-1}A_{f(j)}) $$，因此它的基数等于$$ \bigcup_{i=0}^{\infty}\big( (A_{f(i)}\setminus \bigcup_{j=0}^{i-1} A_{f(j)})\times \{i\} \big) $$的基数，而$$ \bigcup_{i=0}^{\infty}\big( (A_{f(i)}\setminus \bigcup_{j=0}^{i-1}A_{f(j)})\times \{i\} \big)\subseteq \bigcup_{i=0}^{\infty} \big( A_{f(i)}\times \{i\} \big) $$，对于每个$$ A_{f(i)} $$，都存在一个满射$$ g_i:\NN\to A_{f(i)} $$，$$ g_i\in \{h\in (A_{f(i)})^\NN:h是满射\} $$，根据选择公理，对每个$$ i\in \NN $$存在函数$$ g_i $$，$$ g_i(\NN)=A_{f(i)} $$，则$$ \bigcup_{i=0}^{\infty} \big(A_{f(i)}\times \{i\}\big)=\{(g_n(m),n):(n,m)\in \NN\times \NN\} $$，由可数性命题4（至多可数集的笛卡尔积是至多可数集）和可数性命题2（至多可数集经过替代公理仍然得到至多可数集）可知，$$ \{(g_n(m),n):(n,m)\in \NN\times \NN\} $$至多可数，再由可数性命题1（至多可数集的子集是至多可数集）可知，最终结果至多可数。

## 在无限集上求和

- **可数集上的级数的定义**：设$$ X $$是可数集，$$ f:X\to \RR $$是一个函数，称$$ \sum_{x\in X}f(x) $$是绝对收敛的，当且仅当存在某个双射$$ g:\NN\to X $$使得$$ \sum_{n=0}^{\infty}f(g(n)) $$是绝对收敛的，此时$$ \sum_{x\in X}f(x):=\sum_{n=0}^{\infty}f(g(n)) $$。

根据重排列命题1，不同的$$ g $$得到的值相同。

- **无限和的富比尼定理**：设$$ f:\NN\times \NN\to \RR $$是使得$$ \sum_{(n,m)\in \NN\times \NN}f(n,m) $$绝对收敛的函数，那么$$ \sum_{n=0}^{\infty}(\sum_{m=0}^{\infty}f(n,m))=\sum_{(n,m)\in \NN\times \NN}f(n,m)=\sum_{(m,n)\in \NN\times \NN}f(n,m)=\sum_{m=0}^{\infty}(\sum_{n=0}^{\infty}f(n,m)) $$。

证明：第二个等号，令双射$$ h(x,y)=(y,x) $$，再根据重排列命题1可得证；先考虑$$ f(n,m)\ge 0 $$的情况。第一个等号和第三个等号证法相同：令$$ L=\sum_{(n,m)\in \NN\times \NN}f(n,m) $$，要证明左式收敛于$$ L $$。

先证明左式小于等于$$ L $$。利用序列上下确界命题1（无穷递增数列收敛于最小上界），设双射$$ h:\NN\to \NN\times \NN $$，$$ L $$也是上界，那么对于任何一个有限集$$ X\subseteq \NN\times \NN $$，存在$$ M $$满足对所有$$ (n,m)\in X $$有$$ h^{-1}(n,m)\le M $$，$$ \sum_{(n,m)\in X}f(n,m)\le \sum_{i\le M}f(h(i))\le L $$。利用有限级数的习题（有限级数和求极限可交换次序）和无限极数的定义，$$ \sum_{n=0}^{N}\sum_{m=0}^{\infty}f(n,m)=\sum_{m=0}^{\infty}\sum_{n=0}^{N}f(n,m) $$，对于任意$$ M $$，根据有限级数的富比尼定理可知，$$ \sum_{m=0}^{M}\sum_{n=0}^{N}f(n,m)=\sum_{(n,m)\in X}f(n,m)\le L $$，再根据最小上界的定义，$$ M\to \infty $$时的无限极数收敛，$$ \sum_{n=0}^{N}\sum_{m=0}^{\infty}f(n,m)\le L $$，再次利用最小上界的定义可知，$$ N\to \infty $$时的无限极数也收敛，即$$ \sum_{n=0}^{\infty}\sum_{m=0}^{\infty}f(n,m)\le L $$。

再证明对于任意$$ \varepsilon\gt 0 $$，有左式大于$$ L-\varepsilon $$。这里的证明方法类似于重排列命题1，将集合看作前缀的子集直接放缩为前缀。根据最小上界的定义可知，存在有限集$$ X\subseteq \NN\times \NN $$使得$$ \sum_{(n,m)\in X}f(n,m)\gt L-\varepsilon $$，存在集合$$ Y=\{(n,m)\in \NN\times \NN:n\le N,m\le M\} $$使得$$ X\subseteq Y $$，那么$$ \sum_{n=0}^{N}\sum_{m=0}^{M}f(n,m)=\sum_{(n,m)\in Y}f(n,m)\ge \sum_{(n,m)\in X}f(n,m)\gt L-\varepsilon $$。进而有$$ \sum_{n=0}^{\infty}\sum_{m=0}^{\infty}f(n,m)\ge \sum_{n=0}^{N}\sum_{m=0}^{\infty}f(n,m)\ge \sum_{n=0}^{N}\sum_{m=0}^{M}f(n,m)\gt L-\varepsilon $$。

对于$$ f(n,m) $$有正有负的情况，按照正负分别求出极限$$ f^{+} $$和$$ f^{-} $$，求正极限时把负数项设成0，负极限同理，利用上界可知都收敛，利用极限定律1可知极限为$$ f^{+}-f^{-} $$。

注意到如果多重和式绝对收敛，每次可以交换任意两个相邻的求和符号，那么最终可以将求和符号任意重排列。

因为不可数集的和无法用序列极限定义，我们尝试使用集合来定义：

- **任意集合上级数的定义**：对于集合$$ X $$，设$$ f:X\to \RR $$，级数$$ \sum_{x\in X}f(x) $$绝对收敛当且仅当$$\sup\{\sum_{x\in A}\vert f(x)\vert :A\subseteq X,A是有限集\} $$不为$$ \infty $$

若$$ X $$是至多可数的，$$\sup\{\sum_{x\in A}\vert f(x)\vert :A\subseteq X,A是有限集\}=\sum_{x\in A}f(x) $$(将两边都利用定义展开到$$\sup $$和有限级数即可)，因此这个定义是可行的。

- **引理1**：对集合$$ X $$，设$$ f:X\to \RR $$，级数$$ \sum_{x\in X}f(x) $$绝对收敛，则集合$$ \{x\in X:f(x)\ne 0\} $$是至多可数的。

证明：令实数$$ M=\sup\{\sum_{x\in A}\vert f(x)\vert :A\subseteq X,A是有限集\} $$，对任意正整数$$ n\gt 0 $$，设集合$$ A_n=\{x\in X:\vert f(x)\vert \gt 1/n\} $$，$$ M\ge \sum_{x\in A_n}\vert f(x)\vert \gt \sum_{x\in A_n}1/n $$，因此$$ A_n $$是有限集，利用可数性习题2，可知$$ \bigcup_{n=1}^{\infty}A_n $$是至多可数的，而任意$$ \vert f(x)\vert \gt 0 $$，必有$$ x\in \bigcup_{n=1}^{\infty}A_n $$，因此集合$$ \{x\in X:f(x)\ne 0\} $$与$$ \bigcup_{n=1}^{\infty}A_n $$基数相同。

通过这个引理，我们又定义了不可数集的级数的值：$$ \sum_{x\in X}f(x):=\sum_{x\in X:f(x)\ne 0}f(x) $$。我们可以用这个定义得到无限集的级数定律，包括(a)绝对收敛的级数相加，(b)乘常数，(c)不交集合的并的级数等于集合的级数之和，(d)可以利用双射复合：$$ \sum_{y\in Y}f(\phi(y))=\sum_{x\in X}f(x) $$，其中$$ \phi:Y\to X $$是双射。(d)的可以用重排列命题2来证明。

- **引理2**：若$$ \sum_{n=0}^{\infty}a_n $$收敛但不绝对收敛，则令$$ A_+=\{n\in \NN:a_n\ge 0\} $$，$$ A_-=\{n\in \NN:a_n\lt 0\} $$，则级数$$ \sum_{n\in A_+}a_n $$和$$ \sum_{n\in A_-}a_n $$都不收敛。

证明：反证。利用无限集的级数定律(c)，原级数,$$ A_+ $$，$$ A_- $$三者中若两者收敛可得第三者收敛。

- **定理**：设$$ \sum_{n=0}^{\infty}a_n $$收敛但不绝对收敛，设$$ L $$是任一个实数，存在双射$$ f:\NN\to \NN $$使得$$ \sum_{n=0}^{\infty}a_{f(m)} $$收敛于$$ L $$。

证明：思路是按$$ a $$的正负分成两个集合，当目前的和不超过$$ L $$时就加正的，超过了$$ L $$就加负的。令$$ A_+=\{n\in \NN:a_n\ge 0\} $$，$$ A_-=\{n\in \NN:a_n\lt 0\} $$，如果$$ \sum_{i=0}^{m-1}a_{f(i)}\lt L $$，则$$ f(m):=min\{n\in A_{+}:\forall i\lt m有n\ne n_i\} $$；同理如果$$ \sum_{i=0}^{m-1}a_{f(i)}\ge L $$，$$ f(m):=min\{n\in A_{-}:\forall i\lt m有n\ne n_i\} $$。由引理2知，$$ \sum_{n\in A_{+}}a_n $$和$$ \sum_{n\in A_{-}}a_n $$都不收敛，因此$$ A_{+} $$和$$ A_{-} $$都是无限集，上述构造的$$ f $$存在，并且由于$$ A_+ $$删除任何一个有限子集后都不收敛，两种情况都会无限次出现，$$ f:\NN\to \NN $$是双射。利用零判别法，$$ \lim_{n\to \infty}a_n=0 $$，再根据极限的定义可以得到$$ \lim_{m\to \infty}a_{f(m)}=0 $$。再利用级数收敛的定义，设$$ \varepsilon\gt 0 $$，存在$$ N\ge 0 $$，$$ \forall m\ge N $$有$$ \vert a_{f(m)}\vert \le \varepsilon $$，那么存在$$ N'\ge N $$，$$ \vert \sum_{i=0}^{N'}a_{f(i)}-L\vert \le \varepsilon $$（可利用反证法），再归纳证明，$$ \forall m\ge N' $$有$$ \vert \sum_{i=0}^{m}a_{f(i)}-L\vert \le \varepsilon $$。

也可以通过重排列使得级数发散：取任一个$$ \varepsilon\gt 0 $$，根据收敛序列有界，存在$$ M $$满足所有$$ a_n\ge M $$，设当前部分和为$$ S $$，如果$$ S+M\ge \varepsilon $$，则加入一个负数($$ f(m):=min\{n\in A_{-}:\forall i\lt m有n\ne n_i\} $$)，并令$$ S=0 $$；否则加入一个正数。因为每加入一个负数，总和至少增加$$ \varepsilon $$，最后收敛于正无穷。

什么发散的级数$$ \sum_{n=0}^{\infty}a_n $$可以通过重排列得到收敛的级数：$$ A_+ $$和$$ A_- $$的级数必须都发散，且存在排列$$ g:\NN\to A_+ $$使得$$ \lim_{n\to \infty}a_{g(n)}=0 $$($$ A_- $$同理)。

证明：必要性设存在$$ f $$使得$$ \sum_{n=0}^{\infty}a_{f(n)} $$收敛，令$$ g(n)=f(min\{m\in \NN:a_{f(m)}\gt 0且\forall i\lt n有g(i)\ne m\}) $$可得$$ \lim_{n\to \infty}a_{g(n)}=0 $$。充分性可利用上述定理的证明方式，证明其可通过重排列收敛于任意实数。

综合这几个结论，级数的重排列可能有三种情况(a)任意重排列都收敛（绝对收敛） (b)既可以得到发散的级数也可以得到收敛的级数($$ A_+ $$和$$ A_- $$满足上述条件，如果收敛可以使其发散，如果发散可以使其收敛) (c)任意重排列都发散（其他情况）

## 不可数集

注：幂集公理的引理已经证明了一个集合的所有子集构成一个集合，可以通过对集合的基数归纳可证明集合$$ X $$的子集个数为$$ 2^{\#(X)} $$，因此我们把$$ X $$的所有子集构成的集合记做$$ 2^X $$。

- **康托尔定理**：$$ X $$是任一个集合，$$ X $$和$$ 2^X $$基数不同。

证明：反证，存在双射$$ f:X\to 2^X $$，考虑集合$$ A=\{x\in X:x\notin f(x)\} $$和对象$$ x $$满足$$ f(x)=A $$，如果$$ x\in A $$，则$$ x\notin f(x) $$，矛盾；如果$$ x\notin A $$，则$$ x\in f(x) $$，矛盾。

设$$ A=f(x_0) $$，对于$$ x_0\in A $$当且仅当$$ x_0\notin A $$，类似罗素悖论。

- **推论**：$$ 2^\NN $$是不可数集。

证明：$$ 2^\NN $$与$$ \NN $$基数不同，是不可数集或有限集。而$$ \{\{n\}:n\in \NN\} $$是可数集，也是$$ 2^\NN $$的子集，根据基数算数定理2可知$$ 2^\NN $$不是有限集。

为什么不能通过二进制拆分构造$$ \NN $$和$$ 2^\NN $$的双射？因为$$ 2^\NN $$中有无限集，而$$ \NN $$中所有对象都是有限的数。$$ 2^\NN $$中所有无限集通过二进制求和都无法得到一个自然数。

- **推论**：$$ \RR $$是不可数集。

证明：定义$$ f:2^\NN\to \RR $$，$$ f(A)=\sum_{n\in A}2^{-n} $$，对于任意$$ A\ne B $$，找到$$ (A\setminus B)\cup(B\setminus A) $$中的最小元素即可证明$$ f(A)\ne f(B) $$，因此$$ f $$是单射，$$ f(2^\NN) $$与$$ 2^\NN $$基数相同，而$$ f(2^\NN) $$是$$ \RR $$的子集，根据可数性命题1可知，$$ \RR $$是不可数集。

- 习题(施罗德-伯恩斯坦定理)：定义集合$$ A $$的基数小于等于$$ B $$的基数当且仅当存在单射$$ f:A\to B $$，那么如果$$ A $$的基数小于等于$$ B $$的基数，且$$ B $$的基数小于等于$$ A $$的基数，那么$$ A $$和$$ B $$基数相等。

引理：如果集合$$ A\subseteq B $$，且存在单射$$ f:B\to A $$那么$$ f $$是双射。

引理证明（巧妙！）：思路就是如果$$ A\setminus B $$有元素，那么从$$ A\setminus B $$开始，每次将集合$$ S $$变成$$ f(S) $$，如果$$ B $$是有限集一定会导致无法无限进行。令$$ D_0=B\setminus A $$，令$$ D_{n+1}=f(D_{n}) $$，由于$$ f $$是单射，对$$ n $$归纳可证明对每个$$ n $$都满足$$ D_n $$与之前的$$ D_m(m\lt n) $$不相交。当$$ x\in \bigcup_{n=0}^{\infty}D_n $$时，$$ g(x)=f(x) $$，当$$ x\notin \bigcup_{n=0}^{\infty}D_n $$时，$$ g(x)=x $$。那么$$ g $$是$$ A\to B $$的满射。因此$$ A $$和$$ B $$基数相同，$$ f $$是双射。（证明也可用函数的$$ n $$次复合表述：为当存在$$ n $$满足$$ x\in f^n(A\setminus B) $$时，令$$ g(x)=f(x) $$，否则$$ g(x)=x $$）

原定理证明：设存在单射$$ f:A\to B $$和$$ g:B\to A $$，直接构造$$ f(A)\subseteq B $$，存在单射$$ h:B\to f(A) $$，$$ h=f\circ g $$。利用引理可得$$ f(A)=B $$，$$ f $$是双射。

## 选择公理

- **无限笛卡尔积的定义**：对集合$$ I $$，若任意$$ \alpha\in I $$都满足$$ X_{\alpha} $$是一个集合，定义笛卡尔积$$ \prod_{\alpha\in I}X_{\alpha}=\{(x_{\alpha})_{\alpha\in I}\in (\bigcup_{\beta\in I}X_{\beta})^I:x_{\alpha}\in X_{\alpha}对所有\alpha\in I均成立\} $$

- **选择公理**：对集合$$ I $$，若任意$$ \alpha\in I $$都满足$$ X_{\alpha} $$是一个非空集合，那么集合$$ \prod_{\alpha\in I}X_{\alpha} $$非空，即存在$$ (x_{\alpha})_{\alpha\in I} $$，满足对每个$$ \alpha\in I $$都有$$ x_{\alpha}\in X_{\alpha} $$

选择公理并不能由有限选取引理直接得到，例如对于不可数集$$ I $$，我认为我们不知道该怎样构造出$$ x_{\alpha} $$，因为即便我们的数学归纳法可以归纳到无穷大（实际上并不能），我们也不知道该以什么样的顺序来取$$ \alpha $$使得所有$$ x_{\alpha} $$的值都被指定了（因为不存在一个$$ \NN\to I $$的双射）。

- **引理**：$$ E $$是实数集的子集，且$$\sup(E)\lt \infty $$，那么存在一个所有项$$ a_n\in E $$的序列$$ (a_n)_{n=1}^{\infty} $$使得$$ \lim_{n\to \infty}a_n=\sup(E) $$

证明：对任意自然数$$ n $$，令$$ X_n=\{x\in E:\sup(E)-1/n\le x\le\sup(E)\} $$，对$$ X_n $$使用选择公理，得到$$\sup(E)-1/n\le a_n\le\sup(E) $$，再使用夹逼定理即可。

习题1：选择公理等价于如下表述，设$$ I $$是集合，对每个$$ \alpha\in I $$有$$ X_{\alpha} $$是一个集合，且对任意不同的$$ \alpha,\beta\in I $$都有$$ X_{\alpha}\cap X_{\beta}=\emptyset $$，存在一个集合$$ Y $$使得对所有$$ \alpha\in I $$有$$ \#(X_{\alpha}\cap Y)=1 $$。

证明：选择公理可直接得到命题正确；而根据这个命题，我们可以令$$ X_{\alpha}'=\{\alpha\}\times X_{\alpha} $$，可使$$ X_{\alpha}' $$彼此不交，再求$$ Y $$，可以证明选择公理。

习题2：选择公理等价于如下表述，若存在满射$$ g:B\to A $$，则存在单射$$ f:A\to B $$。

证明：根据选择公理，如果存在满射，在$$ f^{-1}{a} $$中选择可得单射；要证明选择公理，可转化为证明习题1的表述，对$$ x\in X_{\alpha} $$，令$$ f(x)=\alpha $$，则$$ f:\bigcup_{\alpha\in I}X_{\alpha}\to I $$是满射，存在单射$$ g $$，即对每个$$ \alpha\in I $$有$$ g(\alpha)\in X_{\alpha} $$，令$$ Y=\{g(\alpha):\alpha\in I\} $$即可。

可直接构造证明存在单射可得存在满射，据此定义$$ A $$的基数小于等于$$ B $$。

## 有序集

- **偏序集的定义**：偏序集时附加了关系$$ \le_{X} $$的集合$$ X $$，即对任一个两个对象$$ x,y\in X $$，$$ x\le_{X} y $$是真命题或假命题，并且这种关系遵守以下三个性质。(a)自反性：对任意的$$ x\in X $$，有$$ x\le_{X} x $$；(b)反对称性：如果$$ x,y\in X $$，$$ x\le_{X} y $$，$$ y \le_{X} x $$，则$$ x=y $$；(c)传递性：如果$$ x,y,z\in X $$满足$$ x\le_{X} y $$且$$ y\le_{X} z $$，则$$ x\le_{X} z $$。称$$ \le_{X} $$为序关系。如果$$ x\le_{X} y $$且$$ x\ne y $$，记做$$ x\lt _{X} y $$。

DAG上的可达性就就是典型的偏序关系（反对称性和传递性决定了不能有环）。

- **全序集的定义**：设$$ X $$是一个偏序集，且$$ \le_{X} $$是$$ X $$上的序关系，若对任意的$$ y,y'\in Y $$都有$$ y\le_{X} y' $$或$$ y'\le_{X} y $$，则$$ X $$的子集$$ Y $$是全序的。如果$$ X $$是全序的，则称$$ X $$是附加了序关系$$ \le_{X} $$的全序集。

全序集就对应一条链上的可达性。

- **最大元素和最小元素的定义**：设$$ X $$是偏序集，$$ Y $$是$$ X $$的子集，且如果$$ y\in Y $$且不存在$$ y'\in Y $$使得$$ y'\lt y $$则称$$ y $$是$$ Y $$的最小元素；如果不存在$$ y'\in y $$使得$$ y'\gt y $$则称$$ y $$是$$ Y $$的最大元素。

- 习题1：全序集的任一个有限的非空子集都恰有一个最小元素和最大元素。对子集的基数归纳即可。
- 习题2：全序集的任一个非空子集都有最小元素和最大元素，则该集合是有限集。

证明：设全序集为$$ Y $$。反证，令$$ S_0=Y $$，$$ a_0 $$为$$ S_0 $$中最小元素，$$ S_n=\{x\in Y:x\gt a_{n-1}\} $$，$$ a_n $$是$$ S_n $$中最小元素。利用无限集可得$$ S_n\ne \emptyset $$，则$$ a $$是无穷单调递增的数列。对于集合$$ A=\{x\in Y:\exists n\in \NN,a_n=x\} $$，$$ A $$中有最大元素，矛盾。（如果$$ S $$是不可数集，其实$$ a $$不可能取遍$$ Y $$中所有元素，所以只能说$$ A $$是$$ Y $$的子集）

- **良序集的定义**：设$$ X $$是偏序集，$$ Y $$是$$ X $$的一个全序子集，如果$$ Y $$的每个非空子集都有最小元素，则$$ Y $$是良序的。

$$ \NN $$是良序集。我自己发现了一个不可数良序集的例子：设$$ 2^\NN $$是一个全序集，$$ X\le Y $$定义为$$ X\setminus Y $$的最小元素$$ a $$和$$ Y\setminus X $$的最小元素$$ b $$满足$$ a\le b $$(这里认为空集的最小元素是$$ +\infty $$)。其实就是从小到大写出来的序列$$ X $$的字典序更小。对于任意$$ 2^\NN $$的子集$$ S $$，只需要每次选出最小自然数使得存在一个$$ S $$中的集合包含它，然后在$$ S $$中删去不包含它的集合。具体地，令$$ S_0=S $$，$$ a_n=\min\{x\in \NN,x\gt a_{n-1}:\exists Y\in S_n,x\in Y\} $$，$$ S_{n+1}=\{A\in S_n:a_n\in A\} $$。那么对$$ n $$归纳可得：对于每个$$ n $$，任取一个$$ A\in S_{n+1} $$，任取$$ 0\le m\le n $$，都有$$ a_m\in A $$。且对于任意$$ A\in S_n $$和$$ B\notin S_n $$，都有$$ A\le B $$。如果存在$$ S_{n+1}=\emptyset $$（最小集合是有限集），那么$$ \{a_n:0\le m\le n\} $$即为所求；如果不存在，根据选择公理，$$ \{a_n:n\ge 0\} $$即为所求。

- 习题3：设$$ X $$是偏序集，$$ Y $$和$$ Y' $$都是$$ X $$的良序子集，证明$$ Y\cup Y' $$是良序的当且仅当它是全序的。

证明：对于任意$$ A $$是$$ Y\cup Y' $$的子集，$$ A=(A\cap Y)\cup (A\setminus Y) $$，其中$$ A\cap Y $$是$$ Y $$的子集，$$ A\setminus Y $$是$$ Y' $$的子集。如果$$ Y\cup Y' $$是全序的，$$ A\cap Y $$的最小值和$$ A\setminus Y $$的最小值中的较小值就是$$ A $$的最小值。

- **强归纳原理**：设$$ X $$是一个以$$ \le_{X} $$为序关系的良序集，设$$ P(n) $$是关于$$ n\in X $$的性质，假设对每一个$$ n\in X $$，如下蕴含关系的命题都成立：如果对所有$$ m\lt _{X} n $$都有$$ P(m) $$为真，则$$ P(n) $$为真。那么对所有$$ n\in X $$，$$ P(n) $$均为真。

蕴含关系中，如果前提不为真，命题仍然是空虚的真，因此对于最小元素$$ x $$，$$ P(x) $$自动为真。

证明：设$$ Y=\{n\in X:P(n)为假\} $$，由于$$ X $$是良序集且$$ Y $$是$$ X $$的子集，因此$$ Y $$中存在最小元素$$ n $$，对于所有$$ m\lt _{X} n $$，有$$ m\notin Y $$，因此$$ P(m) $$为真，矛盾。

- **上界和严格上界的定义**：设$$ X $$是一个以$$ \le $$为序关系的偏序集，$$ Y $$是$$ X $$的一个子集，如果$$ x\in X $$，称$$ x $$是$$ Y $$的一个上界，当且仅当对所有$$ y\in Y $$都有$$ y\le x $$。如果$$ x\notin Y $$，则$$ x $$是$$ Y $$的严格上界。

- **引理**：设$$ X $$是一个以$$ \le $$为序关系的偏序集，$$ x_0 $$是$$ X $$一个元素，那么存在$$ X $$的一个良序子集$$ Y $$使得x_0$$ 为 $$Y$$ 的最小元素且 $$Y$没有严格上界。

这个引理有“弱化版”：去掉$$ x_0 $$的限制，变成“任何一个偏序集存在一个良序子集没有严格上界”。

其实这些命题都很容易有直观的认识，而严谨的证明就是使用公理定理讲这个“感受”理性地写出来。例如从$$ \{x_0\} $$开始不断地在集合中加入严格上界，但这并不严谨，例如实数集中$$ \{0,1/2,3/4,7/8,...\} $$始终有严格上界。这个证法不合适其实是因为虽然构造的集合是无限集，但构造的过程中它只考虑了有限集的严格上界，因为添加的任何一个数都是有限集的严格上界。如果再追问一句，整个这个集合$$ \{0,1/2,3/4,7/8,...\} $$的严格上界是什么，就会得到一个不小于$$ 1 $$的数。下面的证法就利用并集公理的无穷并集，考虑了整个集合的严格上界。

证明（巧妙！）：反证。利用选择公理，对每个以$$ x_0 $$为最小元素的良序子集$$ Y $$指定严格上界$$ s(Y)\in X $$。称$$ X $$的子集$$ Y $$是好的，当且仅当$$ Y $$是良序的，最小元素是$$ x_0 $$，且对所有$$ x\in Y\setminus\{x_0\} $$，都有$$ s(\{y\in Y:y\lt x\})=x $$。令$$ \Omega=\{Y\subseteq X:Y是好的\} $$，则$$ Y_{\infty}:=\bigcup \Omega $$即为所求。由于每个$$ Y\in \Omega $$都有$$ x_0 $$是$$ Y $$的最小元素，显然$$ x_0 $$是$$ Y_{\infty} $$的最小元素。还需证明$$ Y_{\infty} $$是良序的和$$ Y_{\infty} $$没有严格上界。

（可以观察到，好的子集都是由$$ \{x_0\} $$不断加入$$ s $$值得到的，因此好的子集应该有“前缀”关系，接下来先证明包含关系和“前缀”关系。）先证明如下引理：如果$$ Y $$和$$ Y' $$是两个好的子集，可以通过强归纳原理，证明对任意$$ a\in Y\cap Y' $$，都有$$ \{y\in Y:y\le a\}=\{y\in Y':y\le a\}=\{y\in Y\cap Y':y\le a\} $$：对$$ a $$归纳，可以通过反证法得到$$ \{y\in Y:y\lt a_0\}=\{y\in Y':y\lt a_0\}=\{y\in Y\cap Y':y\lt a_0\} $$，否则例如$$ b $$属于其中某个而不属于另一个，则$$ b\lt a_0 $$，$$ a=b $$时三集合相等，矛盾。

进而可得$$ Y\cap Y' $$的最小元素与$$ Y $$相同，且任何一个子集都是$$ Y $$的子集，因此$$ Y\cap Y' $$又是良序的，若$$ x\in Y\cap Y' $$，有$$ \{y\in Y\cap Y':y\lt x\}=\{y\in Y:y\lt x\} $$，那么$$ s(\{y\in Y\cap Y':y\lt x\})=s(\{y\in Y:y\lt x\})=y $$，综上三个条件可得$$ Y\cap Y' $$也是好的。注意到，如果$$ Y\setminus Y' $$非空，考虑对任意$$ x\in Y' $$且$$ x\lt min(Y'\setminus Y) $$，有$$ x\in Y $$，那么$$ x\in Y\cap Y' $$；且对于任意$$ x\in Y' $$且$$ x\ge min(Y'\setminus Y) $$，都有$$ x\notin Y $$，否则$$ x\in Y\cap Y' $$，而$$ min(Y'\setminus Y)\le x $$属于$$ Y' $$却不属于$$ Y $$，矛盾。进而得到$$ Y\cap Y'=\{x\in Y':x\lt min(Y'\setminus Y)\} $$。于是$$ s(Y\cap Y')=min(Y'\setminus Y) $$。同理可得$$ s(Y\cap Y')=min(Y\setminus Y') $$，如果$$ Y\setminus Y' $$和$$ Y'\setminus Y $$均非空，由于其不交，$$ s(Y\cap Y') $$同时等于两个不等的值，矛盾。所以$$ Y\subseteq Y' $$或$$ Y'\subseteq Y $$。进一步可以证明，不妨设$$ Y\subseteq Y' $$，$$ x\in Y'\setminus Y $$，$$ x $$是$$ Y $$的严格上界：反证，设$$ x'\in Y $$且$$ x'\gt x $$，则$$ x'\in Y' $$，与引理矛盾。

下证$$ Y_{\infty} $$是良序的。有了这个好的子集的包含关系，如果$$ x,x'\in Y_{\infty} $$，则有$$ x\in Y $$和$$ x'\in Y' $$，不妨设$$ Y\subseteq Y' $$，则有$$ x,x'\in Y' $$，根据$$ Y' $$是良序的，也是全序的，得到$$ x $$与$$ x' $$之间有大小关系，进而得到$$ Y_{\infty} $$是全序的。对于任意$$ Y_{\infty} $$的非空子集$$ A $$，存在$$ a\in A $$，存在$$ a\in Y $$，$$ Y $$是好的。那么令$$ b=min(A\cap Y) $$，要证$$ b $$是$$ A $$的最小元素。任取$$ x\in A $$，存在$$ x\in Y' $$。如果$$ x\in (Y'\cap Y)\cap A $$，有$$ x\ge b $$；如果$$ x\in (Y'\setminus Y)\cap A $$，那么$$ x $$是$$ Y $$的严格上界，$$ x\ge b $$。

最后，$$ Y_{\infty} $$是好的，那么存在严格上界$$ s(Y_{\infty}) $$，根据习题3，$$ Y_{\infty}\cup \{s(Y_{\infty})\} $$也是好的，因此该集合包含在$$ Y_{\infty} $$中，矛盾。

- **佐恩引理（超限归纳原理）**：设$$ X $$的每个全序子集$$ Y $$都有一个上界，那么$$ X $$至少有一个最大元素。

证明：反证，如果$$ X $$没有最大元素，那么每个$$ X $$的全序子集都存在严格上界（否则该子集的最大元素就是$$ X $$的最大元素）。而根据上一个引理的“弱化版”，存在一个良序集，良序集是全序集，矛盾。

# 第9章 $$ \RR $$上的连续函数

## 实直线的子集

可以按照常识定义区间$$ [a,b] $$，$$ (a,b) $$，$$ [a,b) $$，$$ (a,b] $$，其中$$ a,b\in \RR^* $$是广义实数。当区间表示空集或单个元素时，称这个区间是退化的。

- **$$ \varepsilon $$-附着点的定义**：设$$ X $$是$$ \RR $$的子集，$$ \varepsilon\gt 0 $$，$$ x\in \RR $$，称$$ x $$是$$ \varepsilon $$-附着于X的，当且仅当存在$$ y\in X $$是$$ \varepsilon $$-接近于$$ x $$的。
- **附着点的定义**：设$$ X $$是$$ \RR $$的子集，$$ x\in \RR $$，称$$ x $$是$$ \varepsilon $$-附着于$$ X $$的，当且仅当对任意$$ \varepsilon\gt 0 $$，都有$$ x $$是$$ \varepsilon $$-附着于$$ X $$的。
- **闭包的定义**：设$$ X $$是$$ \RR $$的子集，$$ X $$的闭包记做$$ \overline{X} $$，表示$$ X $$的全体附着点构成的集合。

- **闭包的初等性质**：(a)$$ X\subseteq \overline{X} $$，(b)$$ \overline{X\cup Y}=\overline{X}\cup \overline{Y} $$，(c)$$ \overline{X\cap Y}\subseteq \overline{X}\cap \overline{Y} $$，(d)若$$ X\subseteq Y $$则$$ \overline{X}\subseteq \overline{Y} $$。

(b)的右包含于左显然，左包含于右需要反证。(c)的包含改为相等的反例：两个开区间$$ (1,2) $$和$$ (2,3) $$

- 习题1：设$$ X $$是$$ \RR $$的子集，$$ X\subseteq Y\subseteq \overline{X} $$，那么必有$$ \overline{Y}=\overline{X} $$

证明：首先根据闭包性质(d)得到右包含于左，左包含于右设$$ y\in \overline{Y} $$，$$ \varepsilon\gt 0 $$，可以找到$$ y'\in Y $$且$$ y'\varepsilon/2 $$-接近于$$ y $$，而$$ y'\in \overline{X} $$，可以找到$$ x\in X $$且$$ x\varepsilon $$-接近于$$ y' $$，因此$$ x\varepsilon $$-接近于$$ y $$。

另外也很容易证明对于实数$$ a\lt b $$，$$ [a,b] $$，$$ (a,b) $$，$$ [a,b) $$，$$ (a,b] $$的闭包都是$$ [a,b] $$；$$ \QQ $$的闭包是$$ \RR $$：由实数的序命题3(对任意实数$$ x\lt y $$，存在有理数$$ q $$满足$$ x\lt q\lt y $$)可知对$$ x\in \RR $$均存在有理数$$ q $$满足$$ x-\varepsilon\lt q\lt x+\varepsilon $$。

- **引理**：设$$ X $$是$$ \RR $$的子集，$$ x\in \RR $$，那么$$ x $$是$$ X $$的附着点当且仅当存在一个序列$$ (a_n)_{n=0}^{\infty} $$满足任意对所有$$ n\ge 0 $$有$$ a_n\in X $$，且收敛于$$ x $$。

证明：如果是附着点，类似选择公理的引理的证明思路（利用$$ 1/n $$收敛于0），设$$ S_n=\{x'\in X:\vert x'-x\vert \le 1/n\} $$，再利用选择公理证明$$ a_n\in S_n $$存在；如果存在序列，利用序列收敛的定义即可。

- **闭集的定义**：如果$$ \overline{E}=E $$，那么$$ E\subseteq \RR $$是闭的，即$$ E $$的所有附着点都在$$ E $$中。

- 习题2：如果$$ Y $$包含$$ X $$且$$ Y $$是闭集，那么$$ Y $$也包含$$ \overline{X} $$。

证明：利用习题1可证明闭集的闭包是本身（$$ X\subseteq \overline{X} $$，那么$$ \overline{\overline{X}}=\overline{X}) $$，再利用闭包的性质(d)可知$$ Y=\overline{Y} $$包含$$ \overline{X} $$

- 习题3：闭集的并和交都是闭集。

证明：并可直接用性质(b)。$$ \overline{\overline{X}\cap \overline{Y}}=\overline{\overline{X}}\cap \overline{\overline{Y}}=\overline{X}\cap \overline{Y} $$。交利用性质(c)可知$$ \overline{\overline{X}\cap \overline{Y}}\subseteq \overline{X}\cap \overline{Y} $$，再利用性质(a)得证。如果是无限个集合的交集，可以直接反证得到所有集合都不是闭集；如果是无限个集合的并集，注意到开区间可以表示为无限个单元素集的并集，无限个闭集的并不一定是闭集。

- **推论**：$$ X $$是闭的当且仅当任意一个由$$ X $$中元素构成的收敛的序列$$ (a_n)_{n=0}^{\infty} $$都满足$$ \lim_{n\to \infty}a_n\in X $$。
可直接通过引理得到这个推论。

- **极限点的定义**：设$$ X $$是$$ \RR $$的子集，称$$ x $$是$$ X $$的极限点当且仅当$$ x $$是$$ X\setminus \{x\} $$的附着点；称$$ x $$是$$ X $$的孤立点当且仅当$$ x\in X $$且$$ x $$不是$$ X\setminus \{x\} $$的附着点

那么$$ X $$的闭集中的任一点都是极限点和孤立点之一。

对于区间$$ [a,b] $$，$$ (a,b) $$，$$ [a,b) $$，$$ (a,b] $$，可以证明$$ [a,b] $$中的任何$$ x\lt b $$都是极限点：取一个序列$$ (x+1/n)_{n=N}^{\infty} $$，根据实数的序命题2（对任一实数x存在自然数$$ N\gt x $$），一定存在一个$$ N $$满足$$ x+1/N\le b $$，对于$$ x=b $$用序列$$ (x-1/n)_{n=N}^{\infty} $$即可。

- **有界集合的定义**：如果存在实数$$ M\gt 0 $$使得$$ X\subseteq [-M,M] $$，那么$$ X $$是有界的

- **海涅-博雷尔定理**：设$$ X $$是$$ \RR $$的一个子集，$$ X $$是闭的且是有界的，当且仅当任一个由$$ X $$中元素构成的序列$$ (a_n)_{n=0}^{\infty} $$存在一个子序列收敛于$$ X $$中的某个数$$ L $$。

证明：对左蕴含右，根据子序列的极限中的波尔查诺-维尔斯特拉斯定理可知存在一个子序列收敛，再利用引理可知收敛于$$ X $$的附着点；对右蕴含左，利用推论可得$$ X $$是闭的，再使用反证法，若$$ X $$无界，令$$ S_n=\{x\in X:\vert x\vert \gt n\} $$，再利用选择公理得到$$ (a_n)_{n=0}^{\infty} $$，它的任一个子序列都不收敛。

- 习题4：$$ \RR $$的任一有限子集都是闭的且是有界的。

证明：利用海涅-博雷尔定理，先通过反证法得到$$ a_n $$中有某个$$ X $$中的元素$$ x $$出现了无穷次，那么$$ x $$的项构成的子序列收敛于$$ x $$。

## 函数的极限值

- **函数在一点处收敛的定义**：设$$ X $$是$$ \RR $$的一个子集，$$ f:X\to \RR $$，$$ E $$是$$ X $$的一个子集，$$ x_0 $$是$$ E $$的附着点，称$$ f $$在点$$ x_0 $$处沿着$$ E $$收敛于$$ L $$，记做$$ \lim_{x\to x_0;x\in E}f(x)=L $$，当且仅当对任意$$ \varepsilon\gt 0 $$，存在一个$$ \delta\gt 0 $$，满足对任意$$ x\in E $$且$$ \vert x-x_0\vert \lt \delta $$，满足$$ \vert f(x)-L\vert \le \varepsilon $$。

书上先定义了$$ \varepsilon $$-接近的和局部$$ \varepsilon $$-接近的，将这些定义全部展开得到上述定义。我认为这样定义是为了加深对定义的理解，如果展开后可以感受到这个定义的实际意义，那么展开定义更加简洁。

当$$ x_0\in E $$时，实际上$$ \lim_{x\to x_0;x\in E}f(x)=f(x_0) $$，$$ x_0\notin E $$时更有意义，我们用$$ x\to x_0;x\in X $$来简化表示$$ x\to x_0;x\in X\setminus\{x_0\} $$，因此这里定义了符号$$ \lim_{x\to x_0} $$，表示的是$$ \lim_{x\to x_0;x\in \RR\setminus\{x_0\}} $$，这个符号区别于$$ \lim_{n\to \infty} $$，在命题1中将会看到$$ \lim_{n\to \infty}f(a_n) $$是一个数列的极限，而$$ \lim_{x\to x_0}f(x) $$是无穷个极限相等的数列的极限。

- **命题1**：$$ X $$是$$ \RR $$的一个子集，$$ f:X\to \RR $$，$$ E $$是$$ X $$的一个子集，$$ x_0 $$是$$ E $$的附着点，那么$$ f $$在$$ x_0 $$处沿着$$ E $$收敛于$$ L $$，当且仅当对任意由$$ E $$中的元素构成且收敛于$$ x_0 $$的序列$$ (a_n)_{n=0}^{\infty} $$满足$$ (f(a_n))_{n=0}^{\infty} $$收敛于$$ L $$。

证明：左蕴含右，对任意$$ \varepsilon\gt 0 $$，存在$$ \delta\gt 0 $$，而存在$$ N\ge 0 $$满足对任意$$ n\ge N $$有$$ \vert a_n-x\vert \lt \delta $$，那么就对任意$$ n\ge N $$有$$ \vert f(a_n)-L\vert \le \varepsilon $$；右蕴含左很难直接证，因为很难证明$$ \vert x-x_0\vert \lt \delta $$时都成立，使用反证，存在$$ \varepsilon $$，令$$ S_n=\{x\in \RR:\vert x-x_0\vert \lt 1/n且\vert f(x)-L\vert \gt \varepsilon\} $$，利用选择公理得到数列$$ a_n $$。

利用这个命题和实直线子集的引理（存在一个数列收敛于附着点），再根据序列的极限唯一可得函数在一个附着点处沿着同一集合至多一个极限。

利用这个命题和实直线子集的引理，再根据序列的极限定律，可以得到：

- **定理（函数的极限定律）**：如果$$ X $$是$$ \RR $$的一个子集，$$ E $$是$$ X $$的一个子集，$$ x_0 $$是$$ E $$的一个附着点，$$ f:X\to \RR $$在$$ x_0 $$处沿着$$ E $$有极限$$ L $$，$$ g:X\to \RR $$在$$ x_0 $$处沿着$$ E $$有极限$$ M $$，则可以得到函数相加对应在$$ x_0 $$处沿着$$ E $$的极限相加（$$ \lim_{x\to x_0}(f\pm g)(x)=\lim_{x\to x_0}f(x)\pm \lim_{x\to x_0}g(x) $$，相乘，相除，取$$ \max $$和取$$ \min $$都同理。

- 习题1(自己定义上极限$$ \limsup_{x\to x_0}f(x) $$):$$ \limsup_{x\to x_0}f(x)=L $$当且仅当对任意$$ \delta\gt 0 $$都有$$ \max\{f(x):x\in (x_0-\delta,x_0+\delta)\}\ge L $$，且对于任意满足条件的$$ L' $$都有$$ L\ge L' $$。

类似的命题：对于所有收敛于$$ x_0 $$的序列，都有$$ \limsup_{n\to \infty}f(a_n)\le M $$，且对于任意满足条件的$$ M' $$都有$$ M\le M' $$。$$ L=M $$。

证明：对于$$ M\le L $$，对任意$$ a $$，任意$$ N $$，根据收敛序列有界，存在$$ \delta $$满足$$ n\ge N $$都满足$$ \vert a_n-x_0\vert \lt delta $$，有$$ \limsup_{n\to \infty}f(a_n)\le a_N^+\le L $$，因此$$ M\le L $$；对于$$ L\le M $$，令$$ S_n=\{x\in (x_0-1/n,x_0+1/n):f(x)=\max\{f(x):x\in (x_0-1/n,x_0+1/n)\}\} $$，根据选择公理得到存在序列$$ a_n $$，那么$$ a_N^+\ge a_n\ge L $$，$$ \limsup_{n\to \infty}f(a_n)\ge L $$，$$ M\ge L $$。

- 习题2(自己定义极限$$ \limsup_{x\to x_0}f(x)=+\infty $$):任取$$ M $$，存在一个$$ \delta\gt 0 $$，使得任取$$ \vert x-x_0\vert \lt \delta $$满足$$ f(x)\gt M $$。

类似的命题：（先尝试定义序列收敛于正无穷：任取$$ M $$，都存在$$ N\ge 0 $$，满足对任一$$ n\ge N $$都有$$ a_n\ge M $$）对于所有收敛于$$ x_0 $$的序列，都有$$ \lim_{n\to \infty}f(a_n)=+\infty $$

证明于命题1完全相同，先证左蕴含右，再用左的否命题构造数列作为右的反例。

- **命题2**：设$$ X $$是$$ \RR $$的一个子集，$$ E $$是$$ X $$的一个子集，$$ x_0 $$是$$ E $$的一个附着点，$$ f:X\to \RR $$，对任意$$ \delta\gt 0 $$，有$$ \lim_{x\to x_0;x\in E}f(x)=L $$当且仅当$$ \lim_{x\to x_0;x\in E\cap (x_0-\delta,x_0+\delta)}f(x)=L $$。

证明：利用命题1，右边的$$ a $$都可作为左边的$$ a $$，左蕴含右；左边的任意个$$ a $$，都存在$$ N $$满足所有$$ n\ge N $$都有$$ \vert a_n-x_0\vert \lt \delta $$，因此$$ (f(a_n))_{n=0}^{\infty} $$与$$ (f(a_n))_{n=N}^{\infty} $$收敛于同一个数，而由右边的命题可知其收敛于$$ L $$。

- **无限附着点的定义**：$$ X $$是$$ \RR $$的子集，$$ +\infty $$附着于$$ X $$当且仅当对任意$$ M\in \RR $$都存在$$ x\in X $$满足$$ x\gt M $$；$$ -\infty $$附着于$$ X $$当且仅当对任意$$ M\in \RR $$都存在$$ x\in X $$满足$$ x\lt M $$。
- **无限处极限的定义**：$$ X $$是$$ \RR $$的子集且$$ +\infty $$是$$ X $$的附着点，$$ f:X\to \RR $$，称当$$ x\to \infty $$时$$ f(x) $$沿着$$ X $$收敛于$$ L $$，记做$$ \lim_{x\to +\infty;x\in X}f(x)=L $$，当且仅当对任意$$ \varepsilon $$，都存在$$ M $$使得对所有$$ x\in X $$且$$ x\gt M $$都有$$ \vert f(x)-L\vert \le \varepsilon $$。当$$ x\to -\infty $$同理。

函数的极限定律在无限处也同样适用。

无限处极限的定义很类似于序列极限的定义，可以注意到，当$$ X $$是自然数集$$ \NN $$时，两者相等，即$$ \lim_{n\to +\infty;n\in \NN}a_n=\lim_{n\to \infty}a_n $$。

## 连续函数和左右极限

- **连续的定义**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$，设$$ x_0\in X $$，称$$ f $$在$$ x_0 $$处是连续的当且仅当$$ \lim_{x\to x_0;x\in X}f(x)=f(x_0) $$，反之我们称$$ f $$在$$ x_0 $$处是间断的。

利用极限值的命题1也可以得到函数连续的定义等价于：对任意有$$ X $$中元素构成且收敛于$$ x_0 $$的序列$$ (a_n)_{n=0}^{\infty} $$满足$$ \lim_{n\to \infty}f(a_n)=f(x_0) $$。

分别利用函数的极限定律和极限值的命题1易得：

- **定理（算数运算保持连续性）**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$，$$ g:X\to \RR $$，设$$ x_0\in X $$，如果$$ f $$和$$ g $$在$$ x_0 $$处都连续那么$$ f\pm g $$，$$ fg $$，$$ \max(f,g) $$都在$$ x_0 $$处连续，如果$$ g $$在$$ X $$上不为$$ 0 $$，则$$ f/g $$也在$$ x_0 $$处连续。
- **定理（复合运算保持连续性）**：设$$ X $$和$$ Y $$是$$ \RR $$的子集，$$ f:X\to Y $$，$$ g:Y\to \RR $$，设$$ x_0 $$是$$ X $$中的点，如果$$ f $$在$$ x_0 $$处连续，$$ g $$在$$ f(x_0) $$处连续，那么$$ g\circ f:X\to \RR $$在$$ x_0 $$处连续。

那么我们只需要利用$$ \lim_{x\to x_0}c=c $$和$$ \lim_{x\to x_0}x=x_0 $$两个最简单的函数的连续性并结合函数的极限定律就可以证明大量函数的连续性，例如单元多项式函数，绝对值函数$$ \vert x\vert =max(x,-x) $$

指数函数连续的证明($$ y=a^x(a\gt 0) $$）：思路就是转化为证明当$$ \lim_{x\to 0}a^x=1 $$，然后利用$$ \lim_{n\to \infty}x^{1/n}=1 $$。只需考虑$$ a\gt 1 $$的情况。设序列$$ b $$收敛于$$ x_0 $$，对所有$$ \varepsilon\gt 0 $$，要证明存在$$ N\ge 0 $$满足对所有$$ n\ge N $$有$$ \vert a^{b_n-x_0}-1\vert \lt \varepsilon/a^{x_0} $$，利用求极限例3（$$ \lim_{n\to \infty}x^{1/n}=1 $$），令$$ \varepsilon'=\varepsilon/a^{x_0} $$，存在$$ m\gt 0 $$满足$$ 0\lt a^{1/m}-1\lt \varepsilon' $$，那么根据$$ b_n $$收敛于$$ x_0 $$，令$$ N $$就是满足所有$$ n\ge N $$时$$ \vert b_n-x_0\vert \lt 1/m $$的$$ N $$，此时对$$ n\ge N $$若$$ b_n\ge x_0 $$有$$ 0\lt a^{b_n-x_0}-1\lt a^{1/m}-1\lt \varepsilon' $$，若$$ b_n\lt x_0 $$有$$ a^{b_n-x_0}=1/a^{x_0-b_n}\gt 1/(1+\varepsilon')\gt 1-\varepsilon' $$。（用$$ \varepsilon-\delta $$语言的定义来证方法类似）

幂函数连续的证明($$ y=x^a(x\gt 0) $$)：要证$$ \lim_{x\to x_0}(x/x_0)^a=1 $$，设$$ n $$为正整数，根据函数的极限定律可归纳得到$$ \lim_{x\to x_0}(x/x_0)^n=(\lim_{x\to x_0}(x/x_0))^n=1 $$，易得$$ n $$是整数都成立，再利用夹逼定理（将序列极限的夹逼定理扩展到函数极限）得到$$ a $$是实数的情况也成立。

- **左右极限的定义**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$，$$ x_0 $$是$$ X\cap (x_0,+\infty) $$的一个附着点，定义$$ f $$在$$ x_0 $$处的右极限$$ f(x_0+):=\lim_{x\to x_0;x\in X\cup (x_0,+\infty}f(x) $$；类似地若$$ x_0 $$是$$ X\cap (-\infty,x_0) $$的一个附着点，定义左极限$$ f(x_0-):=\lim_{x\to x_0;x\in X\cap (-\infty,x_0)}f(x) $$。

- **命题**：设$$ X $$是包含$$ x_0 $$的子集，并且$$ x_0 $$是$$ X\cap (x_0,+\infty) $$和$$ X\cap (-\infty,x_0) $$的附着点，$$ f:X\to \RR $$在$$ x_0 $$处连续当且仅当$$ f(x_0+) $$和$$ f(x_0-) $$都存在且为$$ f(x_0) $$。

对于右蕴含左，只需要取$$ \delta=min(\delta+,\delta-) $$即可。

那么对于间断点，我们可以按照$$ f(x_0+) $$和$$ f(x_0-) $$来分类：

- **跳跃间断点**：$$ f(x_0+) $$和$$ f(x_0-) $$存在且不相等，如$$ sgn(x) $$的$$ 0 $$处
- **可去间断点**：$$ f(x_0+) $$和$$ f(x_0-) $$存在且相等，但不等于$$ f(x_0) $$，如$$ f(x)=[x\ne 0] $$的$$ 0 $$处
- **渐进间断点**：利用函数极限值习题2的定义，$$ f(x_0+) $$或$$ f(x_0-) $$收敛于$$ +\infty $$或$$ -\infty $$，如$$ f(x)=\vert 1/x\vert $$的$$ 0 $$处
- **振荡间断点**：$$ f(x_0+) $$或$$ f(x_0-) $$不存在且有界，如$$ f(x)=[x\in \QQ] $$的$$ 0 $$处

## 最大值原理

函数$$ f:X\to \RR $$是有界的定义为存在一个$$ M $$，满足$$ x\in X $$都有$$ \vert f(x)\vert \le M $$。

- **引理**：设$$ a\lt b $$，设$$ f:[a,b]\to \RR $$是$$ [a,b] $$上的连续函数，则$$ f $$是一个有界函数。

证明（巧妙！）：开区间和闭区间最本质的区别在于闭区间的闭包是本身，那么思路就是利用连续函数的定义$$ f(x_0)=\lim_{n\to \infty}f(a_n) $$证明序列$$ f(a_n) $$收敛。反证，令$$ S_n=\{x\in [a,b]:\vert f(x)\vert \ge n\} $$，利用选择公理得到$$ a_n $$或者是利用$$ a_n=\sup(S_n) $$，根据海涅-博雷尔定理得到$$ (a_n)_{n=0}^{\infty} $$存在一个子序列$$ (a_{n_j})_{j=0}^{\infty} $$收敛于$$ [a,b] $$内实数$$ L $$，再根据连续函数的定义得到$$ \lim_{j\to \infty}f(a_{n_j})=f(L) $$，而$$ f(a_{n_j})\ge n_j\ge j $$，因此$$ (f(a_{n_j}))_{j=0}^{\infty} $$发散，矛盾。

这个证明用到两个技巧，通过连续函数的定义将找一个点转化为找一个$$ y $$收敛于这个值且$$ x $$也收敛的点列，利用海涅-博雷尔定理去掉$$ x $$也收敛的限制。

- **函数最值的定义**：对$$ f:X\to \RR $$，设$$ x_0\in X $$，如果对所有$$ x\in X $$都有$$ f(x_0)\ge f(x) $$，则称$$ f $$在$$ x_0 $$处取得最大值；如果对所有$$ x\in X $$都有$$ f(x_0)\le f(x) $$，则称$$ f $$在$$ x_0 $$处取得最小值。

- **最大值原理**：设$$ a\lt b $$，$$ f:[a,b]\to \RR $$是$$ [a,b] $$上的连续函数，则$$ f $$在某一点处取得最大值，某一点处取得最小值。

证明：思路类似上一引理，构造一个序列$$ a_n $$使得$$ f(x_0)=\lim_{n\to \infty}f(a_n) $$取得最大值。根据上一引理可知$$ f $$有界，只需要证明存在$$ x_0 $$使得$$ f(x_0)=\sup(f([a,b])) $$。再次利用最小上界存在性的套路，令$$ M=\sup f([a,b]) $$，$$ S_n=\{x\in [a,b]:f(x)\gt M-1/n\} $$，利用选择公理或$$\sup $$得到$$ a_n $$，再通过海涅-博雷尔定理和连续函数的定义得到存在一个$$ a $$的子序列收敛于$$ x_0 $$且$$ f(x_0)\ge M $$。

## 中值定理

- **中值定理**：设$$ a\lt b $$，$$ f:[a,b]\to \RR $$是$$ [a,b] $$上的连续函数，设$$ y $$是$$ f(a) $$和$$ f(b) $$之间的一个实数，那么存在$$ c\in [a,b] $$满足$$ f(c)=y $$

证明（巧妙！）：思路是找到小于等于$$ y $$最后一次出现的位置，然后利用左极限证明$$ f(c)\le y $$，利用右极限证明$$ f(c)\ge y $$。只考虑$$ f(a)\lt y\lt f(b) $$的情况，令$$ E=\{x\in [a,b]:f(x)\lt y\} $$和$$ c=\sup(E) $$，利用选择公理找到由$$ E $$中元素构成的序列$$ c-1/n\le x_n\le c $$，再根据夹逼定理得到$$ \lim_{n\to \infty}x_n=c $$，利用连续的定义和比较原理得到$$ y\le \lim_{n\to \infty}f(x_n)=f(c) $$；存在$$ N $$满足对所有$$ n\ge N $$都有$$ c+1/n\le 1/n $$，那么再根据比较原理得到$$ (f(c+1/n))_{n=N}^{\infty} $$的极限不小于$$ y $$，因此$$ f(c)\ge y $$。

我们也可以直接得到：设$$ f:[a,b]\to \RR $$的最小值是$$ m $$，最大值是$$ M $$，则$$ f([a,b])=[m,M] $$

- 习题（不动点定理）：设$$ f:[0,1]\to [0,1] $$是连续函数，存在一个实数$$ x $$满足$$ f(x)=x $$。

证明：令$$ g(x)=f(x)-x $$，而$$ g $$的最大值$$ M\ge g(0)=f(0)\ge 0 $$，最小值$$ m\le g(1)=f(1)-1\le 0 $$，由上述推论可知存在$$ x $$满足$$ g(x)=0 $$即$$ f(x)=x $$。

## 单调函数

- $$ f:X\to \RR $$单调递增定义为对任一$$ a,b\in X $$，$$ a\lt b $$，都有$$ f(a)\lt f(b) $$；严格单调递增定义为都有$$ f(a)\lt f(b) $$。显然对于单调函数$$ a\lt b $$当且仅当$$ f(a)\lt f(b) $$。

对于函数$$ f:[a,b]\to \RR $$，如果$$ f $$是连续的单射，一定是单调的：设$$ f(a)\le f(b) $$，如果存在$$ x_1\lt x_2 $$有$$ f(x_1)\gt f(x_2) $$，那么利用中值定理存在$$ x_3\in (a,x_1) $$有$$ f(x_3)=f(x_2) $$。

对于函数$$ f:[a,b]\to \RR $$，如果$$ f $$是连续的且严格单调的，那么$$ f:[a,b]\to [f(a),f(b)] $$是双射，$$ f^{-1} $$也是严格单调的，且是连续的：直接用$$ \varepsilon-\delta $$定义，对任一$$ y $$和$$ \varepsilon $$，设$$ f(x)=y $$，必存在$$ \delta $$满足$$ f(x-\varepsilon)\le y-\delta\le f(x+\varepsilon) $$。

- 习题：由于$$ \QQ $$是可数集，存在双射$$ q:\NN\to \QQ $$，定义$$ g:\QQ\to \RR $$满足$$ g(q(n))=2^{-n} $$，则$$ \sum_{r\in \QQ}g(r) $$绝对收敛，令$$ f(x)=\sum_{r\in \QQ;r\lt x}g(r) $$。

(a)$$ f $$单调递增：根据实数的序命题3（任意两实数间存在有理数），对任意$$ a\lt b $$有实数$$ c\in (a,b) $$，$$ f(b)=f(a)+\sum_{r\in \QQ;a\le x\lt b}g(r)\ge f(a)+g(c) $$。

(b)$$ f $$在有理数处间断：对有理数$$ a $$，对任意$$ b\gt a $$有$$ f(b)=f(a)+\sum_{r\in \QQ;a\le r\lt b}g(r)\ge f(a)+g(a) $$。

(c)$$ f $$在无理数处连续（巧妙！）：令$$ f_n(x)=\sum_{r\in \QQ;r\lt x;g(r)\ge 2^{-n}}g(r) $$，由于$$ \{r\in \QQ;g(r)\ge 2^{-n}\} $$是有限集，$$ x $$是无理数时存在一个$$ \delta $$，满足$$ [x-\delta,x+\delta) $$中没有该集合的元素，因此$$ f_n $$在无理数处连续，而$$ f_n(x)\le f(x)=f_n(x)+\sum_{r\in \QQ;r\lt x;g(r)\lt 2^{-n}}g(r)\le f_n(x)+\sum_{r\in \QQ:g(r)\lt 2^{-n}}g(r)=f_n(x)+2^{-n} $$，那么再利用函数连续的定义，存在一个$$ n $$满足$$ 2^{-n+1}\lt \varepsilon $$，由于存在$$ \delta $$满足$$ f_n $$在$$ (x-\delta,x+\delta) $$内与$$ f_n(x) $$差不超过$$ \varepsilon-2^{-n+1} $$，$$ f $$在$$ (x-\delta,x+\delta) $$内与$$ f(x) $$差不超过$$ \varepsilon $$。

## 一致连续性

- **一致连续的定义**：设$$ X $$是$$ \RR $$的子集，称$$ f:X\to \RR $$是一致连续的，当且仅当对任意$$ \varepsilon\gt 0 $$，都存在$$ \delta\gt 0 $$使得对所有$$ \vert x-x_0\vert \le \delta $$都有$$ \vert f(x)-f(x_0)\vert \le \varepsilon $$。

$$ f(x)=1/x $$和$$ f(x)=x^2 $$都是连续但不一致连续的例子，而$$ f(x)=ax+b $$和$$ f(x)=\sqrt{x} $$在$$ (1,+\infty) $$上都满足一致连续，我认为一致连续差不多叙述的就是“导函数在任一处（包括无穷大处）极限不为无穷”。

- **命题1**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$，则$$ f $$在$$ X $$上一致连续，当且仅当对任意两个由$$ X $$中元素构成的等价序列$$ (x_n)_{n=0}^{\infty} $$和$$ (y_n)_{n=0}^{\infty} $$，序列$$ (f(x_n))_{n=0}^{\infty} $$和$$ (f(y_n))_{n=0}^{\infty} $$也等价。

这里使用了当时定义实数所用的等价序列的概念，不要求序列收敛。证明就直接用$$ \varepsilon-\delta $$定义，左蕴含右只需找到$$ N $$满足$$ n\ge N $$时$$ \vert x_n-y_n\vert \le \delta $$；右蕴含左的反证即对存在的$$ \varepsilon $$，令$$ \delta=1/n $$，存在$$ \vert x-x_0\vert \le 1/n $$且$$ \vert f(x)-f(x_0)\vert \gt \varepsilon $$，令$$ x_n=x $$和$$ y_n=x_0 $$即可。

令其中一个序列为常数序列就转化成了用序列定义连续的形式。

$$ f(x)=1/x $$可利用序列$$ (1/n)_{n=1}^{\infty} $$和$$ (1/2n)_{n=1}^{\infty} $$得到不满足一致连续；$$ f(x)=x^2 $$可利用序列$$ (n)_{n=0}^{\infty} $$和$$ (n+1/n)_{n=0}^{\infty} $$。

通过这个命题可以得到两个一致连续的函数复合仍然是一致连续的函数。

- **命题2**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$是一致连续的，$$ (x_n)_{n=0}^{\infty} $$是由$$ X $$中元素构成的柯西序列，那么$$ (f(x_n))_{n=0}^{\infty} $$也是柯西序列。

推论：如果$$ x_0 $$是$$ X $$的附着点，极限$$ \lim_{x\to x_0;x\in X}f(x) $$存在。根据命题2可知函数值序列收敛，再根据命题1可知他们都收敛于同一个实数。

- **命题3**：设$$ X $$是$$ \RR $$的子集，$$ f:X\to \RR $$是一致连续的，如果$$ E $$是$$ X $$的有界子集，那么$$ f(E) $$也是有界的。

证明：用类似最大值原理引理的证明思路。反证，先找到$$ a_n $$满足$$ f(a_n)\ge n $$，再根据波尔查诺-魏尔斯特拉定理得到$$ a_n $$存在一个收敛的子序列，再根据命题2得到这个子序列对应的函数值序列收敛，矛盾。

- **命题4**：设$$ a\lt b $$都是实数，$$ f:[a,b]\to \RR $$是$$ [a,b] $$上的连续函数，那么$$ f $$也是一致连续的。

证明：反证，用命题1。令$$ E=\{n\in \NN:\vert f(x_n)-f(y_n)\vert \gt \varepsilon\} $$，根据可数性命题1（可数集的子集至多可数）$$ E $$是可数集，并且存在单调递增序列$$ n $$满足$$ \vert f(x_{n_j})-f(y_{n_j})\vert \gt \varepsilon $$，再利用海涅-博雷尔定理找到$$ (x_{n_j})_{j=0}^{\infty} $$收敛于$$ L\in [a,b] $$的子序列$$ (x_{n_{j_k}})_{k=0}^{\infty} $$，再利用连续函数的定义得$$ \lim_{k\to \infty}f(x_{n_{j_k}})=f(L) $$，由等价序列的定义可知$$ \lim_{n\to \infty}(x_n-y_n)=0 $$，再利用子序列定理1（收敛序列的子序列收敛）得到$$ \lim_{n\to \infty}(x_{n_{j_k}}-y_{n_{j_k}})=0 $$，再根据极限定律得到$$ \lim_{k\to \infty}y_{n_{j_k}}=L $$，有$$ \lim_{k\to \infty}f(y_{n_{j_k}})=f(L) $$，再利用极限定律得到$$ \lim_{k\to \infty}(f(x_{n_{j_k}})-f(y_{n_{j_k}}))=0 $$，与$$ n $$序列的定义矛盾。

# 第10章 函数的微分

## 基本定义

- **可微性的定义**：$$ x_0\in X $$是$$ X $$的极限点，对$$ f:X\to \RR $$，如果极限$$ \lim_{x\to x_0;x\in X\setminus\{x_0\}}\frac{f(x)-f(x_0)}{x-x_0} $$收敛于实数$$ L $$，那么$$ f $$在$$ x_0 $$处可微，导数是$$ L $$，记做$$ f'(x_0)=L $$。

可以直接通过函数的极限定律求一些导数：$$ f(x)=x^2 $$时$$ f'(x)=\lim_{x\to x_0;x\in \RR\setminus\{x_0\}}\frac{x^2-{x_0}^2}{x-x_0}=\lim_{x\to x_0}x+x_0=2x_0 $$

- **牛顿逼近法**：$$ x_0\in X $$是$$ X $$的极限点，对$$ f:X\to \RR $$，$$ f $$在$$ X $$中的$$ x_0 $$处可微且导数是$$ L $$当且仅当：对任意$$ \varepsilon\gt 0 $$都存在$$ \delta\gt 0 $$使得对所有$$ x\in X $$且$$ \vert x-x_0\vert \le \varepsilon $$，那么$$ \vert f(x)-(f(x_0)+L(x-x_0)\vert \le \varepsilon\vert x-x_0\vert $$

证明：$$ x\ne x_0 $$时就是$$ \vert \frac{f(x)-f(x_0)}{x-x_0}-L\vert \le \varepsilon $$，利用函数极限的定义可知。

牛顿逼近法的形式就是$$ f(x)\approx f(x_0)+f'(x_0)(x-x_0) $$。牛顿逼近法可以用于求函数零点，令$$ f(x')\approx f(x)+(x'-x)f'(x)=0 $$，$$ x'=x-f(x)/f'(x) $$，例如开根号的算法。

我认为直接通过定义得到的$$ \vert f(x)-f(x_0)\vert \le (\vert L\vert +\varepsilon)(x-x_0) $$也是证明中很好用的形式。

- **命题1**：$$ x_0\in X $$是$$ X $$的一个极限点，如果$$ f $$在$$ x_0 $$处是可微的，那么$$ f $$在$$ x_0 $$处也是连续的。

证明：直接使用牛顿逼近法，设$$ f'(x_0)=L\gt 0 $$，对任意$$ \varepsilon'\gt 0 $$，都存在$$ \delta'\gt 0 $$满足对所有$$ \vert x-x_0\vert \le \delta' $$都有$$ \vert f(x)-f(x_0)\vert \le (L+\varepsilon')(x-x_0)\le (L+\varepsilon')\delta' $$。对于$$ \varepsilon\gt 0 $$，任取一个$$ \varepsilon'\gt 0 $$，令$$ \delta=min(\delta',\varepsilon/(L+varepsilon') $$即可得到$$ \vert f(x)-f(x_0)\vert \le varepsilon $$。

$$ f:X\to \RR $$，若$$ f $$在所有$$ x_0\in X $$处都可微，则定义$$ f $$在$$ X $$上可微函数。那么可以得到可微函数是连续函数。

利用函数的极限定律，可以推出微分计算定理：

$$ x_0\in X $$是$$ X $$的极限点，

- **微分计算定理1**：如果$$ f $$是常数函数，$$ f $$在$$ x_0 $$处可微且$$ f'(x_0)=0 $$。
- **微分计算定理2**：如果对所有$$ x\in X $$，$$ f(x)=x $$，$$ f $$在$$ x_0 $$处可微且$$ f'(x_0)=1 $$。
- **微分计算定理3**：如果$$ f $$和$$ g $$在$$ x_0 $$处可微，$$ f+g $$也在$$ x_0 $$处可微且$$ (f+g)'(x_0)=f'(x_0)+g'(x_0) $$
- **微分计算定理4**：如果$$ f $$和$$ g $$在$$ x_0 $$处可微，$$ fg $$在$$ x_0 $$处也可微且$$ (fg)'(x_0)=f'(x_0)g(x_0)+g'(x_0)f(x_0) $$
- **微分计算定理5**：如果$$ f $$在$$ x_0 $$处可微，$$ cf $$在$$ x_0 $$处也可微且$$ (cf)'(x_0)=cf'(x_0) $$
- **微分计算定理6**：如果$$ f $$在$$ x_0 $$处可微且$$ f $$在$$ X $$上非零，那么$$ 1/f $$在$$ x_0 $$处可微，$$ (1/f)'(x_0)=-f'(x_0)/f(x_0)^2 $$
- **微分计算定理7**：如果$$ f $$和$$ g $$在$$ x_0 $$处可微，$$ f/g $$在$$ x_0 $$处也可微且$$ (f/g)'(x_0)=(f'(x_0)g(x_0)-g'(x_0)f(x_0))/(g(x_0)^2) $$

定理3称为莱布尼茨法则，需要稍作变换：$$ f(x)g(x)-f(x_0)g(x_0)=(f(x)g(x)-f(x_0)g(x))+(f(x_0)g(x)-f(x_0)g(x_0)) $$

对于$$ f(x)=x^n(n\in \NN) $$的导数，可以直接使用归纳法，也可用函数极限定律和n次方差公式得到$$ f'(x)=nx^{n-1} $$；对于$$ n\lt 0 $$的情况利用定理6可得结论相同。

- **链式法则**：$$ f:X\to Y $$在$$ x_0 $$处可微,$$ g:Y\to \RR $$在$$ y_0=f(x_0) $$处可微，那么$$ g\circ f:X\to \RR $$在$$ x_0 $$处可微，且$$ (g\circ f)'(x_0)=g'(y_0)f'(x_0) $$。

证明：利用函数极限值命题1，任取序列满足$$ \lim_{n\to \infty}x_n=x_0 $$，有$$ \lim_{n\to \infty}f(x_n)=y_0 $$，那么利用函数极限定律得到$$ \lim_{n\to \infty}\frac{g(f(x_n))-g(y_0)}{x_n-x_0}=\lim_{n\to \infty}\frac{g(f(x_n))-g(y_0)}{f(x_n)-y_0}\frac{f(x_n)-f(x_0)}{x_n-x_0}=g'(y_0)f'(x_0) $$。如果$$ f(x_n)=0 $$会出现问题，注意到如果$$ f'(x_0)\ne 0 $$，利用牛顿逼近法令$$ \varepsilon\lt \vert f'(x_0)\vert $$时有存在$$ \delta $$满足$$ \vert x-x_0\vert \lt \delta $$时$$ f(x)\ne f(x_0) $$，再利用函数的极限值命题2，将极限固定在$$ (x_0-\delta,x_0+\delta) $$内即可；对于$$ f'(x_0)=0 $$的情况，用定义$$ \vert g(f(x))-g(f(x_0))\vert \le (\vert g'(f(x_0))\vert +\varepsilon_2)\vert f(x)-f(x_0)\vert \le (\vert g'(f(x_0))\vert +\varepsilon_2)\varepsilon_1(x-x_0) $$，任取$$ \varepsilon_2 $$，令$$ \varepsilon_1\lt \varepsilon/(\vert g'(y_0)\vert +\varepsilon_2) $$和$$ \delta=\min(\delta_1,\delta_2) $$即可（整个证明直接使用定义并构造$$ \varepsilon_1 $$和$$ \varepsilon_2 $$使得$$ (g'(y_0)+\varepsilon_2)(f'(x_0)+\varepsilon_1)\le g'(y_0)f'(x_0)+\varepsilon $$也可）

## 局部极值和函数单调性

- **局部极值的定义**：$$ f:X\to \RR $$，$$ x_0\in X $$，称$$ f $$在$$ x_0 $$处达到局部最大值当且仅当存在$$ \delta\gt 0 $$使得$$ f $$在$$ X\cap (x_0-\delta,x_0+\delta) $$上达到最大值；局部最小值同理。

- **命题1**：实数$$ a\lt b $$，$$ f:(a,b)\to \RR $$，如果$$ x_0\in (a,b) $$时$$ f $$在$$ x_0 $$处可微，且达到局部最值，则$$ f'(x_0)=0 $$。

证明：利用牛顿逼近法，如果$$ f'(x_0)\ne 0 $$，任取$$ \varepsilon $$存在$$ \delta $$满足对$$ x\in (x_0-\delta,x_0+\delta) $$有$$ f(x_0)+(L-\varepsilon)(x-x_0)\le f(x)\le f(x_0)+(L+\varepsilon)(x-x_0) $$，当$$ \varepsilon\lt \vert L\vert $$时有$$ x_0\lt x\lt x_0+\delta $$时与$$ x_0-\delta\lt x\lt x_0 $$时$$ f(x) $$和$$ f(x_0) $$的大小关系不同。

如果是闭区间$$ [a,b] $$就不成立了。

- **罗尔定理**：实数$$ a\lt b $$，$$ f:[a,b]\to \RR $$是连续函数，并且在$$ (a,b) $$上可微，如果$$ f(a)=f(b) $$则存在$$ x\in (a,b) $$使得$$ f'(x)=0 $$。

根据最大值原理和命题1可以直接得到结论。需要注意如果最大值和最小值都在端点处那么该函数是常值函数。

- **推论（平均值定理）**：设$$ f:[a,b]\to \RR $$是连续函数且在$$ (a,b) $$上可微，存在$$ x\in (a,b) $$满足$$ f'(x)=\frac{f(b)-f(a)}{b-a} $$。

证明：令$$ g(x)=f(x)-\frac{f(b)-f(a)}{b-a}x $$，$$ g(a)=g(b)=0 $$，再利用罗尔定理即可。

- 习题：如果$$ f:\RR\to \RR $$是可微函数，且$$ f' $$有界，则$$ f $$一致连续。

证明：设$$ \vert f'(x)\vert \le M $$，则所有$$ x,y $$均满足$$ \vert f(x)-f(y)\vert \le M\vert x-y\vert $$，否则根据平均值原理会得到矛盾（因此满足习题条件的函数称为利普希茨连续函数，$$ M $$称为利普希茨常数）。那么对每个$$ \varepsilon $$，令$$ \delta=\varepsilon/M $$即可。

- **命题2**：若函数$$ f:X\to \RR $$单调递增且在$$ x_0\in X $$处可微，则$$ f'(x_0)\ge 0 $$；如果单调递减且在$$ x_0 $$处可微，则$$ f'(x_0)\le 0 $$。

反证并用类似命题1的证明方法。

- **命题3**：实数$$ a\lt b $$，$$ f:[a,b]\to \RR $$是可微函数，如果对所有$$ x\in [a,b] $$都有$$ f'(x)\gt 0 $$则$$ f $$严格单调递增；如果都有$$ f'(x)\lt 0 $$则$$ f $$严格单调递减。

反证并利用平均值原理即可得到矛盾。

## 反函数及其导数

- **引理**：$$ f:X\to Y $$是可逆函数，反函数$$ f^{-1}:Y\to X $$，设$$ x_0\in X $$且$$ f(x_0)=y_0\in Y $$，如果$$ f $$在$$ x_0 $$处可微，$$ f^{-1} $$在$$ y_0 $$处可微，则$$ (f^{-1})'(y_0)=1/f'(x_0) $$。

证明可使用链式法则：$$ 1=(f^{-1}\circ f)'(x_0)=(f^{-1})'(y_0)f'(x_0) $$。

- **反函数定理**：$$ f:X\to Y $$是可你函数，反函数$$ f^{-1}:Y\to X $$，设$$ x_0\in X $$且$$ f(x_0)=y_0\in Y $$，如果$$ f $$在$$ x_0 $$处可微且导数不为0，$$ f^{-1} $$在$$ y_0 $$处连续，则$$ f^{-1} $$在$$ y_0 $$处可微，且有$$ (f^{-1})'(y_0)=1/f'(x_0) $$

证明可直接利用函数的极限命题1和序列极限定理6（倒数的极限等于极限的倒数）。

- 习题：研究函数$$ f(x)=x^a $$，$$ a=1/n(n\in \NN且n\ge 1) $$、$$ a\in \QQ $$、$$ a\in \RR $$

1.$$ a=1/n $$时，根据单调函数的命题（严格单调且连续的函数反函数也连续），$$ f(x) $$时连续函数，再根据反函数定理得到$$ f'(x)=1/nx^{1/n-1} $$。

2.$$ a\in \QQ $$时，令$$ a=p/q $$，$$ x^a=(x^p)^{1/q} $$，使用链式法则和微分计算定理可得$$ f'(x)=ax^{a-1} $$。
求证：$$ \lim_{x\to 1;x\in (0,+\infty)}\frac{x^a-1}{x-1}=a $$。直接使用在$$ x=1 $$处导数的定义即可。

3.$$ a\in \RR $$时，
求证：$$ \lim_{x\to 1;x\in (0,+\infty)}\frac{x^a-1}{x-1}=a $$。

证明：令$$ b_n\in (a,+\infty) $$且$$ \lim_{n\to \infty}b_n=a $$，$$ g_n(x)=\frac{x^{b_n}}{x-1} $$；$$ c_n\in (0,a) $$且$$ \lim_{n\to \infty}c_n=a $$，$$ h_n(x)=\frac{x^{b_n}}{x-1} $$。根据比较原理（从序列上扩展到函数的极限值）得到$$ \lim_{x\to 1;x\in (0,+\infty)}\frac{x^{c_n}-1}{x-1}\le \lim_{x\to 1;x\in (0,+\infty)}\frac{x^a-1}{x-1} \le \lim_{x\to 1;x\in (0,+\infty)}\frac{x^{b_n}-1}{x-1} $$。通过习题2得到$$ c_n\le \lim_{x\to 1;x\in (0,+\infty)}\frac{x^a-1}{x-1} \le b_n $$，再利用序列的比较原理得到结论。

求证：$$ f $$在$$ (0,+\infty) $$上可微，且$$ f'(x)=ax^{a-1} $$。

证明：$$ \frac{x^a-{x_0}^a}{x-x_0}={x_0}^{a-1}\frac{(x/x_0)^a-1}{(x/x_0)-1} $$，因此尝试使用上一个结论，$$ f'(x_0)={x_0}^{a-1}\lim_{n\to \infty}\frac{(a_n/x_0)^a-1}{(a_n/x_0)-1} $$，其中$$ \lim_{n\to \infty}a_n=x_0 $$。令$$ b_n=a_n/x_0 $$，有$$ \lim_{n\to \infty}b_n=1 $$，由上一结论可知$$ \lim_{n\to \infty}\frac{ {b_n}^a-1}{b_n-1}=a $$，因此$$ f'(x_0)={x_0}^{a-1}a $$。

## 洛必达法则

- **洛必达法则1**：设$$ X $$是$$ \RR $$的一个子集，$$ f:X\to \RR $$和$$ g:X\to \RR $$，且$$ x_0\in X $$是$$ X $$的极限点，如果$$ f(x_0)=g(x_0)=0 $$，且$$ f $$和$$ g $$在$$ x_0 $$处可微且$$ g'(x_0)\ne 0 $$，则存在$$ \delta\gt 0 $$使得对所有$$ x\in X\cap(x_0-\delta,x_0+\delta)\setminus\{x_0\} $$都有$$ g(x)\ne 0 $$且$$ \lim_{x\to x_0;x\in X\cap(x_0-\delta,x_0+\delta)\setminus\{x_0\}}\frac{f(x)}{g(x)}=\frac{f'(x_0)}{g'(x_0)} $$

证明：链式法则的证明中已经包含了如果$$ g'(x_0)\ne 0 $$就会存在$$ \delta $$使得$$ \delta $$范围内有$$ g(x)\ne 0 $$。而根据函数极限定律得到$$ \lim_{x\to x_0}\frac{f(x)}{g(x)}=\lim_{x\to x_0}\frac{f(x)}{x}/\frac{g(x)}{x}=f'(x_0)/g'(x_0) $$

- **洛必达法则2**：实数$$ a\lt b $$，$$ f:[a,b]\to \RR $$和$$ g:[a,b]\to \RR $$是$$ [a,b] $$上的可微函数，如果$$ f(a)=g(a)=0 $$，且$$ g' $$在$$ [a,b] $$上不为零，且极限$$ \lim_{x\to a;x\in (a,b]}\frac{f'(x)}{g'(x)} $$存在且等于$$ L $$，那么对所有$$ x\in (a,b] $$都有$$ g(x)\ne 0 $$，且极限$$ \lim_{x\to a;x\in (a,b]}\frac{f(x)}{g(x)}=L $$。

证明（巧妙！）：对于$$ g(x)\ne 0 $$可反证并用罗尔定理得到矛盾。利用函数极限的命题1转化为序列$$ (x_n)_{n=1}^{\infty} $$收敛于$$ a $$，构造函数$$ h_n(x)=f(x)g(x_n)-g(x)f(x_n):[a,x_n]\to \RR $$，根据算数运算保持连续性定理$$ h_n(x) $$连续，且$$ h_n(a)=h_n(x_n)=0 $$，因此根据罗尔定理存在$$ a\lt y_n\lt x_n $$满足$$ h_n'(y_n)=0 $$，根据夹逼定理得到$$ (y_n)_{n=1}^{\infty} $$也收敛于$$ a $$，即$$ \frac{f(x_n)}{g(x_n)}=\frac{f'(y_n)}{g'(y_n)} $$，因此$$ \lim_{n\to \infty}\frac{f(x_n)}{g(x_n)}=\lim_{n\to \infty}{f'(y_n)}{g'(y_n)}=L $$。

定理里的$$ [a,b] $$用于避免写成序列时的分类讨论，可以得到对区间$$ [b,a](b\lt a) $$也有同样的结论，进而通过左右极限可以得到$$ a\in [l,r] $$时也满足。

# 第11章 黎曼积分

## 划分

- **连通的定义**：设$$ X $$是$$ \RR $$的子集，称$$ X $$是连通的，当且仅当对任意$$ X $$中的元素$$ x\lt y $$，$$ [x,y] $$是$$ X $$的子集。

- **引理**：$$ X $$是有界且连通的当且仅当$$ X $$是有界区间。

证明左蕴含右可用$$ X $$的上下确界$$\sup(E) $$和$$ \inf(E) $$，那么对于任一元素$$ \inf(E)\lt a\lt\sup(E) $$，必有元素$$ l\in E $$和$$ r\in E $$满足$$ \inf(E)\le l\le a \le r\le\sup(E) $$，因此$$ a\in E $$。对$$ a=\inf(E) $$和$$ a=\sup(E) $$的情况讨论刚好得到四种有界区间。

- **推论**：有界区间的交一定是有界区间。先用引理再利用连通的定义即可。

- **区间长度的定义**：如果$$ I $$是有界区间$$ [a,b] $$，$$ [a,b) $$，$$ (a,b] $$，$$ (a,b) $$中的任一个$$ (a\lt b) $$，定义$$ I $$的长度$$ \vert I\vert :=b-a $$。若$$ I $$是单元素集或空集，$$ \vert I\vert :=0 $$。

- **划分的定义**：设$$ I $$是有界区间，$$ I $$的划分定义为有限个包含在$$ I $$中的有界区间构成的集合$$ P $$使得$$ I $$中每个元素$$ x $$恰好属于$$ P $$中一个有界区间$$ J $$。

- **定理**：设$$ I $$是有界区间，$$ P $$是$$ I $$的一个划分，那么$$ \vert I\vert =\sum_{J\in P}\vert J\vert $$。

证明可直接对$$ P $$的基数归纳，设$$ I $$的右端点是$$ b $$，$$ P $$中必存在右端点为$$ b $$的区间$$ K $$（反证），由定义可知$$ \vert I\vert =\vert I\setminus K\vert +\vert K\vert $$。

- **更细的划分的定义**：设$$ I $$是有界区间，$$ P $$和$$ P' $$是$$ I $$的两个划分，如果对$$ P' $$中每个区间$$ J $$都存在$$ P $$的一个区间$$ K $$满足$$ J\subseteq K $$，则$$ P' $$比$$ P $$更细，$$ P $$比$$ P' $$更粗糙。

- **公共细化的定义**：设$$ I $$是有界区间，$$ P $$和$$ P' $$是$$ I $$的两个划分，定义$$ P $$和$$ P' $$的公共细化$$ P\#P':=\{K\cap J:K\in P;J\in P'\} $$。

- **引理**：$$ P\#P' $$是$$ I $$的划分，且比$$ P $$和$$ P' $$都细。

## 分段常数函数

常数函数$$ f:X\to \RR $$定义为对任意$$ x\in X $$都有$$ f(x)=c $$，$$ c $$称为$$ f $$在$$ X $$上的常数值。

- **分段常数函数的定义**：设$$ I $$是有界区间，$$ f:I\to \RR $$是一个函数，$$ P $$是$$ I $$的一个划分，如果对任意$$ J\in P $$，$$ f $$在$$ J $$上是常值的，则称$$ f $$是关于$$ P $$的分段常数函数。称$$ f $$是$$ I $$上的分段常数函数。

若$$ f $$是关于$$ P $$的分段常数函数，那么对于任意比$$ P $$更细的划分$$ P' $$，$$ f $$都是关于$$ P' $$的分段常数函数。

- **引理**：$$ I $$是有界区间，且$$ f:I\to \RR $$和$$ g:I\to \RR $$都是$$ I $$上的分段常数函数，那么$$ f+g $$，$$ max(f,g) $$，$$ fg $$都是$$ I $$上的分段常数函数，如果$$ g $$在任一处不为$$ 0 $$，则$$ f/g $$也是分段常数函数。

对$$ f $$的划分和$$ g $$的划分进行公共细化得到运算后结果的划分。

- **分段常值积分的定义**：设$$ I $$是有界区间，$$ P $$是$$ I $$的一个划分，$$ f:I\to \RR $$是关于$$ P $$的分段常数函数，定义$$ f $$的分段常数积分$$ p.c.\int_{I}f:=\sum_{J\in P}c_J\vert J\vert $$，其中对任意$$ J\in P $$，$$ c_J $$表示$$ f $$在$$ J $$上的常数值。

- **引理**：对于$$ I $$的不同划分$$ P $$和$$ P' $$，$$ p.c.\int_{I}f $$通过两个划分得到的结果相同。

证明可以考虑$$ P\#P' $$，对粗糙的划分的基数归纳可得$$ P $$和$$ P' $$均与$$ P\#P' $$得到的结果相同。

设$$ I $$是有界区间，$$ f:I\to \RR $$和$$ g:I\to \RR $$是$$ I $$上的分段常数函数，有如下积分定律：

- **积分定律1**：$$ p.c.\int_{I}(f+g)=p.c.\int_{I}f+p.c.\int_{I}g $$。
- **积分定律2**：对任意实数$$ c $$，都有$$ p.c.\int_{I}(cf)=c(p.c.\int_{I}f) $$。
- **积分定律3**：如果对所有$$ x\in I $$都有$$ f(x)\ge 0 $$，则$$ p.c.\int_{I}f\ge 0 $$。
- **积分定律4**：如果$$ f $$是常数函数$$ f(x)=c $$，则$$ p.c.\int_{I}f=c\vert I\vert $$。
- **积分定律5**：如果$$ {J,K} $$是$$ I $$的一个划分，那么$$ f\vert _{J}:J\to \RR $$和$$ f\vert _{K}:K\to \RR $$分别是$$ J $$和$$ K $$上的分段常数函数，且$$ p.c.\int_{I}f=p.c.\int_{J}f\vert _J+p.c.\int_{K}f\vert _K $$。

积分定律1仍然考虑公共细化，积分定律5先证明若两个有界区间$$ I\subseteq J $$，$$ x\in I $$时$$ F(x)=f(x) $$，$$ x\notin I $$时$$ F(x)=0 $$，若$$ f $$是分段常数函数，$$ F $$也是分段常数函数。

## 上黎曼积分和下黎曼积分

- **函数控制的定义**：$$ f:I\to \RR $$，$$ g:I\to \RR $$，如果对所有$$ x\in I $$都有$$ g(x)\ge f(x) $$，称$$ g $$在$$ I $$上从上方控制$$ f $$；如果对所有$$ x\in I $$都有$$ g(x)\le f(x) $$，称$$ g $$在$$ I $$上从下方控制$$ f $$。

- **上下黎曼积分的定义**：设$$ f:I\to \RR $$是定义在有界区间$$ I $$上的函数，对$$ f: $$定义上黎曼积分$$ \overline{\int_{I}}f:=\inf\{p.c.\int_{I}g:g是从上方控制f的分段常数函数\} $$，下黎曼积分$$ \underline{\int_{I}}f:=\sup\{p.c.\int_{I}g:g是从下方控制f的分段常数函数\} $$。

- **引理**：设$$ f:I\to \RR $$是定义在有界区间$$ I $$上的有界函数，以$$ M $$为界，则$$ -M\vert I\vert \le \underline{\int_{I}}f \le \overline{\int_{I}}f\le M\vert I\vert $$。

利用积分定律3，再两次运用上下确界的定义即可。

- **黎曼积分的定义**：设$$ f:I\to \RR $$是定义在有界区间$$ I $$上的有界函数，如果$$ \underline{\int_{I}}f=\overline{\int_{I}}f $$，则称$$ f $$在$$ I $$上黎曼可积，并定义$$ \int_{I}f:=\underline{\int_{I}}f=\overline{\int_{I}}f $$。

对于分段常数函数$$ f $$，有$$ \int_{I}f=p.c.\int_{I}f $$。

- **黎曼和的定义**：设$$ f:I\to \RR $$是定义在有界区间$$ I $$上的有界函数，$$ P $$是$$ I $$的一个划分，定义上黎曼和$$ U(f,P)=\sum_{J\in P;J\ne \emptyset}(\sup_{x\in J}f(x))\vert J\vert $$，下黎曼和$$ L(f,P)=\sum_{J\in P;J\ne \emptyset}(\inf_{x\in J}f(x))\vert J\vert $$。

- **命题**：设$$ f:I\to \RR $$是定义在有界区间$$ I $$上的有界函数，则$$ \overline{\int{I}}f=\inf\{U(f,P):P是I的划分\} $$，$$ \underline{\int{I}}f=\sup\{L(f,P):P是I的划分\} $$。

证明：利用上黎曼积分的定义，并反复利用上下确界的定义。对于每个$$ P $$，可以构造分段常数函数$$ g $$使得对每个$$ J\in P $$都有$$ c_J=\sup{x\in J}f(x) $$，则$$ p.c.\int_{I}g=U(f,P) $$，即$$ \overline{\int_{I}}f\le U(f,p) $$，进而$$ \overline{\int_{I}}f\le \inf\{U(f,P):P是I的划分\} $$；对于每个分段常数函数$$ g $$，设$$ g $$关于$$ P $$的分段常数函数，则对于任意$$ J\in P $$，有$$ c_J\ge \sup_{x\in J}f(x) $$，因此$$ p.c.\int_{I}g\ge U(f,P) $$，$$ p.c.\int_{I}g\ge \inf\{U(f,P):P是I的划分\} $$，进而$$ \overline{\int_{I}}f\ge \inf\{U(f,P):P是I的划分\} $$。

## 黎曼积分的基本性质

利用黎曼积分的定义和积分定律，可以很容易得到内容几乎相同的黎曼积分定律：(a)黎曼可积函数的和黎曼可积，且$$ \int_{I}(f+g)=\int_{I}f+\int_{I}g $$;(b)$$ \int_{I}(cf)=c(\int_{I}f) $$;(c)$$ f(x)\ge 0 $$则$$ \int_{I}f\ge 0 $$;(d)$$ \{J,K\} $$是$$ I $$的划分，则$$ \int_{I}f=\int_{J}f\vert _J+\int_{K}f\vert _K $$。

- **定理1**：设$$ I $$是有界区间，$$ f:I\to \RR $$和$$ g:I\to \RR $$是黎曼可积的，则$$ \max(f,g)(x):I\to \RR $$和$$ \min(f,g)(x):I\to \RR $$也是黎曼可积的。

证明：思路是利用定义并取$$ \varepsilon $$证明两数相等。任取$$ \varepsilon $$，存在从下方控制$$ f $$的分段常数函数$$ \underline{f}:I\to \RR $$满足$$ \int_{I}\underline{f}\ge \int_{I}f-\varepsilon $$，从上方控制$$ f $$的分段常数函数$$ \overline{f} $$满足$$ \int_{I}\overline{f}\le \int_{I}f+\varepsilon $$；$$ \underline{g} $$满足$$ \int_{I}\underline{g}\ge \int_{I}f-\varepsilon $$，$$ \overline{g} $$满足$$ \int_{I}\overline{g}\le \int_{I}g+\varepsilon $$。$$ \overline{\int_{I}}\max(f,g)-\underline{\int_{I}}\max(f,g)\le \int_{I}\max(\overline{f},\overline{g})-\int_{I}\max(\underline{f},\underline{g}) $$，而$$ \max(\overline{f},\overline{g})-\max(\underline{f},\underline{g})\le (\overline{f}-\underline{f})+(\overline{g}-\underline{g}) $$，因此$$ \max(f,g)(x) $$的上下黎曼积分差不超过$$ 4\varepsilon $$。

而$$ \vert f\vert =\max(f,-f) $$，绝对值保持黎曼可积性。也可设$$ f_+=max(f,0) $$，$$ f_-=min(f,0) $$，$$ \vert f\vert =f_+-f_- $$。

- **定理2**：设$$ I $$是有界区间，$$ f:I\to \RR $$和$$ g:I\to \RR $$是黎曼可积的，则$$ (fg)(x):I\to \RR $$也是黎曼可积的。

证明：思路仍然是设$$ \varepsilon $$。要对正负讨论，因此写成$$ fg=f_+g_++f_+g_-+f_-g_++f_-g_- $$。对于$$ f_+g_+ $$的黎曼积分，分别找到上界$$ M_1 $$和$$ M_2 $$。类似定理1设$$ \overline{f_+} $$，$$ \underline{f_+} $$，$$ \overline{g_+} $$，$$ \underline{g_+} $$，$$ \overline{f_+}(x)\overline{g_+}(x)-\underline{f_+}(x)\underline{g_+}(x)=\overline{f_+}(x)(\overline{g_+}(x)-\underline{g_+}(x))+\underline{g_+}(x)(\overline{f_+}(x)-\underline{f_+}(x)) $$。因此上下黎曼积分差不超过$$ M_1(2\varepsilon)+M_2(2\varepsilon) $$。

## 黎曼可积性

- **定理1**：设$$ I $$是有界区间，$$ f $$是$$ I $$上的一致连续的函数，则$$ f $$是黎曼可积的。

证明：利用一致连续的$$ \varepsilon-\delta $$定义，根据实数的序命题2找到整数$$ N\gt 0 $$使得$$ (b-a)/N\lt \delta $$(区间端点为$$ a $$和$$ b $$)，找到一个划分$$ J_1,...,J_N $$使得每个区间长度都为$$ (b-a)/N\lt \delta $$，由于$$ f(x)\lt f(y)+\varepsilon $$对所有$$ x,y\in J_k $$成立，两边分别取上确界和下确界，得到$$ \overline{\int_{J_k}}f-\underline{\int_{J_k}}f\le (\sup_{x\in J_k}f(x)-\inf_{x\in J_k}f(x))\vert J_k\vert \le \varepsilon\vert J_k\vert $$。因此利用黎曼积分的性质(d)上下黎曼积分的差不超过$$ \varepsilon\vert b-a\vert $$。

因为上下黎曼积分分别是用$$ \inf $$和$$ \sup $$定义的，因此构造一对从上方控制和从下方控制的函数即可。

- **推论**：设$$ f:[a,b]\to \RR $$是连续的，则$$ f $$黎曼可积。

- **定理2**：设$$ I $$是有界区间，$$ f:I\to \RR $$是一个连续有界的函数，那么$$ f $$是黎曼可积的。

证明：设区间端点$$ a $$和$$ b $$，$$ M $$为$$ f $$的界，取$$ \varepsilon $$，利用推论$$ f $$在$$ [a+\varepsilon,b-\varepsilon] $$上是黎曼可积的，在闭区间外上下黎曼积分的差不超过$$ (2M)(2\varepsilon) $$。

- **定理3**：$$ f:[a,b]\to \RR $$是单调函数，则$$ f $$在$$ [a,b] $$上黎曼可积。

证明：不妨设$$ f $$递增。设$$ N\gt 0 $$将区间划分为长度为$$ (b-a)/N $$的$$ N $$段再用$$ \sup $$和$$ \inf $$来构造从上方控制的函数和从下方控制的函数。利用嵌套级数引理可得最终上下黎曼积分的差不超过$$ (f(b)-f(a))(b-a)/N $$。

- **推论**：设$$ I $$是有界区间，$$ f:I\to \RR $$是单调且有界的，则$$ f $$黎曼可积。

利用定理2的证法设$$ \varepsilon $$再使用定理3即可。

- **推论**：分段连续（存在划分使得函数在划分中的每个区间上连续）的有界函数黎曼可积，分段单调的有界函数黎曼可积。

- **积分判别法**：设$$ f:[0,+\infty)\to \RR $$时单调递减的非负函数，那么级数$$ \sum_{n=0}^{\infty}f(n) $$收敛当且仅当$$ \sup_{N\gt 0}\int_{[0,N]}f $$有限。

证明：单调函数黎曼可积，构造证明出$$ \sum_{n=1}^{N}f(n)\le \int_{[0,N]}f $$和$$ \sum_{n=0}^{N-1}\ge \int_{[0,N]}f $$，即$$ \int_{[0,N+1]}f-f(0)\le \sum_{n=1}^{N}f(n)\le \int_{[0,N]}f $$，而单调数列收敛当且仅当有界，通过两次反证法即可。

积分判别法的使用可结合之后的微积分基本定理，例如讨论$$ p\gt 0 $$时$$ \sum_{n=1}^{\infty}n^{-p} $$的收敛情况。

- **命题**：设$$ f[0,1]\to \RR $$在$$ x\in \QQ $$处为$$ 1 $$，$$ x\notin \QQ $$处为0，$$ f $$有界但不黎曼可积。

证明：使用黎曼和，对任一个划分，根据实数的序命题3可知$$ U(f,P)=1 $$，$$ L(f,P)=0 $$，根据黎曼和的命题，上黎曼积分和下黎曼积分不等。

## 微积分基本定理

微积分第一基本定理和第二基本定理建立了微分和积分的联系。

- **微积分第一基本定理**：设$$ f:[a,b]\to \RR $$是黎曼可积的函数，$$ F:[a,b]\to \RR $$是函数$$ \int_{[a,x]}f $$，则$$ F $$是连续的。如果$$ x_0\in [a,b] $$且$$ f $$在$$ x_0 $$处连续，则$$ F $$在$$ x_0 $$处可微，且$$ F'(x_0)=f(x_0) $$。

这里的限制条件是黎曼可积和在$$ x_0 $$处连续。例如如果$$ f $$是分段函数（且断点处不连续），那么$$ F $$在断点处当然不可导。

$$ F $$的连续性证明：设$$ f $$以$$ M $$为界，则$$ -M(y-x)\le \int_{[x,y]}f\le M(y-x) $$，用连续函数命题1转化为序列，$$ -M\vert x_n-x\vert \le F(x_n)-F(x)\le M\vert x_n-x\vert $$，利用夹逼定理对$$ n $$取极限得到$$ \lim_{n\to \infty}F(x_n)=F(x) $$。
$$ F'(x_0)=f(x_0) $$的证明：利用连续的$$ \varepsilon-\delta $$定义和牛顿逼近法。取左右极限避免讨论，设$$ x_0\lt x\le x_0+\delta $$，有$$ (f(x_0)-\varepsilon)(x-x_0)\le \int_{[x_0,x]}f\le (f(x_0)+\varepsilon)(x-x_0) $$，即$$ \vert F(x)-F(x_0)-f(x_0)(x-x_0)\vert \le \varepsilon(x-x_0) $$，右极限为$$ f(x_0) $$。

- 习题1：考虑单调函数的习题$$ g(q(n))=2^{-n} $$，$$ f(x)=sum_{q\lt x}g(q) $$。$$ f(x) $$在无理数处连续，因此$$ F(x) $$在无理数处可微；$$ f(x) $$在有理数处间断，那么任取一个$$ \delta\gt 0 $$，都有$$ y\in (x,x+\delta] $$上，$$ \int_{[x,y]}f(x)/(y-x)\ge f(x)+g(x) $$，而$$ y\in [x-\delta,x) $$上都有\(\int_{[y,x])f(x)/(x-y)\le f(x)\)，令$$ \varepsilon\lt g(x) $$可得$$ F(x) $$不可微。

- 习题2：设$$ f:[a,b]\to \RR $$时黎曼可积的函数，且$$ f $$单调，求证如果$$ x_0\in [a,b] $$，则$$ f $$在$$ x_0 $$处连续当且仅当$$ F $$在$$ x_0 $$处可微。

证明：对于另一边，反证并利用习题1的方法，存在$$ \varepsilon'\gt 0 $$使得对任意$$ \delta' $$都有$$ f(x_0+\delta')-f(x_0-\delta')\gt \varepsilon' $$，那么设$$ \varepsilon $$，对任意$$ \delta $$，存在$$ \delta'\lt \delta $$，$$ \int_{[x_0,x_0+\delta]}f(x)/\delta-\int_{[x_0-\delta,x_0]}f(x)/\delta\ge \int_{[x_0+\delta',x_0+\delta]}f(x)/\delta-\int_{[x_0-\delta,x_0-\delta']}f(x)/\delta\ge \varepsilon'(\delta-\delta')\gt 0 $$，令$$ \varepsilon\lt \varepsilon'(\delta-\delta') $$即可。

- **原函数的定义**：设$$ I $$是有界区间，$$ f:I\to \RR $$，函数$$ F:I\to \RR $$可微，且对所有$$ x\in I $$都有$$ F'(x)=f(x) $$，则称$$ F $$是$$ f $$的原函数。

我认为微积分第一基本定理的内容简单来说就是若$$ F(b)=\int_{[a,b]}f $$，则$$ F $$是$$ f $$的原函数，而微积分第二基本定理的内容就是若$$ F $$是$$ f $$的原函数，则$$ F(b)-F(a)=\int_{[a,b]}f $$。几乎是互为逆命题的。

- **微积分第二基本定理**：设$$ a\lt b $$是实数，设$$ f:[a,b]\to \RR $$是黎曼可积的函数，如果$$ F:[a,b]\to \RR $$是$$ f $$的原函数，那么$$ \int_{[a,b]}f=F(b)-F(a) $$。

证明：只需要证明对每个划分$$ P $$，都有$$ U(f,P)\ge F(b)-F(a)\ge L(f,P) $$。对$$ P $$的每个区间$$ J $$，设端点为$$ l_J $$和$$ r_J $$，则$$ F(b)-F(a)=\sum_{J\in P}F(r_J)-F(l_J) $$，要证明$$ \sup{x\in J}f(x)\vert J\vert \ge F(r_J)-F(l_J) $$（右边不等式同理）。由平均值原理知，存在$$ e\in J $$使得$$ F'(e)=(F(r_J)-F(l_J))/(r_J-l_J) $$，即$$ f(e)\vert J\vert =F(r_J)-F(l_J) $$，得证。

- **引理**：设$$ I $$是有界区间，对$$ f:I\to \RR $$，设$$ F:I\to \RR $$和$$ G:I\to \RR $$是$$ f $$的两个原函数，存在实数$$ C $$使得对所有$$ F=G+C $$

证明：令$$ H=F-G $$，如果存在一个$$ x\lt y $$使得$$ H(x)\ne H(y) $$，则根据平均值原理，存在$$ x\le z\le y $$满足$$ F'(x)-G'(x)=H'(x)\ne 0 $$，因此$$ H $$是常数函数，对任意$$ x\in I $$都有$$ H(x)=C $$。
