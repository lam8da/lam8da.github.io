<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="lambda" />
    <title>《C++ Primer》读书笔记（第01-04章） | lambda</title>
    <link rel="shortcut icon" href="">
    <link href="http://localhost:4000/feed/" rel="alternate" title="lambda" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/highlight.css">
    <link rel="stylesheet" href="/media/css/highlighter-rouge.css">
    <script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        "HTML-CSS": { scale: 80 },
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
          processEscapes: true
        }
      });
    </script>
    <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <h1>《C++ Primer》读书笔记（第01-04章）</h1>
        </header>
        <nav>
        <span><a title="home page" class="" href="http://localhost:4000/">首页</a></span>
        <span><a title="categories" class="" href="http://localhost:4000/categories/">分类</a></span>
        <span><a title="tags" class="" href="http://localhost:4000/tags/">标签</a></span>
        <span><a title="links" class="" href="http://localhost:4000/links/">链接</a></span>
        <span><a title="about" class="" href="http://localhost:4000/about/">关于</a></span>
        <span><a title="subscribe by RSS" class="" href="http://localhost:4000/feed/">订阅</a></span>
        </nav>
        <article class="content">
        <section class="post">
<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">第1章 快速入门</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">第2章 变量和基本类型</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">第3章 标准库类型</a></li>
  <li><a href="#section-3" id="markdown-toc-section-3">第4章 数组和指针</a></li>
</ul>

<p><!--  Not show line_numbers  -->
</p>

<h2 id="section">第1章 快速入门</h2>

<ol>
  <li>Windows下查看程序返回值：<code class="language-c++ highlighter-rouge"><span class="nb">echo</span> %ERRORLEVEL%</code></li>
  <li>endl是一个特殊值，称为操纵符（manipulator），将其写入输出流时将会输出换行效果并刷新与设备相关联的缓冲区</li>
  <li><code class="language-c++ highlighter-rouge"><span class="s">"A"</span></code>表示包含字母A和空字符两个字符的字符串</li>
  <li>宽字符：<code class="language-c++ highlighter-rouge"><span class="n">wchat_t</span> <span class="n">ch</span><span class="o">=</span><span class="sc">L'a'</span><span class="p">;</span></code></li>
  <li>宽字符串：<code class="language-c++ highlighter-rouge"><span class="s">L"hello"</span></code>（包含了最后的宽空字符）</li>
</ol>

<h2 id="section-1">第2章 变量和基本类型</h2>

<ol>
  <li>变量名不能包含两个连续的下划线，也不能以下划线开头后面紧跟一个大写字母</li>
  <li>定义和声明的区别：
    <ul>
      <li>定义：为变量分配存储空间，还可以为变量指定初值</li>
      <li>声明：用于向程序表明变量的类型和名字</li>
    </ul>
  </li>
  <li>定义也是声明：当定义变量时我们声明了它的类型和名字</li>
  <li>
    <p>如果声明有初始化式，那么它可被当作是定义，即使被标记为<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>。如：</p>

    <p><code class="language-c++ highlighter-rouge"><span class="k">extern</span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span></code></p>
  </li>
  <li>只有当<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>声明位于函数外部时，才可以含有初始化式（此时被当成定义）</li>
  <li>与一般的变量不同，在全局作用域声明的<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量是定义该对象的文件的局部变量。此变量只存在于那个文件中，不能被其他文件访问。除非定义时加上<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>。</li>
  <li>引用是一种复合类型（是指用其他类型定义的类型）</li>
  <li>
    <p><code class="language-c++ highlighter-rouge"><span class="k">const</span></code>引用可以初始化为不同类型的对象或者初始化为右值，如字面值常量：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">r</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">r2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">r3</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
</code></pre>
    </div>
    <p>但同样的初始化对于非<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>引用都是不合法的，因为对于：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">double</span> <span class="n">dval</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">ri</span> <span class="o">=</span> <span class="n">dval</span><span class="p">;</span>
</code></pre>
    </div>
    <p>编译器会将其变成：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">dval</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">ri</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
</code></pre>
    </div>
    <p>如果<code class="language-c++ highlighter-rouge"><span class="n">ri</span></code>不是<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>，则可对其赋值，但不会修改<code class="language-c++ highlighter-rouge"><span class="n">dval</span></code>，矛盾。</p>
  </li>
  <li>非<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>的引用只能绑定到与该引用同类型的对象；<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>引用则可以绑定到不同但类型相关的对象或右值。</li>
  <li>枚举成员的值可以不唯一，如：<code class="language-c++ highlighter-rouge"><span class="k">enum</span> <span class="p">{</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">d</span> <span class="p">};</span></code>其中<code class="language-c++ highlighter-rouge"><span class="n">b</span></code>和<code class="language-c++ highlighter-rouge"><span class="n">c</span></code>都是3。</li>
  <li>不能把<code class="language-c++ highlighter-rouge"><span class="kt">int</span></code>等类型赋值给枚举类型的对象</li>
  <li>用于初始化的值必需是一个常量表达式，即在编译时就可以计算出值的表达式</li>
  <li>头文件一般包含：类的定义、<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>变量的声明和函数的声明</li>
  <li>对于“头文件不应含有定义”这一规则，有三个例外：头文件可以定义类、值在编译时就已知的<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>对象和<code class="language-c++ highlighter-rouge"><span class="kr">inline</span></code>函数。这些实体可在多个源文件中定义，只要在每个源文件中的定义是相同的。p68</li>
  <li>当在头文件中定义了<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量后，每个包含该头文件的源文件都有了自己的<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量，其名称和值都一样；定义在头文件中的<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量应该是常量表达式。</li>
  <li>若<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量不是用常量表达式初始化，就不应在头文件中定义，而应在源文件中定义并初始化，并添加<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>使其被多个文件共享。</li>
  <li>若在头文件中定义<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>的<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量，多个cc文件都<code class="language-c++ highlighter-rouge"><span class="cp">#include</span></code>了这个头文件且其obj会被链接到一起时，会出错：重定义。原因：这些cc文件引用头文件后相当于在文件中定义了这个<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>变量，但由于加了<code class="language-c++ highlighter-rouge"><span class="k">extern</span></code>，使其全局可见。</li>
  <li>
    <p>可以声明引用，例如在a.cc中定义：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">const</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">ra</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
</code></pre>
    </div>
    <p>则可以在a.h中声明：<code class="language-c++ highlighter-rouge"><span class="k">extern</span> <span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">ra</span><span class="p">;</span></code></p>
  </li>
  <li>
    <p>逗号表达式与定义，以下是合法的：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">const</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">q</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
</ol>

<h2 id="section-2">第3章 标准库类型</h2>

<ol>
  <li><code class="language-c++ highlighter-rouge"><span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span></code>：<code class="language-c++ highlighter-rouge"><span class="n">getline</span></code>遇到第一个换行符就中止，即使<code class="language-c++ highlighter-rouge"><span class="n">cin</span></code>的第一个字符就是</li>
  <li><code class="language-c++ highlighter-rouge"><span class="n">string</span></code>的“+”操作符左右两边必须至少有一个是<code class="language-c++ highlighter-rouge"><span class="n">string</span></code>类型</li>
  <li><code class="language-c++ highlighter-rouge"><span class="n">string</span></code>对象的下标变量应为<code class="language-c++ highlighter-rouge"><span class="n">string</span><span class="o">::</span><span class="n">size_type</span></code></li>
  <li>注意区分<code class="language-c++ highlighter-rouge"><span class="n">const_iterator</span></code>和<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>的<code class="language-c++ highlighter-rouge"><span class="n">iterator</span></code></li>
  <li>任何改变<code class="language-c++ highlighter-rouge"><span class="n">vector</span></code>长度的操作都会使已存在的迭代器失效。</li>
</ol>

<h2 id="section-3">第4章 数组和指针</h2>

<ol>
  <li>数组元素的类型不能是引用</li>
  <li>如果没有显式提供元素初值，数组元素会像普通变量一样初始化（2.3.4节）：
    <ul>
      <li>在函数体外定义的内置数组，元素均初始化为0</li>
      <li>在函数体内定义的内置数组，元素无初始化</li>
      <li>不管数组在哪定义，若其元素为类类型，则用default constructor来初始化；若该类没有default constructor，则必须显式初始化。</li>
    </ul>
  </li>
  <li>
    <p>字符数组：字符串的字面值包含一个额外的<code class="language-c++ highlighter-rouge"><span class="n">null</span></code>字符</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">char</span> <span class="n">ca1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="sc">'c'</span><span class="p">,</span> <span class="sc">'+'</span><span class="p">,</span> <span class="sc">'+'</span> <span class="p">};</span>  <span class="c1">//长度为3
</span><span class="kt">char</span> <span class="n">ca2</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"c++"</span><span class="p">;</span>  <span class="c1">//长度为4
</span><span class="kt">char</span> <span class="n">ca3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s">"c++"</span><span class="p">;</span>  <span class="c1">//编译错误
</span></code></pre>
    </div>
  </li>
  <li>对指针进行初始化和赋值只能使用：
    <ul>
      <li>0值常量表达式</li>
      <li>类型匹配的对象地址</li>
      <li>另一对象之后的下一地址</li>
      <li>同类型的另一个有效指针</li>
    </ul>
  </li>
  <li><code class="language-c++ highlighter-rouge"><span class="kt">void</span><span class="o">*</span></code>指针可以保存任何类型对象的地址，不允许使用<code class="language-c++ highlighter-rouge"><span class="kt">void</span><span class="o">*</span></code>指针操纵它指向的对象</li>
  <li>两个指针减法操作的结果是标准库类型<code class="language-c++ highlighter-rouge"><span class="kt">ptrdiff_t</span></code>的数据。</li>
  <li>与任何<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>量一样，<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>指针也必须在定义时初始化。</li>
  <li>
    <p>考虑如下代码：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="n">string</span> <span class="o">*</span><span class="n">pstring</span><span class="p">;</span>
<span class="k">const</span> <span class="n">pstring</span> <span class="n">cstr</span><span class="p">;</span>
</code></pre>
    </div>
    <p>这里<code class="language-c++ highlighter-rouge"><span class="k">const</span></code>修饰的是<code class="language-c++ highlighter-rouge"><span class="n">pstring</span></code>类型，这是一个指针。因此上述定义等价于</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="n">string</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cstr</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>可以在数组长度后加<code class="language-c++ highlighter-rouge"><span class="p">()</span></code>来对数组元素做值初始化：</p>

    <div class="language-c++ highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">10</span><span class="p">]();</span>  <span class="c1">// 初始化为0
</span></code></pre>
    </div>
    <p>若不加<code class="language-c++ highlighter-rouge"><span class="p">()</span></code>对于内置类型是不初始化的，也不能用初始化列表。</p>
  </li>
  <li><code class="language-c++ highlighter-rouge"><span class="k">const</span></code>对象的动态数组对于内置类型一定要加<code class="language-c++ highlighter-rouge"><span class="p">()</span></code>。</li>
  <li>c++允许动态分配空数组</li>
</ol>

</section>
<section class="meta">
<span class="author">
  <a href="http://lam8da.github.io">lambda</a>
</span>
<span class="time">
  /
  <time datetime="2013-09-20">2013-09-20</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="http://localhost:4000/categories/#程序&设计" title="程序&设计">程序&设计</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="http://localhost:4000/tags/#c++" title="c++">c++</a>&nbsp;
  
  <a href="http://localhost:4000/tags/#读书笔记" title="读书笔记">读书笔记</a>&nbsp;
  
</span>

</section>
<section class="comment">

<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'lambda'; // required: replace example with your forum shortname
  var disqus_url = 'http://localhost:4000/2013/09/c++-primer-notes-chapter01to04/';
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<div id="gitment_thread"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    owner: 'lam8da',
    repo: 'lam8da.github.io.comments',
    oauth: {
      client_id: '4ec8d7487458f49ba8f2',
      client_secret: 'dbd58db32dee8f9a954f35b6f1ecf931a0a4edfc',
    },
  })
  gitment.render('gitment_thread')
</script>

</section>

<script type="text/javascript">
$(function() {
    $(document).keydown(
      function(e) {
        if (e.target.nodeName.toUpperCase() != 'BODY') return;
        var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
          
            url = 'http://localhost:4000/2013/09/beauty-of-math-junwu-notes/';
          
        } else if (e.which == 39 || e.which == 75) {  // Right arrow and K
          
            url = 'http://localhost:4000/2013/09/c++-primer-notes-chapter05to08/';
          
        }
        if (url) {
          window.location = url;
        }
      });
})
</script>

        </article>
      </div>
    </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1988641-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
